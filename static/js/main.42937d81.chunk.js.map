{"version":3,"sources":["reducers/library.js","templates/Templates.js","utils/stringUtils.js","reducers/editor.js","reducers/analysis.js","store.js","reducers/index.js","components/editor/Code.js","components/editor/String.js","components/editor/Goal.js","components/editor/ImagingStudyAttributes.js","components/editor/Conditional.js","components/editor/DirectTransition.js","components/editor/DistributedTransition.js","components/editor/ConditionalTransition.js","components/editor/ComplexTransition.js","components/editor/Transition.js","templates/Tutorial.js","components/editor/State.js","components/editor/ModuleProperties.js","utils/graphviz.js","components/graph/ModuleGraph.js","components/menu/StyledDropZone.js","components/menu/LoadModule.js","components/menu/Download.js","components/editor/NavTabs.js","transforms/Module.js","utils/keys.js","data/example_module.js","components/editor/JsonEditor.js","components/analysis/StateList.js","components/analysis/AttributeList.js","components/analysis/WarningList.js","components/analysis/RelatedList.js","actions/analysis.js","actions/editor.js","actions/router.js","actions/library.js","containers/Editor.js","App.js","serviceWorker.js","index.js","components/analysis/cancel-button.png","components/editor/cancel-button.png","containers/synthea-animated-logo.svg","containers/synthea-logo.png","containers/minimize-panel.png","containers/fullscreen.png","containers/Info.png","containers/state-button.png","containers/statelist.png","containers/code-button.png","containers/attribute-button.png","containers/related-button.png","containers/warning-button.png"],"names":["initialState","modules","analysis","library","state","arguments","length","undefined","action","type","Object","objectSpread","data","location","getTemplate","path","parsedPath","split","template","shift","reducedPath","join","typeVar","TypeTemplates","AttributeTemplates","TransitionTemplates","StateTemplates","ContainedTemplates","StructureTemplates","ModuleTemplates","_","cloneDeep","get","Date","Year","Month","Day","Hour","Minute","Second","Millisecond","Code","Snomed","system","code","display","Loinc","RxNorm","Nubc","DicomDCM","DicomSOP","Condition","Gender","condition_type","gender","Age","operator","quantity","unit","year","Active Condition","codes","Socioeconomic Status","category","Race","race","Symptom","symptom","value","Observation","Vital Sign","vital_sign","Active Medication","Active CarePlan","PriorState","name","Attribute","attribute","And","conditions","Or","At Least","minimum","At Most","maximum","Not","condition","True","False","Exact","ExactWithUnit","Range","low","high","RangeWithUnit","Prescription","dosage","amount","frequency","period","duration","Goal","addresses","Since","Within","UnnamedDistribution","NamedDistribution","default","ImagingStudy","Instance","title","sop_class","Series","body_site","modality","instances","Direct","Conditional","transition","Distributed","distribution","Complex","distributions","Initial","Terminal","Simple","Guard","allow","Delay","exact","SetAttribute","Counter","CallSubmodule","submodule","Encounter","encounter_class","reason","EncounterEnd","ConditionOnset","assign_to_attribute","target_encounter","ConditionEnd","AllergyOnset","AllergyEnd","MedicationOrder","MedicationEnd","CarePlanStart","CarePlanEnd","Procedure","VitalSign","MultiObservation","number_of_observations","DiagnosticReport","observations","procedure_code","series","cause","probability","Death","CheckYearly","conditional_transition","ActiveCondition","HasCondition","direct_transition","ConditionIncidence","RiskPerMonth","distributed_transition","AcquireCondition","GenderDifference","Male","Female","Common","ConditionVariation","VariantDistribution","Condition1","Condition2","Condition3","Join","MedicationVariation","Medication1","Medication2","Medication3","ChildrensDose","DosageDecision","AdultDose","MedicationsByYear","VariantsByYear","Medication4","ProcedureVariation","BeginEncounter","Procedure1","Observation1","Procedure2","Observation2","Procedure3","Observation3","Blank","remarks","states","Yearly","DeadAt40","DelayUntil40","cleanString","mapObj","keys","reduce","acc","cur","selectedStateKey","selectedStateTransition","selectedModuleKey","loadModuleVisible","downloadVisible","selectedModulePanel","modulePanelVisible","history","clipboard","historyIndex","refreshCodeFlag","editor","newState","key","transitionIndex","toConsumableArray","targetModuleKey","targetNode","currentModuleKey","defineProperty","stateKey","selectedState","alteredState","oldTransitionPoint","complex_transition","complexTransitions","rightNode","forEach","t","i","nodes","dist","saveHistory","concat","structureName","libraryModule","newModule","selectStateTransition","newModules","tempModule","module","values","update","id","set","trim","test","parseFloat","toLowerCase","normalizeType","splitPath","Array","isArray","parent","slice","unset","splice","newVal","filter","x","stateName","fixStateReferences","transitionMapping","transitionName","transitionType","oldTransitionName","nodeName","paths","pathIndex","transitionTo","newName","moduleState","newRemarks","newType","pick","targetPanel","flag","map","s","condition_onset","allergy_onset","medication_order","careplan","libraryModuleCodes","warnings","libraryRelatedModules","relatedModules","attributes","templateCodes","c","stateCollisionWarnings","globalCodes","equivalentStates","checkCollision","libraryState","local","first","second","e","collisions","push","message","moduleKey","visitedStateCheck","visitNext","_loop","nextStateKey","pop","nextState","notVisitedWarnings","visited","v","orphanStateWarnings","o","instance","placeholderCodeWarnings","relatedMap","related","relatedBySubmodule","stateType","sort","a","b","y","enhancers","middleware","createBrowserHistory","basename","createAppStore","routerMiddleware","thunk","composedEnhancers","compose","apply","applyMiddleware","createStore","combineReducers","router","connectRouter","createRootReducer","_Component","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","inherits","createClass","props","react_default","createElement","lib","className","propName","change","onChange","Component","Codes","_Component2","_this","templates","SNOMED-CT","LOINC","NUBC","DICOM-DCM","DICOM-SOP","onClick","val","Code_Code","StringEditor","label","StringsEditor","String_StringEditor","goal","renderObservation","renderText","String_StringsEditor","observation","goalObservationValue","Code_Codes","text","options","_this2","Goals","_this3","goals","Goal_Goal","InstanceList","ImagingStudyAttributes_Instance","_Component3","ImagingStudyAttributes_InstanceList","SeriesList","_Component4","ImagingStudyAttributes_Series","unitOfTimeOptions","unitOfAgeOptions","ConditionalEditor","conditional","Conditional_Gender","Conditional_Age","Conditional_Date","Conditional_SocioeconomicStatus","Conditional_Race","Conditional_Symptom","Conditional_Observation","Conditional_VitalSign","Conditional_ActiveCondition","Conditional_ActiveMedication","Conditional_ActiveCarePlan","Conditional_PriorState","Conditional_Attribute","Conditional_And","Conditional_Or","Conditional_AtLeast","Conditional_AtMost","Conditional_Not","k","renderConditionalType","renderType","renderWarning","month","date","yearInput","monthInput","dayInput","day","hourInput","hour","minuteInput","minute","secondInput","millisecondInput","millisecond","SocioeconomicStatus","value_code","renderValueOrCodeValue","String","valueInput","ActiveMedication","ActiveCarePlan","renderSince","renderWithin","_this4","since","_this5","within","_this6","cond","Conditional_ConditionalEditor","assign","_this7","AtLeast","_this8","AtMost","_this9","DirectTransitionEditor","to","DistributedTransition","currentValue","renderDistribution","index","sum","remainder","remainderOption","editProps","step","min","max","format","formatAsPercentage","validate","checkInRange","num","ConditionalTransition","indexTo","indexFrom","oldEntry","clone","newEntry","swapItems","isLast","renderIf","renderUpDown","ComplexTransition","d","transitionEditor","newDistributedTransition","DirectTransition","nextTransition","newDirectTransition","editor_DistributedTransition","renderTransition","Transition","editor_ConditionalTransition","editor_ComplexTransition","BasicTutorial","selector","EditTutorial","StateEditor","updateRemarks","el","State_Initial","State_Terminal","State_Simple","State_Guard","State_Delay","State_SetAttribute","State_Counter","State_CallSubmodule","State_Encounter","State_EncounterEnd","State_ConditionOnset","State_ConditionEnd","State_AllergyOnset","State_AllergyEnd","State_MedicationOrder","State_MedicationEnd","State_CarePlanStart","State_CarePlanEnd","State_Procedure","State_VitalSign","State_Observation","State_MultiObservation","State_DiagnosticReport","State_ImagingStudy","State_Symptom","State_Death","_React$createElement","_React$createElement2","_React$createElement3","typeOptions","renameNode","changeType","renderStateType","addTransition","components_editor_Transition","otherStates","helpFunction","renderExactOrRange","range","renderValue","href","window","replace","hash","target","wellness","renderWellness","renderReason","allOptions","renderDischargeDisposition","discharge_disposition","renderTargetEncounter","renderAssignToAttribute","targetEncounter","renderConditionOnset","renderReferencedByAttribute","renderCodes","_this10","_this11","referenced_by_attribute","_this12","_this13","renderAllergyOnset","_this14","_this15","_this16","renderPrescription","renderChronicMed","renderCreateAdministration","_this17","checked","chronic","_this18","administration","_this19","_this20","_this21","prescription","renderRefills","renderAsNeeded","renderDosage","renderDuration","renderInstructions","_this22","refills","_this23","as_needed","_this24","instructions","renderMedicationOrder","_this25","_this26","_this27","renderActivities","renderGoals","_this28","_this29","_this30","activities","_this31","Goal_Goals","renderCarePlan","_this32","_this33","_this34","_this35","_this36","_this37","renderValueContainer","renderToggles","currentItem","_this38","console","log","toggles","_this39","observationCount","_this40","ImagingStudyAttributes_SeriesList","renderProbability","renderCause","classInvalid","moduleName","_this41","_this42","_this43","_this44","_this45","ModulePropertiesEditor","call","onRemarksChange","bind","assertThisInitialized","newval","generateDOT","relatedStates","findTransitions","nodesAsDOT","transitionsAsDOT","node","escapeId","shape","style","fillcolor","fontcolor","details","stateDescription","escapeLabel","params","escapeName","escapedName","out_transitions","transitionClassName","distLabel","pct","cnd","logicDetails","transitions","nodeHighlighted","trans","r","p","primarySeries","primaryModality","primaryBodySite","vs","unitv","diagType","diagValue","diagUnits","verb","activity","logic","obs","findReferencedType","leaveUndefinedBlank","threshold","subsOr","prior_description","plan","med","alg","obj","ret","children","?","\"","&","<",">","ModuleGraph","onPanZoom","onMouseUp","onMouseDown","bold","lastDOT","writeSVG","mount","addEventListener","nextProps","panZoomSettings","fullscreen","svgPanZoom","panBy","customPanBy","blockPanZoomEvent","zoom","pan","animationStep","intervalID","stepX","animationTime","stepY","setInterval","clearInterval","ref","width","height","xmlns","opacity","patternUnits","fill","stroke","strokeWidth","transform","position","top","left","fireClickOnMouseUp","getPan","getZoom","setAttribute","linesShouldBold","Math","originalWidth","originalHeight","dot","innerHTML","Viz","svgDefs","ex","alert","svg","document","getElementById","stopPropagation","removeAttribute","unnecessaryGTitle","querySelector","remove","unnecessaryFill","querySelectorAll","group","originator","hitLine","cloneNode","transitionIndexClass","baseVal","find","startsWith","parseInt","appendChild","getAttribute","match","Number","offsetLeft","getBoundingClientRect","offsetTop","visibleWidth","visibleHeight","zoomFactor","controlIconsEnabled","minZoom","onPan","onZoom","panZoomControlsElement","zoomIn","zoomOut","pow","baseStyle","flex","flexDirection","alignItems","padding","borderWidth","borderRadius","marginBottom","borderColor","borderStyle","backgroundColor","outline","activeStyle","color","acceptStyle","cursor","rejectStyle","StyledDropzone","_useDropzone","useDropzone","accept","onDrop","getRootProps","getInputProps","isDragActive","isDragAccept","isDragReject","useMemo","LoadModule","loadModule","json","JSON","parse","Error","setState","selectedOption","files","file","reader","FileReader","onload","result","readAsText","onLoadJSON","onOptionClick","updateJson","event","renderFooter","loadButton","data-dismiss","closeButton","welcome","onHide","renderDetails","n","indexOf","moduleList","submoduleList","Modules","Folders","Submodules","Branches","renderWelcomeMessage","ID","list","fetch","then","response","branch","changeColor","fetchModuleList","catch","error","currentBranch","folders","includes","fetchModule","currentModule","fetchSubmodule","prevProps","prevState","fetchBranchList","classDetails","visible","marginLeft","marginRight","marginTop","aria-label","aria-hidden","StyledDropZone","Download","onDownload","blob","Blob","refs","codeInput","filename","FileSaver","saveAs","stringify","role","disabled","prepareJSON","NavTabs","onChangeModule","onClose","onCloseModule","m","src","CancelButton","alt","extractStates","extractDirectTransition","extractDistributedTransition","extractComplexTransition","extractTransition","uuid","create","toString","extractState","findAvailableKey","root","keys_index","next","matches","exec","createSafeKeyFromName","example_module","Age_Guard","Pre_Examplitis","Examplitis","Wellness_Encounter","Examplitol","Pre_Examplotomy","Examplotomy_Encounter","Examplotomy","End_Examplotomy_Encounter","Last_Days","JsonEditor","clearTimeout","setTimeout","jsoneditor_react_es","mode","ace","StateList","search","placeholder","clearSearch","scope","stateFilter","AttributeList","attributeFilter","WarningList","warning","RelatedList","analyze","dispatchThenAnalyze","dispatch","getState","refreshCode","selectNode","addNode","addStructure","editNode","copyNode","jsonEdit","closeModule","editModuleName","editModuleRemarks","changeStateType","undo","redo","showLoadModule","hideLoadModule","showDownload","hideDownload","changeModulePanel","openModule","loadLibrary","charAt","Editor",".","\\","|","pasteNode","takenKeys","startTutorial","steps","joyride","reset","run","renderAddStateButton","data-tip","renderUndoButton","undoEnabled","renderRedoButton","redoEnabled","renderDownloadButton","renderDeleteButton","renderCopyButton","renderPasteButton","renderStateEditor","editor_State","moduleStates","renderDownload","components_menu_Download","renderLoadModule","components_menu_LoadModule","renderModulePropertiesEditor","editor_ModuleProperties","renderModuleGraph","components_graph_ModuleGraph","onPanelResize","panelWidth","deltaX","onPanelResizeDone","leftNavClick","renderPanelContent","components_analysis_StateList","components_editor_JsonEditor","components_analysis_AttributeList","components_analysis_WarningList","components_analysis_RelatedList","renderStateButton","dataTip","StateButton","renderStateListButton","stateCount","StateListButton","renderAttributesButton","attributesCount","AttributeButton","renderWarningButton","warningCount","WarningButton","renderRelatedModulesButton","relatedCount","RelatedButton","nav","renderNav","SyntheaLogo","components_editor_NavTabs","renderMainEditor","FullscreenButton","InfoButton","CodeButton","MinimizePanel","react_draggable_default","axis","onDrag","onStop","bounds","right","Infinity","bottom","originalPanelWidth","LoadingLogo","stepIndex","__webpack_require__","examplitis","ReactTooltip","rebuild","dist_default","effect","delayShow","react_joyride_es","showOverlay","showSkipButton","showStepsProgress","autoStart","debug","allowClicksThruHole","keyboardNavigation","connect","bindActionCreators","store","dispatchLocationChange","listen","App","es","esm","react_router","component","Boolean","hostname","ReactDOM","render","src_App","navigator","serviceWorker","ready","registration","unregister","exports"],"mappings":"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","file":"static/js/main.42937d81.chunk.js","sourcesContent":["const initialState = {modules: {}, analysis: {}};\r\n\r\nexport default (state = initialState, action) => {\r\n  let newState = null;\r\n  switch (action.type) {\r\n    case 'LOAD_LIBRARY':\r\n      newState = {...state, modules: {...action.data}, location: action.location}\r\n      return newState\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import _ from 'lodash';\r\n\r\n// do not allow direct access because it is easy to forget to clone these templates\r\nexport function getTemplate(path){\r\n\r\n  const parsedPath = path.split('.')\r\n  const template = parsedPath.shift();\r\n  const reducedPath = parsedPath.join('.')\r\n\r\n  let typeVar = null;\r\n  switch(template){\r\n    case 'Type':\r\n      typeVar = TypeTemplates;\r\n      break;\r\n\r\n    case 'Attribute':\r\n      typeVar = AttributeTemplates;\r\n      break;\r\n\r\n    case 'Transition':\r\n      typeVar = TransitionTemplates;\r\n      break;\r\n\r\n    case 'State':\r\n      typeVar = StateTemplates;\r\n      break;\r\n\r\n    case 'Contained':\r\n      typeVar = ContainedTemplates;\r\n      break;\r\n\r\n    case 'Structure':\r\n      typeVar = StructureTemplates;\r\n      break;\r\n\r\n    case 'Module':\r\n      typeVar = ModuleTemplates;\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n\r\n  if(reducedPath.length === 0){\r\n    return typeVar\r\n  }\r\n\r\n  return _.cloneDeep(_.get(typeVar, reducedPath));\r\n}\r\n\r\nconst TypeTemplates = {\r\n  Date: {\r\n    Year: 2000,\r\n    Month: 12,\r\n    Day: 25,\r\n    Hour: 0,\r\n    Minute: 0,\r\n    Second: 0,\r\n    Millisecond: 0\r\n  },\r\n  Code: {\r\n    Snomed: {\r\n      system: \"SNOMED-CT\",\r\n      code: \"1234\",\r\n      display: \"SNOMED Code\"\r\n    },\r\n    Loinc: {\r\n      system: \"LOINC\",\r\n      code: \"1234\",\r\n      display: \"LOINC Code\"\r\n    },\r\n    RxNorm: {\r\n      system: \"RxNorm\",\r\n      code: \"1234\",\r\n      display: \"RxNorm Code\"\r\n    },\r\n    Nubc: {\r\n      system: \"NUBC\",\r\n      code: \"1234\",\r\n      display: \"NUBC Code\"\r\n    },\r\n    DicomDCM: {\r\n      system: \"DICOM-DCM\",\r\n      code: \"XX\",\r\n      display: \"DICOM Modality Code\"\r\n    },\r\n    DicomSOP: {\r\n      system: \"DICOM-SOP\",\r\n      code: \"1.2.3.4.5.6.7.8\",\r\n      display: \"DICOM Subject-Object Pair Code\"\r\n    }\r\n  },\r\n\r\n  Condition: {\r\n    Gender: {\r\n      condition_type: 'Gender',\r\n      gender: 'F'\r\n    },\r\n    Age: {\r\n      condition_type: 'Age',\r\n      operator: \">\",\r\n      quantity: 0,\r\n      unit: \"years\"\r\n    },\r\n    Date: {\r\n      condition_type: 'Date',\r\n      operator: \">\",\r\n      year: 2000,\r\n    },\r\n    \"Active Condition\": {\r\n      condition_type: 'Active Condition',\r\n      codes: [{\r\n        system: \"SNOMED-CT\",\r\n        code: \"1234\",\r\n        display: \"SNOMED Code\"\r\n      }],\r\n    },\r\n    \"Socioeconomic Status\": {\r\n        \"condition_type\": \"Socioeconomic Status\",\r\n        \"category\": \"Middle\"\r\n    },\r\n    Race: {\r\n      \"condition_type\": \"Race\",\r\n      \"race\": \"Hispanic\"\r\n    },\r\n    Symptom: {\r\n      \"condition_type\": \"Symptom\",\r\n      \"symptom\" : \"Chest Pain\",\r\n      \"operator\": \">=\",\r\n      \"value\": 50\r\n    },\r\n    Observation: {\r\n      \"condition_type\": \"Observation\",\r\n      \"codes\": [\r\n        {\r\n          \"system\": \"LOINC\",\r\n          \"code\": \"72107-6\",\r\n          \"display\": \"Mini Mental State Examination\"\r\n        }\r\n      ],\r\n      \"operator\": \"==\",\r\n      \"value\": 0\r\n    },\r\n    \"Vital Sign\": {\r\n        \"condition_type\" : \"Vital Sign\",\r\n        \"vital_sign\" : \"Systolic Blood Pressure\",\r\n        \"operator\" : \">\",\r\n        \"value\" : 120\r\n    },\r\n    \"Active Medication\": {\r\n      \"condition_type\": \"Active Medication\",\r\n      \"codes\": [\r\n        {\r\n          \"system\": \"RxNorm\",\r\n          \"code\": \"849727\",\r\n          \"display\": \"Naproxen sodium 220 MG [Aleve]\"\r\n        }\r\n      ]\r\n    },\r\n    \"Active CarePlan\": {\r\n      \"condition_type\": \"Active CarePlan\",\r\n      \"codes\": [\r\n        {\r\n          \"system\": \"SNOMED-CT\",\r\n          \"code\": \"698360004\",\r\n          \"display\": \"Diabetes self management plan\"\r\n        }\r\n      ]\r\n    },\r\n    PriorState: {\r\n      \"condition_type\": \"PriorState\",\r\n      \"name\": \"\"\r\n    },\r\n    Attribute: {\r\n      \"condition_type\": \"Attribute\",\r\n      \"attribute\": \"opiod_prescription\",\r\n      \"operator\": \"==\",\r\n      \"value\": \"Vicodin\"\r\n    },\r\n    And: {\r\n      \"condition_type\": \"And\",\r\n      \"conditions\": [\r\n        {\r\n          \"condition_type\": \"Gender\",\r\n          \"gender\": \"M\"\r\n        },\r\n        {\r\n          \"condition_type\": \"Age\",\r\n          \"operator\": \">=\",\r\n          \"quantity\": 40,\r\n          \"unit\": \"years\"\r\n        }\r\n      ]\r\n    },\r\n    Or: {\r\n      \"condition_type\": \"Or\",\r\n      \"conditions\": [\r\n        {\r\n          \"condition_type\": \"Gender\",\r\n          \"gender\": \"M\"\r\n        },\r\n        {\r\n          \"condition_type\": \"Age\",\r\n          \"operator\": \">=\",\r\n          \"quantity\": 40,\r\n          \"unit\": \"years\"\r\n        }\r\n      ]\r\n    },\r\n    \"At Least\" : {\r\n      \"condition_type\": \"At Least\",\r\n      \"minimum\": 2,\r\n      \"conditions\": [\r\n        {\r\n          \"condition_type\": \"Gender\",\r\n          \"gender\": \"M\"\r\n        },\r\n        {\r\n          \"condition_type\": \"Age\",\r\n          \"operator\": \">=\",\r\n          \"quantity\": 40,\r\n          \"unit\": \"years\"\r\n        },\r\n        {\r\n          \"condition_type\" : \"Active CarePlan\",\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"SNOMED-CT\",\r\n              \"code\": \"698360004\",\r\n              \"display\": \"Diabetes self management plan\"\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    \"At Most\": {\r\n      \"condition_type\": \"At Most\",\r\n      \"maximum\" : 2,\r\n      \"conditions\": [\r\n        {\r\n          \"condition_type\": \"Gender\",\r\n          \"gender\": \"M\"\r\n        },\r\n        {\r\n          \"condition_type\": \"Age\",\r\n          \"operator\": \">=\",\r\n          \"quantity\": 40,\r\n          \"unit\": \"years\"\r\n        },\r\n        {\r\n          \"condition_type\": \"Active CarePlan\",\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"SNOMED-CT\",\r\n              \"code\": \"698360004\",\r\n              \"display\": \"Diabetes self management plan\"\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    Not: {\r\n      \"condition_type\": \"Not\",\r\n      \"condition\": {\r\n        \"condition_type\": \"Gender\",\r\n        \"gender\": \"M\"\r\n      }\r\n    },\r\n    \"True\": {\r\n      condition_type: \"True\"\r\n    },\r\n    \"False\": {\r\n      condition_type: \"False\"\r\n    }\r\n  }\r\n}\r\n\r\nconst AttributeTemplates = {\r\n  Exact: {\r\n    quantity: 1\r\n  },\r\n  ExactWithUnit: {\r\n    quantity: 1,\r\n    unit: \"days\"\r\n  },\r\n  Range: {\r\n    low: 1,\r\n    high: 2,\r\n  },\r\n  RangeWithUnit: {\r\n    low: 1,\r\n    high: 2,\r\n    unit: \"days\"\r\n  },\r\n  Prescription: {\r\n    dosage: {\r\n      amount: 1,\r\n      frequency: 1,\r\n      period: 1,\r\n      unit: \"days\"\r\n    },\r\n    duration: {\r\n      quantity: 1,\r\n      unit: \"days\"\r\n    }\r\n  },\r\n  Goal: {\r\n    addresses: [\"text\"]\r\n  },\r\n  Observation: {\r\n    codes: [{...TypeTemplates.Code.Loinc}],\r\n    operator: \"==\",\r\n    value: 1\r\n  },\r\n  Since: \" \",\r\n  Within: {\r\n    quantity: 1,\r\n    unit: \"days\"\r\n  },\r\n  UnnamedDistribution: 1.0,\r\n  NamedDistribution: {\r\n    attribute: \"attribute\",\r\n    default: 1.0\r\n  },\r\n\r\n  ImagingStudy: {\r\n    Instance: {\r\n      title: \"Title of this image\",\r\n      sop_class: {...TypeTemplates.Code.DicomSOP}\r\n    },\r\n    Series: {\r\n      body_site: {...TypeTemplates.Code.Snomed},\r\n      modality: {...TypeTemplates.Code.DicomDCM},\r\n      instances: [{\r\n        title: \"Title of this image\",\r\n        sop_class: {...TypeTemplates.Code.DicomSOP}\r\n      }]\r\n    }\r\n  }\r\n}\r\n\r\n\r\nconst TransitionTemplates = {\r\n  Direct: 'Initial',\r\n  Conditional: [{transition: 'Initial', condition: {...TypeTemplates.Condition.Age}}],\r\n  Distributed: [{transition: 'Initial', distribution: 1.0}],\r\n  Complex: [{condition: {...TypeTemplates.Condition.Age}, distributions: [{transition: 'Initial', distribution: 1.0}]}]\r\n}\r\n\r\nconst StateTemplates = {\r\n  Initial: {\r\n    type: \"Initial\",\r\n  },\r\n\r\n  Terminal: {\r\n    type: \"Terminal\",\r\n  },\r\n\r\n  Simple: {\r\n    type: \"Simple\",\r\n  },\r\n\r\n  Guard: {\r\n    type: \"Guard\",\r\n    allow: {...TypeTemplates.Condition.Age}\r\n  },\r\n\r\n  Delay: {\r\n    type: \"Delay\",\r\n    exact: {...AttributeTemplates.ExactWithUnit}\r\n  },\r\n\r\n  SetAttribute: {\r\n    type: \"SetAttribute\",\r\n    attribute: \"\"\r\n  },\r\n\r\n  Counter: {\r\n    type: \"Counter\",\r\n    attribute: \"\",\r\n    action: \"increment\"\r\n  },\r\n\r\n  CallSubmodule: {\r\n    type: \"CallSubmodule\",\r\n    submodule: \"\"\r\n  },\r\n\r\n  Encounter: {\r\n    type: \"Encounter\",\r\n    encounter_class: \"ambulatory\",\r\n    reason: \"\",\r\n    codes: [{...TypeTemplates.Code.Snomed}]\r\n  },\r\n\r\n  EncounterEnd: {\r\n    type: \"EncounterEnd\"\r\n  },\r\n\r\n  ConditionOnset: {\r\n    type: \"ConditionOnset\",\r\n    assign_to_attribute: \"\",\r\n    target_encounter: \"\",\r\n    codes: [{...TypeTemplates.Code.Snomed}]\r\n  },\r\n\r\n  ConditionEnd: {\r\n    type: \"ConditionEnd\"\r\n  },\r\n\r\n  AllergyOnset: {\r\n    type: \"AllergyOnset\",\r\n    target_encounter: \"\",\r\n    codes: [{...TypeTemplates.Code.Snomed}]\r\n  },\r\n\r\n  AllergyEnd: {\r\n    type: \"AllergyEnd\"\r\n  },\r\n\r\n  MedicationOrder: {\r\n    type: \"MedicationOrder\",\r\n    codes: [{...TypeTemplates.Code.RxNorm}]\r\n  },\r\n\r\n  MedicationEnd: {\r\n    type: \"MedicationEnd\"\r\n  },\r\n\r\n  CarePlanStart: {\r\n    type: \"CarePlanStart\",\r\n    codes: [{...TypeTemplates.Code.Snomed}]\r\n  },\r\n\r\n  CarePlanEnd: {\r\n    type: \"CarePlanEnd\"\r\n  },\r\n\r\n  Procedure: {\r\n    type: \"Procedure\",\r\n    codes: [{...TypeTemplates.Code.Snomed}],\r\n    duration: {\r\n      low: 30,\r\n      high: 30,\r\n      unit: 'minutes'\r\n    }\r\n  },\r\n\r\n  VitalSign: {\r\n    type: \"VitalSign\",\r\n    vital_sign: \"\",\r\n    unit: \"\",\r\n    exact: {...AttributeTemplates.Exact}\r\n  },\r\n\r\n  Observation: {\r\n    type: \"Observation\",\r\n    category: \"vital-signs\",\r\n    unit: \"\",\r\n    codes: [{...TypeTemplates.Code.Loinc}],\r\n    exact: {...AttributeTemplates.Exact}\r\n  },\r\n\r\n  MultiObservation: {\r\n    type: \"MultiObservation\",\r\n    category: \"vital-signs\",\r\n    number_of_observations: 0,\r\n    codes: [{...TypeTemplates.Code.Loinc}]\r\n  },\r\n\r\n  DiagnosticReport: {\r\n    type: \"DiagnosticReport\",\r\n    codes: [{...TypeTemplates.Code.Loinc}],\r\n    observations: []\r\n  },\r\n\r\n  ImagingStudy: {\r\n    type: \"ImagingStudy\",\r\n    procedure_code: {...TypeTemplates.Code.Snomed},\r\n    series: [{...AttributeTemplates.ImagingStudy.Series}]\r\n  },\r\n\r\n  Symptom: {\r\n    type: \"Symptom\",\r\n    symptom: \"\",\r\n    cause: \"\",\r\n    probability: 1.0,\r\n    exact: {...AttributeTemplates.Exact}\r\n  },\r\n\r\n  Death: {\r\n    type: \"Death\",\r\n    exact: {...AttributeTemplates.ExactWithUnit}\r\n  }\r\n}\r\n\r\nconst ContainedTemplates = {\r\n  Observation: {\r\n    category: \"laboratory\",\r\n    unit: \"\",\r\n    codes: [{...TypeTemplates.Code.Loinc}],\r\n    exact: {...AttributeTemplates.Exact}\r\n  }\r\n}\r\n\r\nconst StructureTemplates = {\r\n  CheckYearly: {\r\n    CheckYearly: {...StateTemplates.Delay, exact: {...TypeTemplates.exact, quantity: 1, unit: 'years'},\r\n      conditional_transition: [{transition: 'HasCondition', condition: {...TypeTemplates.Condition.ActiveCondition}},{transition: 'CheckYearly'}]},\r\n    HasCondition: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  ConditionIncidence: {\r\n    RiskPerMonth: {...StateTemplates.Delay, exact: {...TypeTemplates.exact, quantity: 1, unit: 'months'},\r\n      distributed_transition: [{distribution: 0.99, transition: 'RiskPerMonth'},{distribution: 0.01, transition: 'AcquireCondition'}]},\r\n    AcquireCondition: {...StateTemplates.ConditionOnset, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Terminal'}\r\n  },\r\n\r\n  GenderDifference: {\r\n    GenderDifference: {...StateTemplates.Simple,\r\n          conditional_transition: [\r\n            {condition: {...TypeTemplates.Condition.Gender, gender: 'M'}, transition: 'Male'},\r\n            {condition: {...TypeTemplates.Condition.Gender, gender: 'F'}, transition: 'Female'}]},\r\n    Male: {...StateTemplates.Simple, direct_transition: 'Common'},\r\n    Female: {...StateTemplates.Simple, direct_transition: 'Common'},\r\n    Common: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  ConditionVariation: {\r\n    VariantDistribution: {...StateTemplates.Simple,\r\n      distributed_transition:[{distribution: 0.25, transition: 'Condition1'},{distribution: 0.35, transition: 'Condition2'},{distribution: 0.40, transition: 'Condition3'}]},\r\n    Condition1: {...StateTemplates.ConditionOnset, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Condition2: {...StateTemplates.ConditionOnset, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Condition3: {...StateTemplates.ConditionOnset, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  MedicationVariation: {\r\n    VariantDistribution: {...StateTemplates.Simple,\r\n      distributed_transition:[{distribution: 0.25, transition: 'Medication1'},{distribution: 0.35, transition: 'Medication2'},{distribution: 0.40, transition: 'Medication3'}]},\r\n    Medication1: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Medication2: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Medication3: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  ChildrensDose: {\r\n    DosageDecision: {...StateTemplates.Simple,\r\n          conditional_transition: [\r\n            {condition: {...TypeTemplates.Condition.Age, operator: '>=', quantity: 18, unit: 'years'}, transition: 'AdultDose'},\r\n            {transition: 'ChildrensDose'}]},\r\n    AdultDose: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    ChildrensDose: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  MedicationsByYear: {\r\n    VariantsByYear: {...StateTemplates.Simple,\r\n          conditional_transition: [\r\n            {condition: {...TypeTemplates.Condition.Date, operator: '>=', year: 2007}, transition: 'Medication1'},\r\n            {condition: {...TypeTemplates.Condition.Date, operator: '>=', year: 1992}, transition: 'Medication2'},\r\n            {condition: {...TypeTemplates.Condition.Date, operator: '>=', year: 1978}, transition: 'Medication3'},\r\n            {transition: 'Medication4'}]},\r\n    Medication1: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Medication2: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Medication3: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Medication4: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  ProcedureVariation: {\r\n    BeginEncounter: {...StateTemplates.Encounter, codes:[{system: 'SNOMED-CT', code: '', display: ''}],\r\n      distributed_transition:[{distribution: 0.25, transition:'Procedure1'},{distribution: 0.35, transition:'Procedure2'},{distribution: 0.40, transition:'Procedure3'}]},\r\n    Procedure1: {...StateTemplates.Procedure, codes:[{system: 'LOINC', code: '', display: ''}], direct_transition: 'Observation1'},\r\n    Observation1: {...StateTemplates.Observation, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Procedure2: {...StateTemplates.Procedure, codes:[{system: 'LOINC', code: '', display: ''}], direct_transition: 'Observation2'},\r\n    Observation2: {...StateTemplates.Observation, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Procedure3: {...StateTemplates.Procedure, codes:[{system: 'LOINC', code: '', display: ''}], direct_transition: 'Observation3'},\r\n    Observation3: {...StateTemplates.Observation, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  }\r\n}\r\n\r\nconst ModuleTemplates = {\r\n  Blank: {\r\n    name: \"Untitled\",\r\n    remarks: [\"A blank module\"],\r\n    states: {\r\n      Initial: {...StateTemplates.Initial, direct_transition: 'Terminal'},\r\n      Terminal: {...StateTemplates.Terminal}\r\n    }\r\n  },\r\n\r\n  Yearly: {\r\n    name: \"Yearly Check for Condition\",\r\n    remarks: [\"Check yearly for patient to have a condition\"],\r\n    states: {\r\n      ...StructureTemplates.CheckYearly,\r\n      Initial: {...StateTemplates.Initial, direct_transition: 'CheckYearly'},\r\n      Terminal: {...StateTemplates.Terminal}\r\n    }\r\n  },\r\n\r\n  DeadAt40: {\r\n    name: \"Dead At 40\",\r\n    remarks: [\"This module is an example of writing a template\"],\r\n    states: {\r\n      Initial: {...StateTemplates.Initial, direct_transition: 'DelayUntil40'},\r\n      DelayUntil40: {...StateTemplates.Delay, exact: {...TypeTemplates.exact, quantity: 40, unit: 'years'}, direct_transition: 'Death'},\r\n      Death: {...StateTemplates.Death, direct_transition: 'Terminal'},\r\n      Terminal: {...StateTemplates.Terminal}\r\n    }\r\n  }\r\n}\r\n","// Converts strings that contain numbers or booleans into their corresponding type\r\n// because that is what GMF expects\r\n\r\nexport function normalizeType(value){\r\n  if(typeof value !== 'string'){\r\n    return value;\r\n  }\r\n  value = value.trim();\r\n  if(/^-?\\d*[\\.]?\\d+$/.test(value) && (parseFloat(value) || parseFloat(value) === 0)){\r\n    value = parseFloat(value);\r\n  }\r\n  if(/^(true|false)$/i.test(value)){\r\n    value = value.toLowerCase() === 'true';\r\n  }\r\n  return value\r\n}\r\n\r\nexport function cleanString(value, mapObj){\r\n  return Object.keys(mapObj).reduce( (acc, cur) => acc.split(cur).join(mapObj[cur]), value)\r\n}\r\n","import _ from 'lodash';\r\nimport { getTemplate } from '../templates/Templates';\r\nimport { normalizeType, cleanString } from '../utils/stringUtils';\r\n\r\nconst initialState = {\r\n    selectedStateKey: null, \r\n    selectedStateTransition: null, \r\n    selectedModuleKey: null, \r\n    loadModuleVisible: false, \r\n    downloadVisible: false,\r\n    selectedModulePanel: 'info',\r\n    modulePanelVisible: true,\r\n    modules: {},\r\n    history: [],\r\n    clipboard: null,\r\n    historyIndex: -1,\r\n    refreshCodeFlag: false\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n\r\n  let newState = {...state}\r\n\r\n  switch (action.type) {\r\n    case 'SELECT_NODE':\r\n      let selectedModulePanel = state.selectedModulePanel;\r\n      if(action.data.key){\r\n        if(selectedModulePanel === 'info' || state.selectedStateKey === action.data.key){ // if on info or a 'double click'\r\n          selectedModulePanel = 'state';\r\n        }\r\n      } else {\r\n        if(selectedModulePanel === 'state'){\r\n          selectedModulePanel = 'info';\r\n        }\r\n      }\r\n\r\n      newState = { ...newState, selectedModulePanel, selectedStateKey: action.data.key, selectedStateTransition: action.data.transitionIndex};\r\n\r\n      // special case where we just want to reflect the selection change in the current history\r\n      newState.history = [...newState.history]\r\n      newState.history[0] = {...newState.history[0], selectedStateKey: action.data.key, selectedStateTransition: action.data.transitionIndex};\r\n\r\n      return newState;\r\n\r\n    case 'COPY_NODE':\r\n      // let newStateName = action.data.newName;\r\n      // let newModuleState = _.cloneDeep(newModuleCopy.states[action.data.targetNode.name]);\r\n      // newModuleState.name = newStateName;\r\n\r\n      // /* fix loopback transition case */\r\n      // renameLoopbackTransition(newModuleState, newStateName, action.data.targetNode.name);\r\n\r\n      // newModuleCopy.states[newStateName] = newModuleState;\r\n      // newState.modules[action.data.targetModuleKey] = newModuleCopy\r\n      // newState.selectedStateKey = action.data.newName;\r\n      // newState.selectedStateTransition = null;\r\n\r\n      newState.clipboard = _.cloneDeep(state.modules[action.data.targetModuleKey].states[action.data.targetNode.name])\r\n\r\n      // saveHistory(newState);\r\n\r\n      return newState\r\n\r\n    case 'ADD_NODE':\r\n\r\n      newState.modules = {...newState.modules}\r\n\r\n      newState.modules[action.data.currentModuleKey].states = {...newState.modules[action.data.currentModuleKey].states, [action.data.stateKey]:action.data.state};\r\n\r\n      if(action.data.selectedState && typeof action.data.selectedStateTransition === 'number'){\r\n        // We have been instructed to insert into the middle of an existing transition\r\n\r\n        let alteredState = _.cloneDeep(newState.modules[action.data.currentModuleKey].states[action.data.selectedState]);\r\n\r\n        if(alteredState.direct_transition && action.data.selectedStateTransition === 0 ){\r\n          let oldTransitionPoint = alteredState.direct_transition;\r\n          alteredState.direct_transition = action.data.stateKey;\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\r\n        } else if(alteredState.distributed_transition){\r\n          let oldTransitionPoint = alteredState.distributed_transition[action.data.selectedStateTransition].transition;\r\n          alteredState.distributed_transition = [...alteredState.distributed_transition]\r\n          alteredState.distributed_transition[action.data.selectedStateTransition] = {...alteredState.distributed_transition[action.data.selectedStateTransition], transition: action.data.stateKey}\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\r\n        } else if(alteredState.conditional_transition){\r\n          let oldTransitionPoint = alteredState.conditional_transition[action.data.selectedStateTransition].transition;\r\n          alteredState.conditional_transition = [...alteredState.conditional_transition]\r\n          alteredState.conditional_transition[action.data.selectedStateTransition] = {...alteredState.conditional_transition[action.data.selectedStateTransition], transition: action.data.stateKey}\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\r\n\r\n        } else if(alteredState.complex_transition){\r\n          alteredState = {...alteredState, complex_transition: _.cloneDeep(alteredState.complex_transition)};\r\n          let complexTransitions = {}\r\n          let transitionIndex = 0;\r\n          let rightNode = null;\r\n          alteredState.complex_transition.forEach( (t, i) => {\r\n\r\n            if(t.transition !== undefined){\r\n              let nodes = t.transition;\r\n              if(complexTransitions[nodes] === undefined){\r\n                complexTransitions[nodes] = true;\r\n                if(transitionIndex === action.data.selectedStateTransition || nodes === rightNode){\r\n                  rightNode = nodes;\r\n                  let oldTransitionPoint = t.transition;\r\n                  t.transition = action.data.stateKey;\r\n                  newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n                }\r\n                transitionIndex++;\r\n              } else if(nodes === rightNode){\r\n                let oldTransitionPoint = t.transition;\r\n                t.transition = action.data.stateKey;\r\n                newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n              }\r\n            } else {\r\n              t.distributions.forEach( dist => {\r\n                let nodes = dist.transition;\r\n                if(complexTransitions[nodes] === undefined){\r\n                  complexTransitions[nodes] = true;\r\n                  if(transitionIndex === action.data.selectedStateTransition){\r\n                    rightNode = nodes;\r\n                    let oldTransitionPoint = dist.transition;\r\n                    dist.transition = action.data.stateKey;\r\n                    newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n                  }\r\n                  transitionIndex++;\r\n                } else if(nodes == rightNode){\r\n                  let oldTransitionPoint = dist.transition;\r\n                  dist.transition = action.data.stateKey;\r\n                  newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n                }\r\n              })\r\n            }\r\n          })\r\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\r\n        }\r\n        newState.selectedStateTransition = 0;\r\n      } else if(action.data.selectedState){\r\n        // we have selected a state, so we will add it AFTER\r\n        let alteredState = _.cloneDeep(newState.modules[action.data.currentModuleKey].states[action.data.selectedState]);\r\n\r\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['direct_transition']\r\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['conditional_transition']\r\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['distributed_transition']\r\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['complex_transition']\r\n\r\n\r\n        if(alteredState.direct_transition){\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = alteredState.direct_transition;\r\n        } else if(alteredState.distributed_transition){\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].distributed_transition = _.cloneDeep(alteredState.distributed_transition);\r\n          delete alteredState['distributed_transition']\r\n        } else if(alteredState.conditional_transition){\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].conditional_transition = _.cloneDeep(alteredState.conditional_transition);\r\n          delete alteredState['conditional_transition']\r\n        } else if(alteredState.complex_transition){\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].complex_transition = _.cloneDeep(alteredState.complex_transition);\r\n          delete alteredState['complex_transition']\r\n        }\r\n        alteredState.direct_transition = action.data.stateKey;\r\n        newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\r\n\r\n      }\r\n\r\n      newState.selectedStateKey = action.data.stateKey;\r\n      newState.selectedModulePanel= 'state';\r\n      newState.selectedStateTransition = null;\r\n\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState;\r\n\r\n    case 'INSERT_NODE':\r\n\r\n      newState.modules = {...newState.modules}\r\n\r\n      newState.modules[action.data.currentModuleKey].states = {...newState.modules[action.data.currentModuleKey].states, [action.data.stateKey]:action.data.state};\r\n      newState.selectedStateKey = action.data.stateKey;\r\n      newState.selectedModulePanel= 'state';\r\n      newState.selectedStateTransition = null;\r\n\r\n      saveHistory(newState);\r\n\r\n      return {...newState};\r\n\r\n    case 'ADD_STRUCTURE':\r\n      newState.modules[action.data.currentModuleKey].states = {...newState.modules[action.data.currentModuleKey].states, ...getTemplate(`Structure.${action.data.structureName}`)};\r\n      newState.selectedStateTransition = null;\r\n\r\n      saveHistory(newState);\r\n\r\n      return {...newState}\r\n\r\n    case 'OPEN_MODULE':\r\n      let selectedModuleKey = state.selectedModuleKey;\r\n\r\n      selectedModuleKey = action.data.key\r\n      if(action.data.libraryModule){\r\n        delete newState.modules[action.data.key];\r\n        let newModule = {}\r\n        newModule[action.data.key] = _.cloneDeep(action.data.libraryModule);\r\n        newState.modules = {...newModule, ...newState.modules}\r\n      }\r\n\r\n      if(!newState.modules[action.data.key]){\r\n        selectedModuleKey = null;\r\n      }\r\n\r\n      newState.selectedModuleKey = selectedModuleKey;\r\n      newState.selectedStateKey = null;\r\n      newState.selectStateTransition = null;\r\n      newState.loadModuleVisible = false;\r\n      newState.history = [];\r\n      newState.historyIndex = 0;\r\n      newState.selectedModulePanel = 'info';\r\n\r\n      saveHistory(newState);\r\n\r\n      return { ...newState };\r\n\r\n    case 'NEW_MODULE':\r\n      let newModules = {...state.modules}\r\n      delete newModules[action.data.key]\r\n\r\n      let tempModule = {}; // put in the right order in the object for the tabs\r\n      tempModule[action.data.key] = action.data.module;\r\n    \r\n\r\n      newState.history = [];\r\n      newState.historyIndex = 0;\r\n      saveHistory(newState);\r\n\r\n      return {...newState, modules: {...tempModule, ...newModules}, selectedStateKey: null, selectedStateTransition: null, selectedModuleKey: action.data.key}\r\n\r\n    case 'JSON_EDIT':\r\n      newState.modules = {...newState.modules}\r\n      newState.modules[state.selectedModuleKey] = _.cloneDeep(action.data.module);\r\n      saveHistory(newState);\r\n      return {...newState};\r\n\r\n    case 'EDIT_NODE':\r\n      let path = action.data.path.join('.');\r\n      let value = Object.values(action.data.update)[0]\r\n      if(typeof value === 'object') {\r\n        value = value.id;\r\n      }\r\n      if(value !== null && value !== undefined) {\r\n        _.set(newState.modules, path, normalizeType(value));\r\n\r\n        // FIX DEPENDENT THINGS\r\n        let splitPath = []\r\n        if(Array.isArray(path)){\r\n          splitPath = path.join('.').split('.')\r\n        } else {\r\n          splitPath = path.split('.')\r\n        }\r\n\r\n        // If change operator on attribute, clean up value if needed\r\n        if(splitPath[splitPath.length-1] === 'operator'){\r\n          const parent = _.get(newState.modules, splitPath.slice(0,-1).join('.'));\r\n          if((parent.operator === 'is nil' || parent.operator === 'is not nil')){\r\n            _.unset(newState.modules, splitPath.slice(0,-1).join('.') + '.value')\r\n          } else {\r\n            if(parent.operator.value === undefined){\r\n              _.set(newState.modules, splitPath.slice(0,-1).join('.') + '.value', 0)\r\n            }\r\n          }\r\n        }\r\n      }\r\n      else{\r\n        _.unset(newState.modules, path);\r\n        let parent = [...action.data.path].splice(0, action.data.path.length -1).join(\".\");\r\n        let newVal = _.get(newState.modules, parent);\r\n        if(Array.isArray(newVal)) {\r\n          _.set(newState.modules, parent, newVal.filter(x => x));\r\n        }\r\n\r\n        // check to see if it is a node deletion, in which case we need to references\r\n        let splitPath = []\r\n        if(Array.isArray(path)){\r\n          splitPath = path.join('.').split('.')\r\n        } else {\r\n          splitPath = path.split('.')\r\n        }\r\n\r\n        if(splitPath.length === 3 && splitPath[1] === 'states'){\r\n          let stateName = splitPath[2]\r\n          fixStateReferences(newState.modules[splitPath[0]], stateName, null)\r\n\r\n          if(splitPath[2] == newState.selectedStateKey){\r\n            newState.selectedStateKey = null; // deleselect\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState\r\n\r\n    case 'ADD_TRANSITION':\r\n\r\n      let transitionMapping = {\r\n        Conditional: 'conditional_transition',\r\n        Distributed: 'distributed_transition',\r\n        Direct: 'direct_transition',\r\n        Complex: 'complex_transition',\r\n      };\r\n\r\n      let transitionName = transitionMapping[action.data.transitionType];\r\n      let oldTransitionName = null;\r\n      if (action.data.nodeName.transition != null) {\r\n        oldTransitionName = transitionMapping[action.data.nodeName.transition.type];\r\n      }\r\n\r\n      let paths = Object.values(transitionMapping);\r\n      for (var pathIndex in paths) {\r\n        delete newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][paths[pathIndex]];\r\n      }\r\n      newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName] = getTemplate(`Transition.${action.data.transitionType}`);\r\n\r\n      // Get first of previous transition locations if available\r\n      let transitionTo = null;\r\n      switch(oldTransitionName) {\r\n        case 'direct_transition':\r\n          transitionTo = _.get(action, 'data.nodeName.transition.to', null);\r\n          break;\r\n        case 'distributed_transition':\r\n        case 'conditional_transition':\r\n          transitionTo = _.get(action, 'data.nodeName.transition.transition[0].to', null);\r\n          break;\r\n        case 'complex_transition':\r\n          transitionTo = _.get(action, 'data.nodeName.transition.transition[0].distributions[0].to', null);\r\n          break;\r\n      }\r\n\r\n      // Provide previous transition location to new if available\r\n      if (transitionTo !== null) {\r\n        switch(transitionName) {\r\n          case 'direct_transition':\r\n            newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName] = transitionTo;\r\n            break;\r\n          case 'distributed_transition':\r\n          case 'conditional_transition':\r\n            newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName][0].transition = transitionTo;\r\n            break;\r\n          case 'complex_transition':\r\n            newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName][0].distributions[0].transition = transitionTo;\r\n            break;\r\n        }\r\n      }\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState\r\n\r\n    case 'RENAME_NODE':\r\n\r\n      let stateName = action.data.targetNode.name;\r\n      let newName = action.data.newName.name;\r\n      let newModule = _.cloneDeep(state.modules[action.data.targetModuleKey])\r\n      let moduleState = newModule.states[stateName]\r\n\r\n\r\n      if(moduleState === undefined){\r\n        // if we can't find it, then it might be a blank state (Unnamed state)\r\n        // Check in the blank key\r\n        moduleState = newModule.states[\"\"]\r\n        stateName = \"\"\r\n      }\r\n\r\n      if(moduleState === undefined){\r\n        // If we still can't find the state, let's just hop out of here.\r\n        return newState;\r\n      }\r\n\r\n      delete newModule.states[stateName];\r\n\r\n      moduleState.name = newName\r\n      newModule.states[newName] = moduleState\r\n\r\n      fixStateReferences(newModule, stateName, newName);\r\n      newState.modules[action.data.targetModuleKey] = newModule;\r\n      newState.selectedStateKey = action.data.newName.name;\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState\r\n\r\n    case 'EDIT_MODULE_NAME':\r\n      newState.modules[action.data.targetModuleKey].name = action.data.newName;\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState;\r\n\r\n    case 'EDIT_MODULE_REMARKS':\r\n\r\n      newState.modules[action.data.targetModuleKey].remarks = action.data.newRemarks ? action.data.newRemarks.split(\"\\n\") : null;\r\n      if(newState.modules[action.data.targetModuleKey].remarks === null){\r\n        delete newState.modules[action.data.targetModuleKey].remarks;\r\n      }\r\n      saveHistory(newState);\r\n\r\n      return newState;\r\n\r\n    case 'CHANGE_STATE_TYPE':\r\n      let newType = action.data.newType.type.id;\r\n      // This line is weird because we need to add the new fields, overwrite any shared fields, then overwrite the type fields\r\n      // TODO figure out how to remove unused fields\r\n      newState.modules[action.data.targetModuleKey].states[action.data.targetNode.name] =\r\n        { ...getTemplate(`State.${newType}`),\r\n          ..._.pick(newState.modules[action.data.targetModuleKey].states[action.data.targetNode.name], ['direct_transition', 'conditional_transition', 'distributed_transition', 'complex_transition', 'remarks']),\r\n          type: getTemplate(`State.${newType}`).type\r\n        };\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState\r\n\r\n    case 'LOAD_JSON':\r\n\r\n      newState.history = []\r\n      newState.historyIndex = 0;\r\n      saveHistory(newState);\r\n\r\n      return { ...newState, selectedModuleKey: action.data.selectedModuleKey, selectedStateKey: null, selectedStateTransition: null};\r\n\r\n    case 'CLOSE_MODULE':\r\n\r\n      delete newState.modules[action.data.selectedModuleKey];\r\n\r\n      newState.history = []\r\n      newState.historyIndex = 0;\r\n      saveHistory(newState);\r\n\r\n      return { ...newState};\r\n\r\n    case 'SHOW_LOAD_MODULE':\r\n      return { ...newState, loadModuleVisible: true};\r\n\r\n    case 'HIDE_LOAD_MODULE':\r\n      return { ...newState, loadModuleVisible: false};\r\n          \r\n    case 'SHOW_DOWNLOAD':\r\n      return { ...newState, downloadVisible: true};\r\n\r\n    case 'HIDE_DOWNLOAD':\r\n      return { ...newState, downloadVisible: false};\r\n\r\n    case 'CHANGE_MODULE_PANEL':\r\n      return { ...newState, selectedModulePanel: action.data.targetPanel, modulePanelVisible: action.data.targetPanel !== 'hide'};\r\n\r\n    case 'REFRESH_CODE_FLAG': \r\n      return {...newState, refreshCodeFlag: action.data.flag}\r\n\r\n    case 'UNDO':\r\n      if(newState.history.length > newState.historyIndex + 1){\r\n        newState.historyIndex++;\r\n        newState.modules = {...newState.modules}\r\n        newState.modules[newState.selectedModuleKey] = _.cloneDeep(newState.history[newState.historyIndex].module);\r\n        newState.selectedStateKey = newState.history[newState.historyIndex].selectedStateKey;\r\n        newState.selectedStateTransition = newState.history[newState.historyIndex].selectedStateTransition;\r\n      }\r\n      return {...newState}\r\n\r\n    case 'REDO':\r\n      if(newState.historyIndex > 0){\r\n        newState.historyIndex--;\r\n        newState.modules = {...newState.modules}\r\n        newState.modules[newState.selectedModuleKey] = _.cloneDeep(newState.history[newState.historyIndex].module);\r\n        newState.selectedStateKey = newState.history[newState.historyIndex].selectedStateKey;\r\n        newState.selectedStateTransition = newState.history[newState.historyIndex].selectedStateTransition;\r\n      }\r\n      return {...newState}\r\n\r\n    default:\r\n      return newState;\r\n\r\n  }\r\n}\r\n\r\n// updates the module in-place with fixed state refences\r\n// if newName is null, then delete all references instead\r\nconst fixStateReferences = (module, stateName, newName) => {\r\n\r\n  Object.keys(module.states).map(s => module.states[s]).forEach( state => {\r\n\r\n    if(state.direct_transition === stateName){\r\n      if(newName === null){\r\n        delete state.direct_transition\r\n      } else {\r\n        state.direct_transition = newName\r\n      }\r\n\r\n    } else if (state.distributed_transition){\r\n      state.distributed_transition.forEach( transition => {\r\n        if(transition.transition === stateName){\r\n          if(newName === null){\r\n            delete transition.transition\r\n          } else {\r\n            transition.transition = newName\r\n          }\r\n        }\r\n      })\r\n    } else if (state.conditional_transition){\r\n      state.conditional_transition.forEach( transition => {\r\n        if(transition.transition === stateName){\r\n          if(newName === null){\r\n            delete transition.transition\r\n          } else {\r\n            transition.transition = newName\r\n          }\r\n        }\r\n        if(transition.condition){\r\n          if(transition.condition.condition_type === 'PriorState' && transition.condition.name === stateName){\r\n            if(newName === null){\r\n              delete transition.condition.name\r\n            } else {\r\n              transition.condition.name = newName\r\n            }\r\n          }\r\n        }\r\n      })\r\n    } else if (state.complex_transition){\r\n      state.complex_transition.forEach( transition => {\r\n        if(transition.transition === stateName){\r\n          if(newName === null){\r\n            delete transition.transition\r\n          } else {\r\n            transition.transition = newName\r\n          }\r\n        }\r\n        if(transition.condition){\r\n          if(transition.condition.condition_type === 'PriorState' && transition.condition.name === stateName){\r\n            if(newName === null) {\r\n              delete transition.condition.name\r\n            } else {\r\n              transition.condition.name = newName\r\n            }\r\n          }\r\n        }\r\n        if(transition.distributions){\r\n          transition.distributions.forEach( distribution => {\r\n            if(distribution.transition === stateName){\r\n              if(newName === null){\r\n                delete distribution.transition\r\n              } else {\r\n                distribution.transition = newName\r\n              }\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n    if(state.reason === stateName){\r\n      if(newName === null){\r\n        delete state.reason\r\n      } else {\r\n        state.reason = newName;\r\n      }\r\n    }\r\n    if(state.target_encounter === stateName){\r\n      if(newName === null){\r\n        state.target_encounter = \"\" // this is a requried field\r\n      } else {\r\n        state.target_encounter = newName;\r\n      }\r\n    }\r\n    if(state.condition_onset === stateName){\r\n      if(newName === null){\r\n        delete state.condition_onset\r\n      } else {\r\n        state.condition_onset = newName;\r\n      }\r\n    }\r\n    if(state.allergy_onset === stateName){\r\n      if(newName === null){\r\n        delete state.allergy_onset\r\n      } else {\r\n        state.allergy_onset = newName;\r\n      }\r\n    }\r\n    if(state.medication_order === stateName){\r\n      if(newName === null){\r\n        delete state.medication_order\r\n      } else {\r\n        state.medication_order = newName;\r\n      }\r\n    }\r\n    if(state.careplan === stateName){\r\n      if(newName === null){\r\n        delete state.careplan;\r\n      } else {\r\n        state.careplan = newName;\r\n      }\r\n    }\r\n    if(state.allow && state.allow.condition_type === 'PriorState' && state.allow.name === stateName){\r\n      if(newName === null){\r\n        delete state.allow.name\r\n      } else {\r\n        state.allow.name = newName;\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nconst saveHistory = (state) => {\r\n  let selectedStateKey = state.selectedStateKey;\r\n  let selectedStateTransition = state.selectedStateTransition;\r\n\r\n  if(state.historyIndex > 0){\r\n    while(state.historyIndex > 0 && state.history.length > 0){\r\n      state.historyIndex--;\r\n      state.history.shift()\r\n    }\r\n\r\n    state.historyIndex = 0; // should always be 0 anyhow\r\n\r\n  }\r\n\r\n  state.history = [{selectedStateKey, selectedStateTransition, module: _.cloneDeep(state.modules[state.selectedModuleKey])}].concat(state.history);\r\n\r\n  state.history.splice(20) // only save the last 20 changes\r\n}\r\n\r\n// When nodes are cloned, loopback transitions point to node being cloned, instead of new copy\r\nconst renameLoopbackTransition = (state, newStateName, oldStateName) => {\r\n  if(state.direct_transition === oldStateName){\r\n    state.direct_transition = newStateName;\r\n  } else if (state.distributed_transition){\r\n    state.distributed_transition.forEach( transition => {\r\n      if(transition.transition === oldStateName){\r\n        transition.transition = newStateName\r\n      }\r\n    })\r\n  } else if (state.conditional_transition){\r\n    state.conditional_transition.forEach( transition => {\r\n      if(transition.transition === oldStateName){\r\n        transition.transition = newStateName\r\n      }\r\n    })\r\n  } else if (state.complex_transition){\r\n    state.complex_transition.forEach( transition => {\r\n      if(transition.transition === oldStateName){\r\n        transition.transition = newStateName\r\n      }\r\n      if(transition.distributions){\r\n        transition.distributions.forEach( distribution => {\r\n          if(distribution.transition === oldStateName){\r\n            distribution.transition = newStateName\r\n          }\r\n        })\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n","import _ from 'lodash'\r\nimport { getTemplate } from '../templates/Templates'\r\n\r\nconst initialState = {\r\n  libraryModuleCodes: {}, // list types of nodes\r\n  warnings: [],\r\n  libraryRelatedModules: {},\r\n  relatedModules: [],\r\n  attributes: []\r\n};\r\n\r\nconst attributes = module => {\r\n  const attributes = [];\r\n  Object.keys(module.states).forEach(stateName => {\r\n    let state = module.states[stateName];\r\n    \r\n     if(state.type === 'SetAttribute'){\r\n       attributes.push({attribute: state.attribute, stateName: state.name, stateType: state.type});\r\n     } else if(state.assign_to_attribute){\r\n       attributes.push({attribute: state.assign_to_attribute, stateName: state.name, stateType: state.type});\r\n     }\r\n  });\r\n\r\n  return attributes.sort(function(a, b){\r\n    var x = a.attribute.toLowerCase();\r\n    var y = b.attribute.toLowerCase();\r\n    if (x < y) {return -1;}\r\n    if (x > y) {return 1;}\r\n    return 0;\r\n  })\r\n}\r\n\r\nconst templateCodes = {};\r\nObject.keys(getTemplate('Type').Code).map(c => getTemplate('Type').Code[c]).forEach(code => {\r\n  templateCodes[`${code.code}-${code.system}-${code.display}`] = true;\r\n});\r\n\r\nconst placeholderCodeWarnings = (module) => {\r\n  const warnings = [];\r\n  Object.keys(module.states).forEach(stateName => {\r\n    let state = module.states[stateName];\r\n    state.codes && state.codes.forEach(code => {\r\n      if(templateCodes[`${code.code}-${code.system}-${code.display}`]){\r\n        warnings.push({stateName: stateName, message: 'Code uses an invalid template code: ' + code.system + '[' + code.code + ']'});\r\n      }\r\n    });\r\n\r\n    switch(state.type){\r\n      case 'MultiObservation':\r\n      case 'DiagnosticReport':\r\n        if(state.observations){\r\n          state.observations.forEach(o => {\r\n          o.codes && o.codes.forEach(code => {\r\n            if(templateCodes[`${code.code}-${code.system}-${code.display}`]){\r\n              warnings.push({stateName: stateName, message: 'Code in observation uses an invalid template code: ' + code.system + '[' + code.code + ']'});\r\n            }\r\n          })\r\n        })}\r\n\r\n        break; \r\n      case 'ImagingStudy':\r\n        if(state.procedure_code){\r\n            if(templateCodes[`${state.procedure_code.code}-${state.procedure_code.system}-${state.procedure_code.display}`]){\r\n              warnings.push({stateName: stateName, message: 'Code in procedure code uses an invalid template code: ' + state.procedure_code.system + '[' + state.procedure_code.code + ']'});\r\n            }\r\n        }\r\n        if(state.series ){\r\n          state.series.forEach(series => {\r\n            if(series.body_site){\r\n              if(templateCodes[`${series.body_site.code}-${series.body_site.system}-${series.body_site.display}`]){\r\n                warnings.push({stateName: stateName, message: 'Code in imaging series uses an invalid template code: ' + series.body_site.system + '[' + series.body_site.code + ']'});\r\n              }\r\n            }\r\n            if(series.modality){\r\n              if(templateCodes[`${series.modality.code}-${series.modality.system}-${series.modality.display}`]){\r\n                warnings.push({stateName: stateName, message: 'Code in imaging series uses an invalid template code: ' + series.modality.system + '[' + series.modality.code + ']'});\r\n              }\r\n            }\r\n            if(series.instances){\r\n              series.instances.forEach(instance => {\r\n                if(instance.sop_class){\r\n                  if(templateCodes[`${instance.sop_class.code}-${instance.sop_class.system}-${instance.sop_class.display}`]){\r\n                    warnings.push({stateName: stateName, message: 'Code in imaging series uses an invalid template code: ' + instance.sop_class.system + '[' + instance.sop_class.code + ']'});\r\n                  }\r\n                }\r\n              })\r\n            }\r\n\r\n          })\r\n\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n\r\n\r\n    }\r\n  })\r\n  return warnings;\r\n\r\n}\r\n\r\nconst stateCollisionWarnings = (module, globalCodes) => {\r\n  const equivalentStates = [\r\n   ['MedicationOrder', 'MedicationEnd'],\r\n   ['ConditionOnset', 'ConditionEnd'],\r\n   ['CarePlanStart', 'CarePlanEnd'],\r\n   ['AllergyOnset', 'AllergyEnd'],\r\n  ];\r\n\r\n  const isEquivalentStates = (first, second) => {\r\n    return (first === second || equivalentStates.filter(e => (e[0] === first && e[1] === second) || (e[0] === second && e[1] === first)).length > 0)\r\n  }\r\n\r\n  const checkCollision = libraryState =>  (local => !isEquivalentStates(local.state.type, libraryState.type) && local.state.type !== 'Death' && libraryState.type !== 'Death');\r\n\r\n  const warnings = [];\r\n  Object.keys(module.states).forEach(stateName => {\r\n    let state = module.states[stateName];\r\n    state.codes && state.codes.forEach(code => {\r\n\r\n      if(globalCodes[code.code]){\r\n        let collisions = globalCodes[code.code].filter(checkCollision(state));\r\n        if(collisions.length > 0){\r\n          warnings.push({stateName, message: 'Code collision with state ' + collisions[0].stateName + ' in module ' + collisions[0].moduleKey + '. '});\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n  return warnings;\r\n\r\n}\r\n\r\nconst orphanStateWarnings = (module) => {\r\n  const warnings = [];\r\n\r\n  const visitedStateCheck = Object.keys(module.states).reduce( (acc, value) => {acc[value] = false; return acc}, {})\r\n\r\n  const visitNext = [];\r\n\r\n  if(module.states['Initial']){\r\n    visitNext.push('Initial');\r\n  };\r\n\r\n  while(visitNext.length > 0){\r\n    let nextStateKey = visitNext.pop();\r\n    let nextState = module.states[nextStateKey];\r\n    visitedStateCheck[nextStateKey] = true;\r\n\r\n    if(nextState.direct_transition){\r\n      if(!module.states[nextState.direct_transition]){\r\n        warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + nextState.direct_transition});\r\n      } else {\r\n        if(!visitedStateCheck[nextState.direct_transition]){\r\n          visitNext.push(nextState.direct_transition);\r\n        }\r\n      }\r\n    } else if(nextState.distributed_transition){\r\n      nextState.distributed_transition.forEach(transition => {\r\n        if(!module.states[transition.transition]){\r\n          warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + transition.transition});\r\n        } else {\r\n          if(!visitedStateCheck[transition.transition]){\r\n            visitNext.push(transition.transition);\r\n          }\r\n        }\r\n      });\r\n    } else if(nextState.conditional_transition){\r\n      nextState.conditional_transition.forEach(transition => {\r\n        if(!module.states[transition.transition]){\r\n          warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + transition.transition});\r\n        } else {\r\n          if(!visitedStateCheck[transition.transition]){\r\n            visitNext.push(transition.transition);\r\n          }\r\n        }\r\n      });\r\n    } else if (nextState.complex_transition){\r\n      nextState.complex_transition.forEach( transition => {\r\n        if(transition.transition){\r\n          if(!module.states[transition.transition]){\r\n            warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + transition.transition});\r\n          } else {\r\n            if(!visitedStateCheck[transition.transition]){\r\n              visitNext.push(transition.transition);\r\n            }\r\n          }\r\n        }\r\n        if(transition.distributions){\r\n          transition.distributions.forEach( distribution => {\r\n            if(!module.states[distribution.transition]){\r\n              warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + distribution.transition});\r\n            } else {\r\n              if(!visitedStateCheck[distribution.transition]){\r\n                visitNext.push(distribution.transition);\r\n              }\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  let notVisitedWarnings = Object.keys(visitedStateCheck).map(s => {return {state: s, visited: visitedStateCheck[s]}}).filter(v => !v.visited).map(v => {\r\n    return {\r\n      stateName: v.state,\r\n      message: 'State cannot be reached.'\r\n    };\r\n  });\r\n\r\n  return [...warnings, ...notVisitedWarnings];\r\n\r\n}\r\n\r\nconst libraryModuleCodes = (modules) => {\r\n    const libraryModuleCodes = {};\r\n\r\n    Object.keys(modules).forEach(moduleKey => {\r\n      const module = modules[moduleKey];\r\n      Object.keys(module.states).forEach(stateName => {\r\n        const moduleState = module.states[stateName];\r\n        moduleState.codes && moduleState.codes.forEach(code => {\r\n          if(!libraryModuleCodes[code.code]){\r\n            libraryModuleCodes[code.code] = []\r\n          }\r\n          libraryModuleCodes[code.code].push({...code, moduleKey, stateName, state: moduleState});\r\n        });\r\n      });\r\n    });\r\n    return libraryModuleCodes;\r\n}\r\n\r\nconst libraryRelatedModules = (modules) => {\r\n  const libraryRelatedModules = {};\r\n\r\n  Object.keys(modules).forEach(moduleKey => {\r\n    const module = modules[moduleKey];\r\n    Object.keys(module.states).forEach(stateName => {\r\n      const moduleState = module.states[stateName];\r\n      if(moduleState.type === 'CallSubmodule'){\r\n        libraryRelatedModules[moduleKey] = libraryRelatedModules[stateName] || []\r\n        libraryRelatedModules[moduleKey].push({type: 'submodule', moduleKey: moduleState.submodule, stateName})\r\n\r\n        libraryRelatedModules[moduleState.submodule] = libraryRelatedModules[moduleState.submodule] || []\r\n        libraryRelatedModules[moduleState.submodule].push({type: 'submodule', moduleKey, stateName})\r\n      }\r\n    });\r\n  });\r\n  return libraryRelatedModules;\r\n\r\n}\r\n\r\nconst relatedBySubmodule = (moduleKey, module, relatedMap) => {\r\n  let related = [];\r\n\r\n  if(relatedMap[moduleKey]){\r\n    related = _.cloneDeep(relatedMap[moduleKey]);\r\n  }\r\n  \r\n  Object.keys(module.states).forEach(stateName => {\r\n    const moduleState = module.states[stateName];\r\n     if(moduleState.type === 'CallSubmodule'){\r\n       related.push({type: 'submodule', module: moduleState.submodule, stateName});\r\n     }\r\n  });\r\n\r\n  return related;\r\n}\r\n\r\nexport default (state = initialState, action) => {\r\n  let newState = {...state};\r\n  switch (action.type) {\r\n    case 'ANALYZE':\r\n\r\n      newState.warnings = [...stateCollisionWarnings(action.data.module, newState.libraryModuleCodes),\r\n                           ...orphanStateWarnings(action.data.module),\r\n                           ...placeholderCodeWarnings(action.data.module)];\r\n\r\n      newState.relatedModules = [...relatedBySubmodule(action.data.moduleKey, action.data.module, newState.libraryRelatedModules)];\r\n\r\n      newState.attributes = attributes(action.data.module);\r\n\r\n      return newState;\r\n\r\n    case 'LOAD_LIBRARY':\r\n\r\n      newState.libraryModuleCodes = libraryModuleCodes(action.data);\r\n      newState.libraryRelatedModules = libraryRelatedModules(action.data);\r\n\r\n      return newState\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { createBrowserHistory } from 'history';\r\nimport { applyMiddleware, compose, createStore } from 'redux';\r\nimport { routerMiddleware } from 'connected-react-router';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport createRootReducer from './reducers';\r\n\r\nconst initialState = {}\r\nconst enhancers = [];\r\nconst middleware = [];\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n  const devToolsExtension = window.devToolsExtension\r\n\r\n  if (typeof devToolsExtension === 'function') {\r\n    enhancers.push(devToolsExtension())\r\n  }\r\n}\r\n\r\nexport const history = createBrowserHistory({basename: '/module-builder'})\r\n\r\nconst createAppStore = (history) => {\r\n  middleware.push(routerMiddleware(history))\r\n  middleware.push(thunk)\r\n  const composedEnhancers = compose(\r\n    applyMiddleware(...middleware),\r\n    ...enhancers\r\n  )\r\n\r\n  const store = createStore(\r\n    createRootReducer(history), // root reducer with router state\r\n    initialState,\r\n    composedEnhancers\r\n  )\r\n  return store;\r\n}\r\n\r\nexport default createAppStore;\r\n","import { combineReducers } from 'redux';\r\nimport { connectRouter } from 'connected-react-router'\r\n\r\nimport library from './library';\r\nimport editor from './editor';\r\nimport analysis from './analysis';\r\n\r\nexport default (history) => combineReducers({\r\n  router : connectRouter(history),\r\n  library,\r\n  editor,\r\n  analysis\r\n});\r\n","// @flow\r\n\r\nimport React, { Component } from 'react';\r\nimport { RIEInput } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { Code as CodeType } from '../../types/Code';\r\nimport { getTemplate } from '../../templates/Templates';\r\n\r\ntype Props = {\r\n  code: CodeType,\r\n  system: string,\r\n  onChange: any\r\n}\r\n\r\nexport class Code extends Component<Props> {\r\n\r\n  render() {\r\n    let code = this.props.code;\r\n    let system = this.props.system;\r\n    return (\r\n      <div>\r\n        System: {system}\r\n        <br />\r\n        Code: <RIEInput className='editable-text' value={code.code} propName=\"code\" change={this.props.onChange('code')} />\r\n        <br />\r\n        Display: <RIEInput className='editable-text' value={code.display} propName=\"display\" change={this.props.onChange('display')} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\ntype CodesProps = {\r\n  codes: CodeType[],\r\n  system: string,\r\n  onChange: any\r\n}\r\nexport class Codes extends Component<CodesProps> {\r\n  render() {\r\n\r\n    if(!this.props.codes){\r\n      return null;\r\n    }\r\n    let system = this.props.system;\r\n    let templates = {\r\n      \"SNOMED-CT\": getTemplate('Type.Code.Snomed'),\r\n      \"LOINC\": getTemplate('Type.Code.Loinc'),\r\n      \"RxNorm\": getTemplate('Type.Code.RxNorm'),\r\n      \"NUBC\": getTemplate('Type.Code.Nubc'),\r\n      \"DICOM-DCM\": getTemplate('Type.Code.DicomDCM'),\r\n      \"DICOM-SOP\": getTemplate('Type.Code.DicomSOP')\r\n    };\r\n    return (\r\n      <div>\r\n        {this.props.codes.map((code, i) => {\r\n          return (\r\n            <div className='section' key={i}>\r\n              <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n              <Code onChange={this.props.onChange(i)} code={code} system={system}/>\r\n            </div>\r\n          )\r\n        })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.codes.length}]`)({val: {id: _.cloneDeep(templates[system])}})}>+</a>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIEInput } from 'riek';\r\n\r\ntype Props = {\r\n  label: string,\r\n  value: string,\r\n  onChange: any\r\n};\r\n\r\nexport class StringEditor extends Component<Props> {\r\n  render() {\r\n    let value = this.props.value;\r\n    return (\r\n      <div>\r\n        {this.props.label}: <RIEInput className='editable-text' value={value} propName=\"value\" change={this.props.onChange} />\r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\ntype StringsProps = {\r\n  label: string,\r\n  values: string[],\r\n  onChange: any\r\n};\r\nexport class StringsEditor extends Component<StringsProps> {\r\n  render() {\r\n    if(!this.props.values){\r\n      return null;\r\n    }\r\n    return (\r\n      <div>\r\n        {this.props.values.map((value, i) => {\r\n          return (\r\n            <div className='section' key={i}>\r\n              <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n              <StringEditor onChange={this.props.onChange(i)} value={value} label={this.props.label} />\r\n            </div>\r\n          )\r\n        })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.values.length}]`)({val: {id: \"text\"}})}>+</a>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// @flow\r\n\r\nimport React, { Component } from 'react';\r\nimport { RIESelect, RIEInput, RIENumber } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { Goal as GoalType } from '../../types/Attributes';\r\nimport { Codes } from './Code';\r\nimport { StringsEditor } from './String';\r\nimport { getTemplate } from '../../templates/Templates';\r\n\r\ntype Props = {\r\n  goal: GoalType,\r\n  onChange: any\r\n}\r\n\r\nexport class Goal extends Component<Props> {\r\n\r\n  render() {\r\n    let goal = this.props.goal;\r\n    return (\r\n      <div>\r\n        {this.renderObservation()}\r\n        {this.renderText()}\r\n        <div className='section'>\r\n          Addresses\r\n          <br />\r\n          <StringsEditor values={goal.addresses} label={\"Address\"} onChange={this.props.onChange('addresses')} />\r\n          <br />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderObservation() {\r\n    let goal = this.props.goal;\r\n    let options = [\r\n      {id: '==' , text: '==' },\r\n      {id: '!=' , text: '!=' },\r\n      {id: \"<\" , text: \"<\" },\r\n      {id: \"<=\" , text: \"<=\" },\r\n      {id: \">\" , text: \">\" },\r\n      {id: \">=\", text: \">=\"},\r\n      {id: \"is nil\", text: \"is nil\"},\r\n      {id: \"is not nil\", text: \"is not nil\"}\r\n    ];\r\n    if (!goal.observation) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('observation')({val: {id: getTemplate('Attribute.Observation')}})}>Add Observation</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let goalObservationValue = (\r\n        <div>\r\n          Goal Observation Value: <RIENumber className='editable-text' value={goal.observation.value} propName={'value'} change={this.props.onChange('observation.value')} />\r\n        </div>\r\n      );\r\n\r\n      if(goal.observation.operator === 'is nil' || goal.observation.operator === 'is not nil'){\r\n        goalObservationValue = <div/>\r\n      }\r\n      \r\n      return (\r\n        <div className='section'>\r\n          Observation\r\n          <br />\r\n          <div className='section'>\r\n            Codes\r\n            <br />\r\n            <Codes codes={goal.observation.codes} system={\"LOINC\"} onChange={this.props.onChange('observation.codes')} />\r\n            <br />\r\n          </div>\r\n          Goal Observation Operator: <RIESelect className='editable-text' value={{id: goal.observation.operator, text: goal.observation.operator}} propName={'operator'} change={this.props.onChange('observation.operator')} options={options} />\r\n          {goalObservationValue}\r\n          <br/>\r\n          <a className='editable-text' onClick={() => this.props.onChange('observation')({val: {id: null}})}>Remove Observation</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderText() {\r\n    let goal = this.props.goal;\r\n    if (!goal.text) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('text')({val: {id: \"text\"}})}>Add Text</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Goal Text: <RIEInput className='editable-text' value={goal.text} propName={'text'}  change={this.props.onChange('text')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('text')({val: {id: null}})}>(remove)</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\ntype GoalsProps = {\r\n  goals: GoalType[],\r\n  onChange: any\r\n}\r\nexport class Goals extends Component<GoalsProps> {\r\n  render() {\r\n\r\n    if(!this.props.goals){\r\n      return null;\r\n    }\r\n    return (\r\n      <div>\r\n        {this.props.goals.map((goal, i) => {\r\n          return (\r\n            <div className='section' key={i}>\r\n              <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n              <Goal onChange={this.props.onChange(i)} goal={goal} />\r\n            </div>\r\n          )\r\n        })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.goals.length}]`)({val: {id: getTemplate('Attribute.Goal')}})}>+</a>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// @flow\r\n\r\nimport React, { Component } from 'react';\r\nimport { RIEInput } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { Instance as InstanceType, Series as SeriesType } from '../../types/Attributes';\r\n\r\nimport { Code } from './Code';\r\nimport { getTemplate } from '../../templates/Templates';\r\n\r\ntype InstanceProps = {\r\n  title: string,\r\n  sop_class: CodeType,\r\n  onChange: any\r\n}\r\n\r\nexport class Instance extends Component<InstanceProps> {\r\n\r\n  render() {\r\n    let title = this.props.title;\r\n    let sop_class = this.props.sop_class;\r\n    return (\r\n      <div>\r\n        Title: <RIEInput className='editable-text' value={title} propName=\"title\" change={this.props.onChange('title')} />\r\n        <br />\r\n        <br />\r\n        <b>SOP Class:</b>\r\n        <br />\r\n        <Code code={sop_class} system={\"DICOM-SOP\"} onChange={this.props.onChange('sop_class')} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\ntype InstanceListProps = {\r\n  instances: InstanceType[],\r\n  onChange: any\r\n}\r\n\r\nexport class InstanceList extends Component<InstanceListProps> {\r\n\r\n  render() {\r\n    if (!this.props.instances) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div>\r\n        {this.props.instances.map((instance, i) => {\r\n          return (\r\n            <div className='section' key={i}>\r\n              <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n              <Instance onChange={this.props.onChange(i)} title={instance.title} sop_class={instance.sop_class}/>\r\n            </div>\r\n          )\r\n        })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.instances.length}]`)({val: {id: getTemplate('Attribute.ImagingStudy.Instance')}})}>+</a>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\ntype SeriesProps = {\r\n  body_site: CodeType,\r\n  modality: CodeType,\r\n  instances: InstanceType[],\r\n  onChange: any\r\n}\r\n\r\nexport class Series extends Component<SeriesProps> {\r\n\r\n  render() {\r\n    let body_site = this.props.body_site;\r\n    let modality = this.props.modality;\r\n    let instances = this.props.instances;\r\n    return (\r\n      <div className='section'>\r\n        <b>Body Site:</b>\r\n        <br />\r\n        <Code code={body_site} system={\"SNOMED-CT\"} onChange={this.props.onChange('body_site')} />\r\n        <br/>\r\n        <b>Modality:</b>\r\n        <br />\r\n        <Code code={modality} system={\"DICOM-DCM\"} onChange={this.props.onChange('modality')} />\r\n        <br />\r\n        <b>Instances:</b>\r\n        <InstanceList instances={instances} onChange={this.props.onChange('instances')} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\n\r\ntype SeriesListProps = {\r\n  series: SeriesType[],\r\n  onChange: any\r\n}\r\n\r\nexport class SeriesList extends Component<SeriesListProps> {\r\n\r\n  render() {\r\n    if (!this.props.series) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div>\r\n        {this.props.series.map((series, i) => {\r\n          return (\r\n            <div className='section' key={i}>\r\n                <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n                <br />\r\n                <Series onChange={this.props.onChange(i)} body_site={series.body_site} modality={series.modality} instances={series.instances} />\r\n            </div>\r\n          )\r\n        })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.series.length}]`)({val: {id: getTemplate('Attribute.ImagingStudy.Series')}})}>+</a>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect, RIEInput, RIENumber } from 'riek';\r\nimport _ from 'lodash';\r\nimport type { Conditional, GenderConditional , AgeConditional , DateConditional , SocioeconomicStatusConditional , RaceConditional , SymptomConditional , ObservationConditional , VitalSignConditional , ActiveConditionConditional , ActiveMedicationConditional , ActiveCarePlanConditional , PriorStateConditional , AttributeConditional , AndConditional , OrConditional , AtLeastConditional , AtMostConditional , NotConditional } from '../../types/Conditional';\r\nimport type { State } from '../../types/State';\r\nimport { Codes } from './Code';\r\nimport { Code } from './Code';\r\nimport { getTemplate } from '../../templates/Templates';\r\n\r\ntype Props = {\r\n  conditional: Conditional,\r\n  options: State[],\r\n  onChange: any\r\n}\r\n\r\nconst unitOfTimeOptions = [\r\n  {id: 'years', text: 'years'},\r\n  {id: 'months', text: 'months'},\r\n  {id: 'weeks', text: 'weeks'},\r\n  {id: 'days', text: 'days'},\r\n  {id: 'hours', text: 'hours'},\r\n  {id: 'minutes', text: 'minutes'},\r\n  {id: 'seconds', text: 'seconds'}\r\n];\r\n\r\nconst unitOfAgeOptions = [\r\n  {id: 'years', text: 'years'},\r\n  {id: 'months', text: 'months'},\r\n  {id: 'weeks', text: 'weeks'},\r\n  {id: 'days', text: 'days'},\r\n  {id: 'hours', text: 'hours'},\r\n  {id: 'minutes', text: 'minutes'},\r\n  {id: 'seconds', text: 'seconds'}\r\n];\r\n\r\nclass ConditionalEditor extends Component<Props> {\r\n\r\n  renderConditionalType() {\r\n    switch (this.props.conditional.condition_type) {\r\n      case \"Gender\":\r\n        return <Gender {...this.props} />\r\n      case \"Age\":\r\n        return <Age {...this.props} />\r\n      case \"Date\":\r\n        return <Date {...this.props} />\r\n      case \"Socioeconomic Status\":\r\n        return <SocioeconomicStatus {...this.props} />\r\n      case \"Race\":\r\n        return <Race {...this.props} />\r\n      case \"Symptom\":\r\n        return <Symptom {...this.props} />\r\n      case \"Observation\":\r\n        return <Observation {...this.props} />\r\n      case \"Vital Sign\":\r\n        return <VitalSign {...this.props} />\r\n      case \"Active Condition\":\r\n        return <ActiveCondition {...this.props} />\r\n      case \"Active Medication\":\r\n        return <ActiveMedication {...this.props} />\r\n      case \"Active CarePlan\":\r\n        return <ActiveCarePlan {...this.props} />\r\n      case \"PriorState\":\r\n        return <PriorState {...this.props} />\r\n      case \"Attribute\":\r\n        return <Attribute {...this.props} />\r\n      case \"And\":\r\n        return <And {...this.props} />\r\n      case \"Or\":\r\n        return <Or {...this.props} />\r\n      case \"At Least\":\r\n        return <AtLeast {...this.props} />\r\n      case \"At Most\":\r\n        return <AtMost {...this.props} />\r\n      case \"Not\":\r\n        return <Not {...this.props} />\r\n      default:\r\n        return this.props.conditional.condition_type\r\n\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.conditional) {\r\n      return null;\r\n    }\r\n    let template = getTemplate('Type.Condition');\r\n    let options = Object.keys(template).sort().map((k) => {return {id: k, text: k}});\r\n    return (\r\n      <div>\r\n        Condition Type: <RIESelect className='editable-text' propName='condition' value={{id: this.props.conditional.condition_type, text: this.props.conditional.condition_type}} change={(val) => this.props.onChange({condition:{id: template[val.condition.id]}})} options={options} />\r\n        <br/>\r\n        {this.renderConditionalType()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass Gender extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): GenderConditional);\r\n    return (\r\n      <label> Gender:\r\n        <RIESelect className='editable-text'\r\n          propName='gender'\r\n          value={{id: conditional.gender, text: conditional.gender}}\r\n          change={this.props.onChange('gender')}\r\n          options={[{id:'M', text: 'M'}, {id:'F', text: 'F'}]}\r\n        />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Age extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): AgeConditional);\r\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}];\r\n    return (\r\n      <label> Age:\r\n      <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n      <RIENumber className='editable-text' value={conditional.quantity} propName='quantity' change={this.props.onChange('quantity')} />\r\n      <RIESelect className='editable-text' value={{id: conditional.unit, text: conditional.unit}} propName=\"unit\" change={this.props.onChange('unit')} options={unitOfAgeOptions} />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Date extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): DateConditional);\r\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}];\r\n    return (\r\n      <label>\r\n      <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n      {this.renderType()}\r\n      {this.renderWarning()}\r\n      </label>\r\n    );\r\n  }\r\n\r\n  renderType() {\r\n    let conditional = ((this.props.conditional: any): DateConditional);\r\n    \r\n    if(conditional.month) {\r\n      let month = <RIENumber className='editable-text' value={conditional.month} propName='month' change={this.props.onChange('month')} />\r\n      return (\r\n        <div>\r\n          Month: \r\n          {month}\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('year')({val: {id: getTemplate('Type.Date.Year')}}); this.props.onChange('month')({val: {id: null}}); this.props.onChange('date')({val: {id: null}})}}>Change to Year</a>\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('date.year')({val: {id: getTemplate('Type.Date.Year')}}); this.props.onChange('date.month')({val: {id: getTemplate('Type.Date.Month')}}); this.props.onChange('date.day')({val: {id: getTemplate('Type.Date.Day')}}); this.props.onChange('date.hour')({val: {id: getTemplate('Type.Date.Hour')}}); this.props.onChange('date.minute')({val: {id: getTemplate('Type.Date.Minute')}}); this.props.onChange('date.second')({val: {id: getTemplate('Type.Date.Second')}}); this.props.onChange('date.millisecond')({val: {id: getTemplate('Type.Date.Millisecond')}}); this.props.onChange('month')({val: {id: null}}); this.props.onChange('year')({val: {id: null}})}}>Change to Date</a>\r\n        </div>  \r\n      );\r\n    } else if (conditional.date) {\r\n      let yearInput = <RIENumber className='editable-text' value={conditional.date.year} propName='date.year' change={this.props.onChange('date.year')} />\r\n      let monthInput = <RIENumber className='editable-text' value={conditional.date.month} propName='date.month' change={this.props.onChange('date.month')} />\r\n      let dayInput = <RIENumber className='editable-text' value={conditional.date.day} propName='date.day' change={this.props.onChange('date.day')} />\r\n      let hourInput = <RIENumber className='editable-text' value={conditional.date.hour} propName='date.hour' change={this.props.onChange('date.hour')} />\r\n      let minuteInput = <RIENumber className='editable-text' value={conditional.date.minute} propName='date.minute' change={this.props.onChange('date.minute')} />\r\n      let secondInput = <RIENumber className='editable-text' value={conditional.date.second} propName='date.second' change={this.props.onChange('date.second')} />\r\n      let millisecondInput = <RIENumber className='editable-text' value={conditional.date.millisecond} propName='date.millisecond' change={this.props.onChange('date.millisecond')} />\r\n      \r\n      return (\r\n        <div>\r\n          Date:\r\n          <br />\r\n          {yearInput}/{monthInput}/{dayInput} {hourInput}:{minuteInput}:{secondInput}.{millisecondInput}\r\n          <br /> \r\n          (yyyy/MM/dd HH:mm:ss.SSS)\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('year')({val: {id: getTemplate('Type.Date.Year')}}); this.props.onChange('month')({val: {id: null}}); this.props.onChange('date')({val: {id: null}})}}>Change to Year</a>\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('month')({val: {id: getTemplate('Type.Date.Month')}}); this.props.onChange('date')({val: {id: null}}); this.props.onChange('year')({val: {id: null}})}}>Change to Month</a>\r\n        </div>  \r\n      );\r\n      \r\n    } else { //year\r\n      let year = <RIENumber className='editable-text' value={conditional.year} propName='year' change={this.props.onChange('year')} />\r\n      return (\r\n        <div>\r\n          Year: \r\n          {year}\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('month')({val: {id: getTemplate('Type.Date.Month')}}); this.props.onChange('year')({val: {id: null}}); this.props.onChange('date')({val: {id: null}})}}>Change to Month</a>\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('date.year')({val: {id: getTemplate('Type.Date.Year')}}); this.props.onChange('date.month')({val: {id: getTemplate('Type.Date.Month')}}); this.props.onChange('date.day')({val: {id: getTemplate('Type.Date.Day')}}); this.props.onChange('date.hour')({val: {id: getTemplate('Type.Date.Hour')}}); this.props.onChange('date.minute')({val: {id: getTemplate('Type.Date.Minute')}}); this.props.onChange('date.second')({val: {id: getTemplate('Type.Date.Second')}}); this.props.onChange('date.millisecond')({val: {id: getTemplate('Type.Date.Millisecond')}}); this.props.onChange('year')({val: {id: null}}); this.props.onChange('month')({val: {id: null}})}}>Change to Date</a>\r\n        </div>  \r\n      );\r\n    }\r\n  }\r\n\r\n  renderWarning(){\r\n    if (this.props.conditional.year < 1) {\r\n      return (\r\n        <label className='warning'>Invalid Year.</label>\r\n      );\r\n    } else if (this.props.conditional.month < 1 || this.props.conditional.month > 12) {\r\n      return (\r\n        <label className='warning'>Invalid Month. Must be between 1 and 12.</label>\r\n      );\r\n    } else if (this.props.conditional.date) {\r\n      if (this.props.conditional.date.year < 1) {\r\n        return (\r\n          <label className='warning'>Invalid Year</label>\r\n        );\r\n      } else if (this.props.conditional.date.month < 1 || this.props.conditional.date.month > 12) {\r\n        return (\r\n          <label className='warning'>Invalid Month. Must be between 1 and 12.</label>\r\n        );\r\n      } else if (this.props.conditional.date.day < 1 || this.props.conditional.date.day > 31) {\r\n        return (\r\n          <label className='warning'>Invalid Day. Must at least 1 and never greater than 31.</label>\r\n        );\r\n      } else if (this.props.conditional.date.hour < 0 || this.props.conditional.date.hour > 24) {\r\n        return (\r\n          <label className='warning'>Invalid Hour. Must be between 0 and 24.</label>\r\n        );\r\n      } else if (this.props.conditional.date.minute < 0 || this.props.conditional.date.minute > 60) {\r\n        return (\r\n          <label className='warning'>Invalid Minute. Must be between 0 and 60.</label>\r\n        );\r\n      } else if (this.props.conditional.date.second < 0 || this.props.conditional.date.second > 60) {\r\n        return (\r\n          <label className='warning'>Invalid Second. Must be between 0 and 60.</label>\r\n        );\r\n      } else if (this.props.conditional.date.millisecond < 0 || this.props.conditional.date.millisecond > 999) {\r\n        return (\r\n          <label className='warning'>Invalid Millisecond. Must be between 0 and 999.</label>\r\n        );\r\n      } else {\r\n        return null;\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nclass SocioeconomicStatus extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): SocioeconomicStatusConditional);\r\n    let options = [\r\n      {id: 'Low', text: 'Low'},\r\n      {id: 'Middle', text: 'Middle'},\r\n      {id: 'High', text: 'High'}\r\n    ];\r\n    return (\r\n      <label> Socioeconomic Status:\r\n        <RIESelect className='editable-text' value={{id: conditional.category, text: conditional.category}} propName=\"category\" change={this.props.onChange('category')} options={options} />\r\n      </label>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nclass Race extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): RaceConditional);\r\n    let options = [\r\n      {id: \"White\", text: \"White\"},\r\n      {id: \"Native\", text: \"Native\"},\r\n      {id: \"Hispanic\", text: \"Hispanic\"},\r\n      {id: \"Black\", text: \"Black\"},\r\n      {id: \"Asian\", text: \"Asian\"},\r\n      {id: \"Other\", text: \"Other\"}\r\n    ];\r\n    return (\r\n      <label> Race:\r\n        <RIESelect className='editable-text' value={{id: conditional.race, text: conditional.race}} propName=\"race\" change={this.props.onChange('race')} options={options} />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Symptom extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): SymptomConditional);\r\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}];\r\n\r\n    return (\r\n      <label> Symptom:\r\n      <RIEInput className='editable-text' value={conditional.symptom} propName=\"symptom\" change={this.props.onChange('symptom')} />\r\n      <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n      <RIENumber className='editable-text' value={conditional.value} propName='value' change={this.props.onChange('value')} />\r\n\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Observation extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): ObservationConditional);\r\n    let options = [];\r\n    if (conditional.value_code) {\r\n      options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"is nil\", text: \"is nil\"}, {id: \"is not nil\", text: \"is not nil\"}];\r\n    } else {\r\n      options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}, {id: \"is nil\", text: \"is nil\"}, {id: \"is not nil\", text: \"is not nil\"}];\r\n    }\r\n\r\n    return (\r\n      <label> Observation:\r\n        <Codes system={getTemplate('Type.Code.Loinc.system')} codes={conditional.codes} onChange={this.props.onChange('codes')} />\r\n        <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n        {this.renderValueOrCodeValue()}\r\n      </label>\r\n    );\r\n  }\r\n\r\n  renderValueOrCodeValue() { // renders numerical or code value\r\n    let conditional = ((this.props.conditional: any): ObservationConditional);\r\n    let value_code = <Code className='editable-text' system={getTemplate('Type.Code.Snomed.display')} code={conditional.value_code} onChange={this.props.onChange('value_code')} />\r\n    let value = conditional.value;\r\n    if(typeof value === 'boolean'){\r\n      value = String(value);\r\n    }\r\n    let valueInput = <RIEInput className='editable-text' value={value} propName='value' change={this.props.onChange('value')} />\r\n    if (conditional.operator !== 'is nil' && conditional.operator !== 'is not nil' && conditional.operator.id !== 'is nil' && conditional.operator.id !== 'is not nil'){\r\n      if (conditional.value_code) { \r\n        return (\r\n          <div>\r\n            Value Code:\r\n            <div className='section'>\r\n            {value_code}\r\n            </div>\r\n            <a className='editable-text' onClick={() => {this.props.onChange('value')({val: {id: \"0\"}}); this.props.onChange('value_code')({val: {id: null}})}}>Change to Numeric Value</a>\r\n          </div>\r\n        );  \r\n      } else { \r\n        return (\r\n          <div>\r\n            Value:\r\n            {valueInput}\r\n            <br />\r\n            <a className='editable-text' onClick={() => {this.props.onChange('value_code')({val: {id: getTemplate('Type.Code.Snomed')}}); this.props.onChange('value')({val: {id: null}})}}>Change to Value Code</a>\r\n            <br />\r\n          </div>\r\n        );\r\n      }  \r\n    } else {\r\n      return (\r\n        <div>\r\n          No value needed for '{conditional.operator}'\r\n        </div>\r\n      )\r\n    }\r\n  }  \r\n}\r\n\r\nclass VitalSign extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): VitalSignConditional);\r\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}];\r\n\r\n    return (\r\n      <label> Vital Sign:\r\n      <RIEInput className='editable-text' value={conditional.vital_sign} propName=\"vital_sign\" change={this.props.onChange('vital_sign')} />\r\n      <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n      <RIENumber className='editable-text' value={conditional.value} propName='value' change={this.props.onChange('value')} />\r\n\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass ActiveCondition extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): ActiveConditionConditional);\r\n\r\n    return (\r\n      <label> Active Condition:\r\n        <Codes system={getTemplate('Type.Code.Snomed.system')} codes={conditional.codes} onChange={this.props.onChange('codes')} />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass ActiveMedication extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): ActiveMedicationConditional);\r\n    return (\r\n      <label> ActiveMedication:\r\n      <Codes system={getTemplate('Type.Code.RxNorm.system')} codes={conditional.codes} onChange={this.props.onChange('codes')} />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass ActiveCarePlan extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): ActiveCarePlanConditional);\r\n    return (\r\n      <label> ActiveCarePlan:\r\n      <Codes system={getTemplate('Type.Code.Snomed.system')} codes={conditional.codes} onChange={this.props.onChange('codes')} />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass PriorState extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): PriorStateConditional);\r\n    let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n    let name = conditional.name;\r\n    return (\r\n      <label>\r\n        Prior State Name: <RIESelect className='editable-text' value={{id: name, text: name}} propName=\"name\" change={this.props.onChange('name')} options={options} />\r\n        <br />\r\n        {this.renderSince()}\r\n        <br />\r\n        {this.renderWithin()}\r\n      </label>\r\n    );\r\n  }\r\n\r\n  renderSince() {\r\n    let conditional = ((this.props.conditional: any): PriorStateConditional);\r\n    if (conditional.since == null) {\r\n      return (\r\n        <label>\r\n          <a className='editable-text' onClick={() => this.props.onChange('since')({val: {id: getTemplate('Attribute.Since')}})}>Add Since</a>\r\n        </label>\r\n      );\r\n    } else {\r\n      let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n      let since = conditional.since;\r\n      return (\r\n        <label>\r\n          Prior State Since: <RIESelect className='editable-text' value={{id: since, text: since}} propName=\"since\" change={this.props.onChange('since')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('since')({val: {id: null}})}> (remove)</a>\r\n        </label>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderWithin() {\r\n    let conditional = ((this.props.conditional: any): PriorStateConditional);\r\n    if (conditional.within == null) {\r\n      return (\r\n        <label>\r\n          <a className='editable-text' onClick={() => this.props.onChange('within')({val: {id: getTemplate('Attribute.Within')}})}>Add Within</a>\r\n          <br />\r\n        </label>\r\n      );\r\n    } else {\r\n      return (\r\n        <label>\r\n          Prior State Within Quantity: <RIENumber className='editable-text' value={conditional.within.quantity} propName=\"quantity\" change={this.props.onChange('within.quantity')} />\r\n          <br />\r\n          Prior State Within Unit: <RIESelect className='editable-text' value={{id: conditional.within.unit, text: conditional.within.unit}} propName=\"unit\" change={this.props.onChange('within.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => this.props.onChange('within')({val: {id: null}})}>Remove Within</a>\r\n        </label>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass Attribute extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): AttributeConditional);\r\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}, {id: \"is nil\", text: \"is nil\"}, {id: \"is not nil\", text: \"is not nil\"}];\r\n\r\n    let val = conditional.value;\r\n    if(typeof val === 'boolean'){\r\n      val = String(val);\r\n    }\r\n\r\n    let valueInput = <div/>\r\n\r\n    // It appears that conditional is inconsistent, sometimes values are in ids\r\n    // This should be tracked down\r\n    if(conditional.operator !== 'is nil' && conditional.operator !== 'is not nil' && conditional.operator.id !== 'is nil' && conditional.operator.id !== 'is not nil'){ \r\n      valueInput = <RIEInput className='editable-text' value={val||0} propName='value' change={this.props.onChange('value')} />\r\n    }\r\n\r\n    return (\r\n      <label>\r\n        <RIEInput className='editable-text' value={conditional.attribute} propName=\"attribute\" change={this.props.onChange('attribute')} />\r\n        <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n        {valueInput}\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass And extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): AndConditional);\r\n    return (\r\n      <label> And:\r\n        {conditional.conditions.map((cond, i) => {\r\n          return (\r\n            <div className=\"section\"  key={i}>\r\n              <ConditionalEditor {...this.props} conditional={cond} onChange={this.props.onChange(`conditions.${i}`)} />\r\n            </div>\r\n          )\r\n        })}\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Or extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): OrConditional);\r\n    return (\r\n      <label> Or:\r\n        {conditional.conditions.map((cond, i) => {\r\n          return (\r\n              <div className=\"section\" key={i}>\r\n                <ConditionalEditor {...this.props} conditional={cond} onChange={this.props.onChange(`conditions.${i}`)} />\r\n              </div>\r\n          )\r\n        })}\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass AtLeast extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): AtLeastConditional);\r\n    return (\r\n      <label> At Least\r\n        <RIENumber className='editable-text' value={conditional.minimum||0} propName='minimum' change={this.props.onChange('minimum')} />:\r\n        {conditional.conditions.map((cond, i) => {\r\n          return (\r\n            <div className=\"section\" key={i}>\r\n              <ConditionalEditor {...this.props} conditional={cond} onChange={this.props.onChange(`conditions.${i}`)} />\r\n            </div>\r\n          )\r\n        })}\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass AtMost extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): AtMostConditional);\r\n    return (\r\n      <label> At Most\r\n        <RIENumber className='editable-text' value={conditional.maximum||0} propName='maximum' change={this.props.onChange('maximum')} />:\r\n\r\n        {conditional.conditions.map((cond, i) => {\r\n          return (\r\n            <div className=\"section\" key={i}>\r\n              <ConditionalEditor {...this.props} conditional={cond} onChange={this.props.onChange(`conditions.${i}`)} />\r\n            </div>\r\n          )\r\n        })}\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Not extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): NotConditional);\r\n    return (\r\n      <label> Not:\r\n        <div className=\"section\">\r\n          <ConditionalEditor {...this.props} conditional={conditional.condition} onChange={this.props.onChange('condition')} />\r\n        </div>\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default ConditionalEditor;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect } from 'riek';\r\n\r\nimport type { DirectTransition } from '../../types/Transition';\r\nimport type { State } from '../../types/State';\r\n\r\ntype Props = {\r\n  options: State[],\r\n  transition?: DirectTransition,\r\n  onChange: any\r\n}\r\n\r\nclass DirectTransitionEditor extends Component<Props> {\r\n  render() {\r\n    let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n\r\n    return (\r\n      <label>\r\n        Transition To:\r\n        <RIESelect className='editable-text' propName='to' value={{id:this.props.transition.to, text:this.props.transition.to}} change={this.props.onChange} options={options} />\r\n      </label>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DirectTransitionEditor;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect, RIEInput, RIENumber } from 'riek';\r\nimport _ from 'lodash';\r\n\r\n\r\nimport type { DistributedTransition as DistributedTransitionType } from '../../types/Transition';\r\nimport { getTemplate } from '../../templates/Templates';\r\nimport type { State } from '../../types/State';\r\nimport './Transition.css';\r\n\r\n\r\ntype Props = {\r\n  options: State[],\r\n  transition?: DistributedTransitionType,\r\n  onChange: any\r\n}\r\n\r\nclass DistributedTransition extends Component<Props> {\r\n  render() {\r\n    let currentValue = [];\r\n    if (this.props.transition) {\r\n      currentValue = this.props.transition.transition;\r\n    }\r\n    if(!this.props.transition) {\r\n      return null;\r\n    }\r\n    let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n\r\n    return (\r\n      <label>\r\n        Distributed Transition:\r\n        {currentValue.map((t, i) => {\r\n          return <div key={i} className=\"transition-option\">\r\n            <label>To:\r\n              <RIESelect className='editable-text' propName='transition' value={{id:t.to, text:t.to}} change={this.props.onChange(`[${i}].transition`)} options={options} />\r\n            </label>\r\n            <br/>\r\n            {this.renderDistribution(t.distribution, i)}\r\n            <br/>\r\n            <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n          </div>\r\n        })}\r\n        <a className='editable-text add-button' onClick={() => this.props.onChange(`[${currentValue.length}]`)({val: {id: getTemplate('Transition.Distributed[0]')}})}>+</a>\r\n        <br/>\r\n        {this.renderWarning()}\r\n      </label>\r\n    );\r\n  }\r\n\r\n  renderDistribution(distribution: mixed, index: number) {\r\n    let sum = this.props.transition.transition.reduce( (acc, val) => acc + (typeof val.distribution === 'object' ? val.distribution.default : val.distribution),0);\r\n    let remainder = 0;\r\n    if(typeof distribution === 'object') {\r\n      remainder = 1 - (sum - distribution.default);\r\n      let remainderOption = null\r\n      if (sum != 1) {\r\n        remainderOption = <a className='editable-text' onClick={() => this.props.onChange(`[${index}].distribution.default`)({val: remainder})}>(Change to Remainder)</a>\r\n      }\r\n      return (\r\n        <label>\r\n          Attribute: <RIEInput className='editable-text' value={distribution.attribute} propName='attribute' change={this.props.onChange(`[${index}].distribution.attribute`)} />\r\n          <br />\r\n          Default Weight: <RIENumber className='editable-text' value={distribution.default} propName='default' editProps={{step: .01, min: 0, max: 1}} format={this.formatAsPercentage} validate={this.checkInRange} change={this.props.onChange(`[${index}].distribution.default`)} />\r\n          {remainderOption}\r\n          <br />\r\n          <a className='editable-text' onClick={() => this.props.onChange(`[${index}].distribution`)({val: {id: getTemplate('Attribute.UnnamedDistribution')}})}>Change to Unnamed Distribution</a>\r\n        </label>\r\n      );\r\n    } else {\r\n      remainder = 1 - (sum - distribution);\r\n      let remainderOption = null\r\n      if (sum != 1) {\r\n        remainderOption = <a className='editable-text' onClick={() => this.props.onChange(`[${index}].distribution`)({val: remainder})}>(Change to Remainder)</a>\r\n      }\r\n      return (\r\n        <label> Weight:\r\n          <RIENumber className='editable-text' value={distribution} propName='distribution' editProps={{step: .01, min: 0, max: 1}} format={this.formatAsPercentage} validate={this.checkInRange} change={this.props.onChange(`[${index}].distribution`)} />\r\n          {remainderOption}\r\n          <br />\r\n          <a className='editable-text' onClick={() => this.props.onChange(`[${index}].distribution`)({val: {id: getTemplate('Attribute.NamedDistribution')}})}>Change to Named Distribution</a>\r\n        </label>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderWarning() {\r\n    if(!this.props.transition) {\r\n      return null;\r\n    }\r\n    let warn = (this.props.transition.transition.reduce((acc, val) => acc + (typeof val.distribution === 'object' ? val.distribution.default : val.distribution), 0) !== 1);\r\n    if (warn) {\r\n      return (\r\n        <label className='warning'>Weights do not add up to 100%.</label>\r\n      );\r\n    }\r\n  }\r\n\r\n  formatAsPercentage(num: number) {\r\n    return (num * 100) + \"%\";\r\n  }\r\n\r\n  checkInRange(num: number) {\r\n    return ((num >= 0) && (num <= 1));\r\n  }\r\n}\r\n\r\nexport default DistributedTransition;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { ConditionalTransition as ConditionalTransitionType } from '../../types/Transition';\r\nimport { getTemplate } from '../../templates/Templates';\r\nimport ConditionalEditor from './Conditional';\r\nimport type { State } from '../../types/State';\r\nimport './Transition.css';\r\n\r\n\r\n\r\ntype Props = {\r\n  options: State[],\r\n  transition?: ConditionalTransitionType,\r\n  onChange: any\r\n}\r\n\r\nclass ConditionalTransition extends Component<Props> {\r\n\r\n  swapItems(indexTo,indexFrom) {\r\n    if(indexTo >= 0 && indexTo < this.props.transition.transition.length){\r\n\r\n      let oldEntry = {\r\n        transition: this.props.transition.transition[indexTo].to,\r\n        condition: _.clone(this.props.transition.transition[indexTo].condition)\r\n      };\r\n\r\n      let newEntry = {\r\n        transition: this.props.transition.transition[indexFrom].to,\r\n        condition: _.clone(this.props.transition.transition[indexFrom].condition)\r\n      }\r\n          \r\n      return () => {\r\n        this.props.onChange(indexTo)({val: {id: newEntry}});\r\n        this.props.onChange(indexFrom)({val: {id: oldEntry}});\r\n      }\r\n    }\r\n\r\n    return () => {};\r\n  }\r\n\r\n  renderUpDown(index: number) {\r\n  \r\n    if(this.props.transition && this.props.transition.transition){\r\n      if(index < this.props.transition.transition.length - 1 && index > 0){\r\n        return <span>\r\n            <a className=\"editable-text delete-button\" onClick={this.swapItems(index-1, index)}>move up</a> | \r\n            <a className=\"editable-text delete-button\" onClick={this.swapItems(index, index+1)}>move down</a>\r\n          </span>\r\n      } else if(index < this.props.transition.transition.length - 1){\r\n        return <a className=\"editable-text delete-button\" onClick={this.swapItems(index, index+1)}>move down</a>\r\n      } else if(index > 0){\r\n        return <a className=\"editable-text delete-button\" onClick={this.swapItems(index-1, index)}>move up</a>\r\n      }\r\n    }\r\n  }\r\n  renderIf(index, isLast){\r\n    if(!this.props.transition.transition[index].condition && isLast && index !== 0){\r\n      return <span>\r\n                Else: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        (add condition)\r\n                      </a>\r\n            </span>\r\n    } else if(!this.props.transition.transition[index].condition){\r\n      return <span>\r\n                <a className=\"editable-text delete-button editable-error\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        Add Condition\r\n                      </a>\r\n            </span>\r\n    } else if(index === 0 && !this.props.transition.transition[index].condition){\r\n      return <span>\r\n                If: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        (add condition)\r\n                      </a>\r\n            </span>\r\n\r\n    } else if(index === 0){\r\n      return <span>If:</span>\r\n\r\n    } else if(!isLast){\r\n      return <span>\r\n              Else If:\r\n            </span>\r\n\r\n    }else{\r\n      return <span>\r\n            Else If: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: null}})}}>\r\n                (remove condition)\r\n              </a>\r\n            </span>\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let currentValue = [];\r\n    if (this.props.transition) {\r\n      currentValue = this.props.transition.transition;\r\n    }\r\n    if(!this.props.transition) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <label>\r\n        Conditional Transition To:\r\n        {currentValue.map((t, i) => {\r\n          let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n          return <div key={i} className='transition-option'>\r\n            <label>\r\n              {this.renderIf(i, i === currentValue.length-1)} \r\n              <ConditionalEditor {...this.props} conditional={t.condition} onChange={this.props.onChange(`${i}.condition`)}/>\r\n            </label>\r\n            <br/>\r\n            <label>\r\n              Transition To: <RIESelect className='editable-text' propName='to' value={{id:t.to, text:t.to}} change={this.props.onChange(`${i}.transition`)} options={options} />\r\n            </label>\r\n            <br/>\r\n            {this.renderUpDown(i)}\r\n            <br/>\r\n            <a className=\"editable-text delete-button\" onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n\r\n          </div>\r\n        })}\r\n        <a className='editable-text add-button' onClick={() => this.props.onChange(`[${currentValue.length}]`)({val: {id: getTemplate('Transition.Conditional[0]')}})}>+</a>\r\n\r\n      </label>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ConditionalTransition;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { ConditionalTransition as ConditionalTransitionType } from '../../types/Transition';\r\nimport { getTemplate } from '../../templates/Templates';\r\nimport ConditionalEditor from './Conditional';\r\nimport DistributedTransitionEditor from './DistributedTransition';\r\nimport DirectTransitionEditor from './DirectTransition';\r\nimport type { State } from '../../types/State';\r\n\r\nimport './Transition.css';\r\n\r\n\r\n\r\ntype Props = {\r\n  options: State[],\r\n  transition?: ConditionalTransitionType,\r\n  onChange: any\r\n}\r\n\r\nclass ComplexTransition extends Component<Props> {\r\n\r\n  swapItems(indexTo,indexFrom) {\r\n    if(indexTo >= 0 && indexTo < this.props.transition.transition.length){\r\n      let oldEntry = {};\r\n      let newEntry = {};\r\n\r\n      if(this.props.transition.transition[indexTo].condition){\r\n        oldEntry.condition = _.clone(this.props.transition.transition[indexTo].condition)\r\n      }\r\n      if(this.props.transition.transition[indexTo].distributions){\r\n        oldEntry.distributions = _.clone(this.props.transition.transition[indexTo].distributions.map((d) => ({distribution: d.distribution, transition: d.to})))\r\n      }\r\n      if(this.props.transition.transition[indexTo].transition.to){\r\n        oldEntry.transition = this.props.transition.transition[indexTo].transition.to\r\n      }\r\n\r\n      if(this.props.transition.transition[indexFrom].condition){\r\n        newEntry.condition = _.clone(this.props.transition.transition[indexFrom].condition)\r\n      }\r\n      if(this.props.transition.transition[indexFrom].distributions){\r\n        newEntry.distributions = _.clone(this.props.transition.transition[indexFrom].distributions.map((d) => ({distribution: d.distribution, transition: d.to})))\r\n      }\r\n      if(this.props.transition.transition[indexFrom].transition.to){\r\n        newEntry.transition = this.props.transition.transition[indexFrom].transition.to\r\n      }\r\n\r\n      return () => {\r\n        this.props.onChange(indexTo)({val: {id: newEntry}});\r\n        this.props.onChange(indexFrom)({val: {id: oldEntry}});\r\n      }\r\n    }\r\n\r\n    return () => {};\r\n  }\r\n\r\n  renderUpDown(index: number) {\r\n  \r\n    if(this.props.transition && this.props.transition.transition){\r\n      if(index < this.props.transition.transition.length - 1 && index > 0){\r\n        return <span>\r\n            <a className=\"editable-text delete-button\" onClick={this.swapItems(index-1, index)}>move up</a> | \r\n            <a className=\"editable-text delete-button\" onClick={this.swapItems(index, index+1)}>move down</a>\r\n          </span>\r\n      } else if(index < this.props.transition.transition.length - 1){\r\n        return <a className=\"editable-text delete-button\" onClick={this.swapItems(index, index+1)}>move down</a>\r\n      } else if(index > 0){\r\n        return <a className=\"editable-text delete-button\" onClick={this.swapItems(index-1, index)}>move up</a>\r\n      }\r\n    }\r\n  }\r\n\r\n  renderIf(index, isLast){\r\n    if(!this.props.transition.transition[index].condition && isLast && index !==0){\r\n      return <span>\r\n                Else: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        (add condition)\r\n                      </a>\r\n            </span>\r\n    } else if(!this.props.transition.transition[index].condition){\r\n      return <span>\r\n                <a className=\"editable-text delete-button editable-error\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        Add Condition\r\n                      </a>\r\n            </span>\r\n    } else if(index === 0 && !this.props.transition.transition[index].condition){\r\n      return <span>\r\n                If: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        (add condition)\r\n                      </a>\r\n            </span>\r\n\r\n    } else if(index === 0){\r\n      return <span>If:</span>\r\n\r\n    } else if(!isLast){\r\n      return <span>\r\n              Else If:\r\n            </span>\r\n\r\n    }else{\r\n      return <span>\r\n            Else If: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: null}})}}>\r\n                (remove condition)\r\n              </a>\r\n            </span>\r\n    }\r\n  }\r\n\r\n  renderTransition(t, i, isLast){\r\n\r\n    let transitionEditor = null;\r\n\r\n    if(t.transition.to !== undefined){\r\n      const newDistributedTransition = {...t, distributions: [{distribution: 1, transition: t.transition.to}]};\r\n      delete newDistributedTransition.transition;\r\n      transitionEditor = <div>\r\n                           <DirectTransitionEditor \r\n                             transition={t.transition}\r\n                             options={this.props.options} \r\n                             onChange={this.props.onChange(`[${i}].transition`)} />\r\n                           <br/>\r\n                           <a className=\"editable-text delete-button\" \r\n                              onClick={()=>{this.props.onChange(`[${i}]`)({val: {id: newDistributedTransition}})}}>Change to Distributed Transition</a>\r\n                          </div>\r\n    } else {\r\n      let nextTransition = 'Initial';\r\n      if(t.distributions.length > 0){\r\n        nextTransition = t.distributions[0].to\r\n      }\r\n\r\n      const newDirectTransition = {...t, distributions: [], transition: nextTransition};\r\n\r\n      transitionEditor = <div>\r\n                          <DistributedTransitionEditor \r\n                             transition={{transition: t.distributions}} \r\n                             options={this.props.options} \r\n                             onChange={this.props.onChange(`[${i}].distributions`)} />\r\n                           <br/>\r\n                           <a className=\"editable-text delete-button\" \r\n                              onClick={()=>{this.props.onChange(`[${i}]`)({val: {id: newDirectTransition}})}}>Change to Direct Transition</a>\r\n                          </div>\r\n    }\r\n\r\n    return <div className='transition-option' key={i}>\r\n            <label>\r\n            {this.renderIf(i, isLast)} <ConditionalEditor {...this.props} conditional={t.condition} onChange={this.props.onChange(`${i}.condition`)}/>\r\n            </label>\r\n            <br/>\r\n            <label>\r\n            {transitionEditor}\r\n            </label>\r\n            <br/>\r\n            {this.renderUpDown(i)}\r\n            <br/>\r\n            <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n          </div>\r\n  }\r\n\r\n  render() {\r\n    let currentValue = [];\r\n    if (this.props.transition) {\r\n      currentValue = this.props.transition.transition;\r\n    }\r\n    if(!this.props.transition) {\r\n      return null;\r\n    }\r\n    const states = this.props.options;\r\n    const options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n\r\n    return (\r\n      <label>\r\n        Complex Transition:\r\n\r\n        {currentValue.map((t, i) => {\r\n          return this.renderTransition(t, i, i === currentValue.length-1);\r\n        })}\r\n\r\n        <a className='editable-text add-button' onClick={() => this.props.onChange(`[${currentValue.length}]`)({val: {id: getTemplate('Transition.Complex[0]')}})}>+</a>\r\n\r\n      </label>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ComplexTransition;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport type { Transition as TransitionType } from '../../types/Transition';\r\nimport type { State } from '../../types/State';\r\nimport DirectTransition from './DirectTransition';\r\nimport DistributedTransition from './DistributedTransition';\r\nimport ConditionalTransition from './ConditionalTransition';\r\nimport ComplexTransition from './ComplexTransition';\r\n\r\ntype Props = {\r\n  options: State[],\r\n  transition?: Transition,\r\n  onChange: any\r\n}\r\n\r\nclass Transition extends Component<Props> {\r\n  render() {\r\n    if(this.props.transition){\r\n      switch (this.props.transition.type) {\r\n        case \"Direct\":\r\n          return <DirectTransition {...this.props} onChange={this.props.onChange('direct_transition')} />\r\n        case \"Distributed\":\r\n          return <DistributedTransition {...this.props} onChange={this.props.onChange('distributed_transition')} />\r\n        case \"Conditional\":\r\n          return <ConditionalTransition {...this.props} onChange={this.props.onChange('conditional_transition')} />\r\n        case \"Complex\":\r\n          return <ComplexTransition {...this.props} onChange={this.props.onChange('complex_transition')} />\r\n        case \"None\":\r\n          return <div> No transition </div>\r\n        default:\r\n          return <div> {this.props.transition.type} Transition is not supported at this time </div>\r\n      }\r\n    }\r\n    return <div> No Transition </div>\r\n  }\r\n}\r\n\r\nexport default Transition;\r\n","export const BasicTutorial = [\r\n  {title: \"Create Module\", selector: \".Editor-top-open :nth-child(1)\", text: \"Create a new module\"},\r\n  {title: \"Open Module\", selector: \".Editor-top-open :nth-child(2)\", text: \"Open a module by selecting Open Module\"},\r\n  {title: \"Download Module\", selector: \".Editor-top-open :nth-child(3)\", text: \"Download module by selecting Download\"},\r\n  {title: \"Edit Node\", selector: \"#node_Initial\", text: \"To edit a node you can click on it in the graph\"},\r\n  {title: \"Module Remarks\", selector: \".ModuleProperties-remarks\", text: \"This is a place to put any remarks or citations for this module.\"},\r\n  {title: \"Adding a State\", selector: \".navbar-nav :nth-child(4)\", text: \"This will add a new state to the module, it can then be edited like any other state.\"},\r\n  {title: \"Adding a Structure\", selector: \".navbar-nav :nth-child(5)\", text: \"We have a few commonly used structures, this will allow you to add them to your module. This feature is not yet available.\"},\r\n]\r\n\r\nexport const EditTutorial = [\r\n  {title: \"Change State Name\", selector: \".State h3\", text: \"This text is editable, you can change the name of this state here.\"},\r\n  {title: \"Change State Type\", selector: \".State :nth-child(2)\", text: \"You can change the type of this state here, you can find a listing of state types at <a href='https://github.com/synthetichealth/synthea/wiki/Generic-Module-Framework%3A-States' target='_blank'> the wiki </a>.\"},\r\n  {title: \"State Editor\", selector: \".State-Editor\", text: \"Here is a context aware editor, depending on what your state has it will list the various attributes.\"},\r\n  {title: \"Delete State\", selector: \"div.State > a.delete-button\", text: \"This will remove the currently selected state from the editor.\"},\r\n  {title: \"Transition Type\", selector: \".Transition-Type\", text: \"You can change the type of the transition the module has here, <a href='https://github.com/synthetichealth/synthea/wiki/Generic-Module-Framework%3A-Transitions' target='_blank'> here </a> is a list of transition types.\"},\r\n\r\n\r\n]\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect, RIEInput, RIENumber, RIEToggle, RIETextArea } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { State, InitialState, TerminalState, SimpleState, GuardState, DelayState, SetAttributeState, CounterState, CallSubmoduleState, EncounterState, EncounterEndState, ConditionOnsetState, ConditionEndState, AllergyOnsetState, AllergyEndState, MedicationOrderState, MedicationEndState, CarePlanStartState, CarePlanEndState, ProcedureState, VitalSignState, ObservationState, MultiObservationState, DiagnosticReportState, ImagingStudyState, SymptomState, DeathState } from '../../types/State';\r\n\r\nimport { Code, Codes } from './Code';\r\nimport { Goals } from './Goal';\r\nimport { SeriesList } from './ImagingStudyAttributes';\r\nimport ConditionalEditor from './Conditional';\r\nimport Transition from './Transition';\r\nimport { getTemplate } from '../../templates/Templates';\r\nimport { BasicTutorial, EditTutorial } from '../../templates/Tutorial';\r\n\r\n\r\nimport './State.css';\r\n\r\ntype Props = {\r\n  moduleName: string,\r\n  state: State,\r\n  otherStates: State[],\r\n  onChange: any,\r\n  renameNode: any,\r\n  copyNode: any,\r\n  changeType: any,\r\n  addTransition: any,\r\n  helpFunction: any\r\n}\r\n\r\nconst unitOfTimeOptions = [\r\n  {id: 'years', text: 'years'},\r\n  {id: 'months', text: 'months'},\r\n  {id: 'weeks', text: 'weeks'},\r\n  {id: 'days', text: 'days'},\r\n  {id: 'hours', text: 'hours'},\r\n  {id: 'minutes', text: 'minutes'},\r\n  {id: 'seconds', text: 'seconds'}\r\n];\r\n\r\nclass StateEditor extends Component<Props> {\r\n\r\n  renderStateType() {\r\n    let props = {...this.props};\r\n    props.state.name = props.state.name || 'Unnamed_State';\r\n    props.onChange = this.props.onChange(`states.${props.state.name}`);\r\n    switch (this.props.state.type) {\r\n      case \"Initial\":\r\n        return <Initial {...props} />\r\n      case \"Terminal\":\r\n        return <Terminal {...props} />\r\n      case \"Simple\":\r\n        return <Simple {...props} />\r\n      case \"Guard\":\r\n        return <Guard {...props} />\r\n      case \"Delay\":\r\n        return <Delay {...props} />\r\n      case \"SetAttribute\":\r\n        return <SetAttribute {...props} />\r\n      case \"Counter\":\r\n        return <Counter {...props} />\r\n      case \"CallSubmodule\":\r\n        return <CallSubmodule {...props} />\r\n      case \"Encounter\":\r\n        return <Encounter {...props} />\r\n      case \"EncounterEnd\":\r\n        return <EncounterEnd {...props} />\r\n      case \"ConditionOnset\":\r\n        return <ConditionOnset {...props} />\r\n      case \"ConditionEnd\":\r\n        return <ConditionEnd {...props} />\r\n      case \"AllergyOnset\":\r\n        return <AllergyOnset {...props} />\r\n      case \"AllergyEnd\":\r\n        return <AllergyEnd {...props} />\r\n      case \"MedicationOrder\":\r\n        return <MedicationOrder {...props} />\r\n      case \"MedicationEnd\":\r\n        return <MedicationEnd {...props} />\r\n      case \"CarePlanStart\":\r\n        return <CarePlanStart {...props} />\r\n      case \"CarePlanEnd\":\r\n        return <CarePlanEnd {...props} />\r\n      case \"Procedure\":\r\n        return <Procedure {...props} />\r\n      case \"VitalSign\":\r\n        return <VitalSign {...props} />\r\n      case \"Observation\":\r\n        return <Observation {...props} />\r\n      case \"MultiObservation\":\r\n        return <MultiObservation {...props} />\r\n      case \"DiagnosticReport\":\r\n        return <DiagnosticReport {...props} />\r\n      case \"ImagingStudy\":\r\n        return <ImagingStudy {...props} />\r\n      case \"Symptom\":\r\n        return <Symptom {...props} />\r\n      case \"Death\":\r\n        return <Death {...props} />\r\n      default:\r\n        return this.props.state.type\r\n    }\r\n  }\r\n\r\n  updateRemarks = (el:any) => {\r\n    const remarks = el.remarks? el.remarks.split(\"\\n\") : null;\r\n    this.props.onChange(`states.${this.props.state.name}.remarks`)({remarks:{id:remarks}});\r\n  }\r\n\r\n  render() {\r\n    if(!this.props.state) {\r\n      return null;\r\n    }\r\n\r\n    let typeOptions = Object.keys(getTemplate('State')).sort().map((k) => {return {id: k, text: k}});\r\n    const transitionOptions = [\r\n      {id:\"None\" ,text:\"None\"},\r\n      {id:\"Direct\" ,text:\"Direct\"},\r\n      {id:\"Distributed\" ,text:\"Distributed\"},\r\n      {id:\"Conditional\" ,text:\"Conditional\"},\r\n      {id:\"Complex\" ,text:\"Complex\"}\r\n    ]\r\n\r\n    let remarks = this.props.state.remarks ||\"\";\r\n    remarks = Array.isArray(remarks)? remarks.join(\"\\n\"): remarks;\r\n\r\n    const transitionType = (this.props.state.transition||{}).type;\r\n    return (\r\n        <div className=\"State\">\r\n          <div className='Editor-panel-title'>\r\n            State Editor\r\n          </div>\r\n          <h3><RIEInput className='editable-text' className='editable-text' propName={'name'} value={this.props.state.name} change={this.props.renameNode} /></h3>\r\n          State Type: <RIESelect className='editable-text' className='editable-text' value={{id: this.props.state.type, text: this.props.state.type}} propName='type'change={this.props.changeType} options={typeOptions}/>\r\n          <hr/>\r\n          <RIETextArea className='editable-text' value={remarks} propName=\"remarks\" change={this.updateRemarks} />\r\n          <br/>\r\n          <hr/>\r\n          <div className=\"State-Editor\">\r\n            {this.renderStateType()}\r\n          </div>\r\n          <br />\r\n          <hr />\r\n          <div>\r\n            <div className=\"Transition-Type\">Transition Type:\r\n              <RIESelect className='editable-text' className='editable-text' value={{id: transitionType, text: transitionType}} propName='transition' change={(e) => this.props.addTransition(e.transition.id)} options={transitionOptions}/>\r\n            </div>\r\n          </div>\r\n          <div className=\"Transition\">\r\n            <Transition\r\n              options={this.props.otherStates.sort((a,b) => a.name > b.name? 1 : -1)}\r\n              transition={this.props.state.transition}\r\n              onChange={this.props.onChange(`states.${this.props.state.name}`)} />\r\n          </div>\r\n          <br/>\r\n          <a onClick={this.props.helpFunction(EditTutorial)}>Help</a>\r\n\r\n\r\n        </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nclass Initial extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): InitialState);\r\n    return (\r\n      null\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Terminal extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): TerminalState);\r\n    return (\r\n      null\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Simple extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): SimpleState);\r\n    return (\r\n      null\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Guard extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): GuardState);\r\n    return (\r\n      <div>\r\n        <ConditionalEditor {...this.props} conditional={state.allow} options={this.props.otherStates} onChange={this.props.onChange('allow')} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Delay extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): DelayState);\r\n    return (\r\n      <div>\r\n        {this.renderExactOrRange()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderExactOrRange() {\r\n    let state = ((this.props.state: any): DelayState);\r\n    if (state.exact) {\r\n      return (\r\n        <div>\r\n          Exact Quantity: <RIENumber className='editable-text' value={state.exact.quantity} propName='quantity' change={this.props.onChange('exact.quantity')} />\r\n          <br />\r\n          Exact Unit: <RIESelect className='editable-text' value={{id: state.exact.unit, text: state.exact.unit}} propName=\"unit\" change={this.props.onChange('exact.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.RangeWithUnit')}}); this.props.onChange('exact')({val: {id: null}})}}>Change to Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n    else {\r\n      return (\r\n        <div>\r\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\r\n          <br />\r\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\r\n          <br />\r\n          Range Unit: <RIESelect className='editable-text' value={{id: state.range.unit, text: state.range.unit}} propName=\"unit\" change={this.props.onChange('range.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.ExactWithUnit')}}); this.props.onChange('range')({val: {id: null}})}}>Change to Exact</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass SetAttribute extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): SetAttributeState);\r\n    return (\r\n      <div>\r\n        Attribute: <RIEInput className='editable-text' value={state.attribute} propName={'attribute'} change={this.props.onChange('attribute')} />\r\n        <br/>\r\n        {this.renderValue()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderValue() {\r\n    let state = ((this.props.state: any): SetAttributeState);\r\n\r\n    if (state.value == null) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('value')({val: {id: \"text\"}})}>Add Value</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let val = state.value;\r\n      if(typeof val === 'boolean'){\r\n        val = String(val);\r\n      }\r\n      return (\r\n        <div>\r\n          Value: <RIEInput className='editable-text' value={val} propName={'value'} change={this.props.onChange('value')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('value')({val: {id: null}})}>(remove)</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass Counter extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): CounterState);\r\n    let options = [\r\n      {id: 'increment', text: 'increment'},\r\n      {id: 'decrement', text: 'decrement'}\r\n    ];\r\n    return (\r\n      <div>\r\n        Attribute: <RIEInput className='editable-text' value={state.attribute} propName={'attribute'} change={this.props.onChange('attribute')} />\r\n        <br/>\r\n        Action: <RIESelect className='editable-text' value={{id: state.action, text: state.action}} propName=\"action\" change={this.props.onChange('action')} options={options} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass CallSubmodule extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): CallSubmoduleState);\r\n    return (\r\n      <div>\r\n        Submodule: <RIEInput className='editable-text' value={state.submodule} propName={'submodule'} change={this.props.onChange('submodule')} />\r\n        <br/>\r\n        <a href={`${window.location.href.replace(window.location.hash,\"\")}#${state.submodule}`} target=\"_blank\">View Submodule</a>\r\n\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Encounter extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): EncounterState);\r\n    let options = [\r\n      {id: 'emergency', text: 'emergency'},\r\n      {id: 'inpatient', text: 'inpatient'},\r\n      {id: 'ambulatory', text: 'ambulatory'}\r\n    ];\r\n    if (state.wellness == null) {\r\n      return (\r\n        <div>\r\n          {this.renderWellness()}\r\n          Encounter Class: <RIESelect className='editable-text' value={{id: state.encounter_class, text: state.encounter_class}} propName=\"encounter_class\" change={this.props.onChange('encounter_class')} options={options} />\r\n          <br />\r\n          {this.renderReason()}\r\n          <div className='section'>\r\n            Codes\r\n            <br />\r\n            <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          </div>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          {this.renderWellness()}\r\n          {this.renderReason()}\r\n        </div>\r\n      );\r\n    }\r\n\r\n  }\r\n\r\n  renderWellness() {\r\n    let state = ((this.props.state: any): EncounterState);\r\n    if (state.wellness == null) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => {this.props.onChange('wellness')({val: {id: true}}); this.props.onChange('codes')({val: {id: null}}); this.props.onChange('encounter_class')({val: {id: null}})}}>Add Wellness</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Wellness\r\n          <a className='editable-text' onClick={() => {this.props.onChange('wellness')({val: {id: null}}); this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}}>(remove)</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n\r\n  }\r\n\r\n  renderReason() {\r\n    let state = ((this.props.state: any): EncounterState);\r\n    if (!state.reason) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: \"Select Condition/Enter Attribute\"}})}>Add Reason</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n      let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n      let inputAttribute = [{id: \"*Input Attribute*\", text: \"*Input Attribute*\"}];\r\n      let allOptions = options.concat(inputAttribute);\r\n      let reason = <RIESelect className='editable-text' value={{id: state.reason, text: state.reason}} propName={'reason'}  change={this.props.onChange('reason')} options={allOptions} />\r\n      if (state.reason === \"*Input Attribute*\") {\r\n        let attribute = <RIEInput className='editable-text' value={state.reason} propName={'reason'}  change={this.props.onChange('reason')} />\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n            Attribute: {attribute}\r\n            <br/>\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass EncounterEnd extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): EncounterEndState);\r\n    return (\r\n      <div>\r\n        {this.renderDischargeDisposition()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderDischargeDisposition() {\r\n    let state = ((this.props.state: any): EncounterEndState);\r\n    if (!state.discharge_disposition) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('discharge_disposition')({val: {id: getTemplate('Type.Code.Nubc')}})}>Add Discharge Disposition</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          <Code code={state.discharge_disposition} system={\"NUBC\"} onChange={this.props.onChange('discharge_disposition')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('discharge_disposition')({val: {id: null}})}>Remove Discharge Disposition</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass ConditionOnset extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): ConditionOnsetState);\r\n    return (\r\n      <div>\r\n        {this.renderTargetEncounter()}\r\n        {this.renderAssignToAttribute()}\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderTargetEncounter() {\r\n    let state = ((this.props.state: any): ConditionOnsetState);\r\n    let encounters = this.props.otherStates.filter((s) => {return s.type === \"Encounter\"});\r\n    let options = encounters.map((e) => {return {id: e.name, text: e.name}});\r\n    let targetEncounter = <RIESelect className='editable-text' value={{id: state.target_encounter, text: state.target_encounter}} propName={'target_encounter'}  change={this.props.onChange('target_encounter')} options={options} />\r\n    if (state.target_encounter) {\r\n      return (\r\n        <div>\r\n          Target Encounter: {targetEncounter}\r\n          <br/>\r\n          <a className='editable-text' onClick={() => this.props.onChange('target_encounter')({val: {id: null}})}>(remove to diagnose immediately)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('target_encounter')({val: {id: \"text\"}})}>Add Target Encounter</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderAssignToAttribute() {\r\n    let state = ((this.props.state: any): ConditionOnsetState);\r\n    if (!state.assign_to_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Assign to Attribute: <RIEInput className='editable-text' value={state.assign_to_attribute} propName={'assign_to_attribute'}  change={this.props.onChange('assign_to_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass ConditionEnd extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): ConditionEndState);\r\n    return (\r\n      <div>\r\n        {this.renderConditionOnset()}\r\n        {this.renderReferencedByAttribute()}\r\n        {this.renderCodes()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderConditionOnset() {\r\n    let state = ((this.props.state: any): ConditionEndState);\r\n    let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n    let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n    if (!state.condition_onset) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('condition_onset')({val: {id: \"text\"}})}>Add Condition Onset</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Condition Onset: <RIESelect className='editable-text' value={{id: state.condition_onset, text: state.condition_onset}} propName={'condition_onset'}  change={this.props.onChange('condition_onset')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('condition_onset')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReferencedByAttribute() {\r\n    let state = ((this.props.state: any): ConditionEndState);\r\n    if (!state.referenced_by_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Referenced by Attribute: <RIEInput className='editable-text' value={state.referenced_by_attribute} propName={'referenced_by_attribute'}  change={this.props.onChange('referenced_by_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCodes() {\r\n    let state = ((this.props.state: any): ConditionEndState);\r\n    if (!state.codes) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass AllergyOnset extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): AllergyOnsetState);\r\n    let encounters = this.props.otherStates.filter((s) => {return s.type === \"Encounter\"});\r\n    let options = encounters.map((e) => {return {id: e.name, text: e.name}});\r\n    return (\r\n      <div>\r\n        Target Encounter: <RIESelect className='editable-text' value={{id: state.target_encounter, text: state.target_encounter}} propName={'target_encounter'} change={this.props.onChange('target_encounter')} options={options} />\r\n        <br />\r\n        {this.renderAssignToAttribute()}\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderAssignToAttribute() {\r\n    let state = ((this.props.state: any): AllergyOnsetState);\r\n    if (!state.assign_to_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Assign to Attribute: <RIEInput className='editable-text' value={state.assign_to_attribute} propName={'assign_to_attribute'}  change={this.props.onChange('assign_to_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass AllergyEnd extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): AllergyEndState);\r\n    return (\r\n      <div>\r\n        {this.renderAllergyOnset()}\r\n        {this.renderReferencedByAttribute()}\r\n        {this.renderCodes()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderAllergyOnset() {\r\n    let state = ((this.props.state: any): AllergyEndState);\r\n    let allergyOnset = this.props.otherStates.filter((s) => {return s.type === \"AllergyOnset\"});\r\n    let options = allergyOnset.map((e) => {return {id: e.name, text: e.name}});\r\n    if (!state.allergy_onset) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('allergy_onset')({val: {id: \"text\"}})}>Add Allergy Onset</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Allergy Onset: <RIESelect className='editable-text' value={{id: state.allergy_onset, text: state.allergy_onset}} propName={'allergy_onset'}  change={this.props.onChange('allergy_onset')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('allergy_onset')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReferencedByAttribute() {\r\n    let state = ((this.props.state: any): AllergyEndState);\r\n    if (!state.referenced_by_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Referenced by Attribute: <RIEInput className='editable-text' value={state.referenced_by_attribute} propName={'referenced_by_attribute'}  change={this.props.onChange('referenced_by_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCodes() {\r\n    let state = ((this.props.state: any): AllergyEndState);\r\n    if (!state.codes) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass MedicationOrder extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    return (\r\n      <div>\r\n        {this.renderAssignToAttribute()}\r\n        {this.renderReason()}\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"RxNorm\"} onChange={this.props.onChange('codes')} />\r\n          <br />\r\n        </div>\r\n        {this.renderPrescription()}\r\n        {this.renderChronicMed()}\r\n        {this.renderCreateAdministration()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderChronicMed() {\r\n    let state = ((this.props.state: any): MedicationOrder);\r\n    return (\r\n      <div>\r\n        <input type=\"checkbox\" checked={state.chronic} onChange={() => this.props.onChange('chronic')({ val: { id: !state.chronic } })} /> Chronic Medication.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderCreateAdministration() {\r\n    let state = ((this.props.state: any): MedicationOrder);\r\n    return (\r\n      <div>\r\n        <input type=\"checkbox\" checked={state.administration} onChange={() => this.props.onChange('administration')({ val: { id: !state.administration } })} /> Administration of the medication.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderAssignToAttribute() {\r\n    let state = ((this.props.state: any): ConditionOnsetState);\r\n    if (!state.assign_to_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Assign to Attribute: <RIEInput className='editable-text' value={state.assign_to_attribute} propName={'assign_to_attribute'}  change={this.props.onChange('assign_to_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReason() {\r\n    let state = ((this.props.state: any): MedicationOrder);\r\n    if (!state.reason) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: \"Select Condition/Enter Attribute\"}})}>Add Reason</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n      let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n      let inputAttribute = [{id: \"*Input Attribute*\", text: \"*Input Attribute*\"}];\r\n      let allOptions = options.concat(inputAttribute);\r\n      let reason = <RIESelect className='editable-text' value={{id: state.reason, text: state.reason}} propName={'reason'}  change={this.props.onChange('reason')} options={allOptions} />\r\n      if (state.reason === \"*Input Attribute*\") {\r\n        let attribute = <RIEInput className='editable-text' value={state.reason} propName={'reason'}  change={this.props.onChange('reason')} />\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n            Attribute: {attribute}\r\n            <br/>\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  renderPrescription() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (!state.prescription) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription')({val: {id: getTemplate('Attribute.Prescription')}})}>Add Prescription</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Prescription\r\n          {this.renderRefills()}\r\n          {this.renderAsNeeded()}\r\n          {this.renderDosage()}\r\n          {this.renderDuration()}\r\n          {this.renderInstructions()}\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription')({val: {id: null}})}> Remove Prescription</a>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderRefills() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (!state.prescription.refills) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.refills')({val: {id: 1}})}>Add Prescription Refills</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Prescription Refills: <RIENumber className='editable-text' value={state.prescription.refills} propName={'refills'}  change={this.props.onChange('prescription.refills')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.refills')({val: {id: null}})}>(remove)</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderAsNeeded() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (state.prescription.as_needed == null) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.as_needed')({val: {id: true}})}>Add Prescription As Needed</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Prescription As Needed\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.as_needed')({val: {id: null}})}>(remove)</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderDosage() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (!state.prescription.dosage) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div className='section'>\r\n        Dosage Amount: <RIENumber className='editable-text' value={state.prescription.dosage.amount} propName={'amount'}  change={this.props.onChange('prescription.dosage.amount')} />\r\n        <br />\r\n        Dosage Frequency: <RIENumber className='editable-text' value={state.prescription.dosage.frequency} propName={'frequency'}  change={this.props.onChange('prescription.dosage.frequency')} />\r\n        <br />\r\n        Dosage Period: <RIENumber className='editable-text' value={state.prescription.dosage.period} propName={'period'}  change={this.props.onChange('prescription.dosage.period')} />\r\n        <br />\r\n        Dosage Unit: <RIESelect className='editable-text' value={{id: state.prescription.dosage.unit, text: state.prescription.dosage.unit}} propName=\"unit\" change={this.props.onChange('prescription.dosage.unit')} options={unitOfTimeOptions} />\r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderDuration() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (!state.prescription.duration) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div className='section'>\r\n        Duration Quantity: <RIENumber className='editable-text' value={state.prescription.duration.quantity} propName={'quantity'}  change={this.props.onChange('prescription.duration.quantity')} />\r\n        <br />\r\n        Duration Unit: <RIESelect className='editable-text' value={{id: state.prescription.duration.unit, text: state.prescription.duration.unit}} propName=\"unit\" change={this.props.onChange('prescription.duration.unit')} options={unitOfTimeOptions} />\r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderInstructions() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (!state.prescription.instructions) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.instructions')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Instructions</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Instructions\r\n          <br />\r\n          <Codes codes={state.prescription.instructions} system={\"SNOMED-CT\"} onChange={this.props.onChange('prescription.instructions')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.instructions')({val: {id: null}})}>Remove Instructions</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass MedicationEnd extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): MedicationEndState);\r\n    return (\r\n      <div>\r\n        {this.renderMedicationOrder()}\r\n        {this.renderReferencedByAttribute()}\r\n        {this.renderCodes()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMedicationOrder() {\r\n    let state = ((this.props.state: any): MedicationEndState);\r\n    let medicationOrder = this.props.otherStates.filter((s) => {return s.type === \"MedicationOrder\"});\r\n    let options = medicationOrder.map((e) => {return {id: e.name, text: e.name}});\r\n    if (!state.medication_order) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('medication_order')({val: {id: \"text\"}})}>Add Medication Order</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Medication Order: <RIESelect className='editable-text' value={{id: state.medication_order, text: state.medication_order}} propName={'medication_order'}  change={this.props.onChange('medication_order')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('medication_order')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReferencedByAttribute() {\r\n    let state = ((this.props.state: any): MedicationEndState);\r\n    if (!state.referenced_by_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Referenced by Attribute: <RIEInput className='editable-text' value={state.referenced_by_attribute} propName={'referenced_by_attribute'}  change={this.props.onChange('referenced_by_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCodes() {\r\n    let state = ((this.props.state: any): MedicationEndState);\r\n    if (!state.codes) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.RxNorm')]}})}>Add Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass CarePlanStart extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): CarePlanStartState);\r\n    return (\r\n      <div>\r\n        {this.renderAssignToAttribute()}\r\n        {this.renderReason()}\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <br />\r\n        </div>\r\n        {this.renderActivities()}\r\n        {this.renderGoals()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderAssignToAttribute() {\r\n    let state = ((this.props.state: any): CarePlanStartState);\r\n    if (!state.assign_to_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Assign to Attribute: <RIEInput className='editable-text' value={state.assign_to_attribute} propName={'assign_to_attribute'}  change={this.props.onChange('assign_to_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReason() {\r\n    let state = ((this.props.state: any): CarePlanStart);\r\n    if (!state.reason) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: \"Select Condition/Enter Attribute\"}})}>Add Reason</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n      let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n      let inputAttribute = [{id: \"*Input Attribute*\", text: \"*Input Attribute*\"}];\r\n      let allOptions = options.concat(inputAttribute);\r\n      let reason = <RIESelect className='editable-text' value={{id: state.reason, text: state.reason}} propName={'reason'}  change={this.props.onChange('reason')} options={allOptions} />\r\n      if (state.reason === \"*Input Attribute*\") {\r\n        let attribute = <RIEInput className='editable-text' value={state.reason} propName={'reason'}  change={this.props.onChange('reason')} />\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n            Attribute: {attribute}\r\n            <br/>\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  renderActivities() {\r\n    let state = ((this.props.state: any): CarePlanStartState);\r\n    if (!state.activities) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('activities')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Activities</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Activities\r\n          <br />\r\n          <Codes codes={state.activities} system={\"SNOMED-CT\"} onChange={this.props.onChange('activities')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('activities')({val: {id: null}})}>Remove Activities</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderGoals() {\r\n    let state = ((this.props.state: any): CarePlanStartState);\r\n    if (!state.goals) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('goals')({val: {id: [getTemplate('Attribute.Goal')]}})}>Add Goals</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Goals\r\n          <br />\r\n          <Goals goals={state.goals} onChange={this.props.onChange('goals')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('goals')({val: {id: null}})}>Remove Goals</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass CarePlanEnd extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): CarePlanEndState);\r\n    return (\r\n      <div>\r\n        {this.renderCarePlan()}\r\n        {this.renderReferencedByAttribute()}\r\n        {this.renderCodes()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderCarePlan() {\r\n    let state = ((this.props.state: any): CarePlanEndState);\r\n    let careplans = this.props.otherStates.filter((s) => {return s.type === \"CarePlanStart\"});\r\n    let options = careplans.map((e) => {return {id: e.name, text: e.name}});\r\n    if (!state.careplan) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('careplan')({val: {id: \"text\"}})}>Add Care Plan</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Care Plan: <RIESelect className='editable-text' value={{id: state.careplan, text: state.careplan}} propName={'careplan'}  change={this.props.onChange('careplan')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('careplan')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReferencedByAttribute() {\r\n    let state = ((this.props.state: any): CarePlanEndState);\r\n    if (!state.referenced_by_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Referenced by Attribute: <RIEInput className='editable-text' value={state.referenced_by_attribute} propName={'referenced_by_attribute'}  change={this.props.onChange('referenced_by_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCodes() {\r\n    let state = ((this.props.state: any): CarePlanEndState);\r\n    if (!state.codes) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass Procedure extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): ProcedureState);\r\n    return (\r\n      <div>\r\n        {this.renderReason()}\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <br />\r\n        </div>\r\n        {this.renderDuration()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderReason() {\r\n    let state = ((this.props.state: any): Procedure);\r\n    if (!state.reason) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: \"Select Condition/Enter Attribute\"}})}>Add Reason</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n      let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n      let inputAttribute = [{id: \"*Input Attribute*\", text: \"*Input Attribute*\"}];\r\n      let allOptions = options.concat(inputAttribute);\r\n      let reason = <RIESelect className='editable-text' value={{id: state.reason, text: state.reason}} propName={'reason'}  change={this.props.onChange('reason')} options={allOptions} />\r\n      if (state.reason === \"*Input Attribute*\") {\r\n        let attribute = <RIEInput className='editable-text' value={state.reason} propName={'reason'}  change={this.props.onChange('reason')} />\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n            Attribute: {attribute}\r\n            <br/>\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  renderDuration() {\r\n    let state = ((this.props.state: any): ProcedureState);\r\n    if (!state.duration) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('duration')({val: {id: {low: 10, high: 20, unit: 'days'}}})}>Add Duration</a>\r\n          <br />\r\n        </div>\r\n      );\r\n      return null;\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Duration Low: <RIENumber className='editable-text' value={state.duration.low} propName={'low'}  change={this.props.onChange('duration.low')} />\r\n          <br />\r\n          Duration High: <RIENumber className='editable-text' value={state.duration.high} propName={'high'}  change={this.props.onChange('duration.high')} />\r\n          <br />\r\n          Duration Unit: <RIESelect className='editable-text' value={{id: state.duration.unit, text: state.duration.unit}} propName=\"unit\" change={this.props.onChange('duration.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => this.props.onChange('duration')({val: {id: null}})}>(remove)</a>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass VitalSign extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): VitalSignState);\r\n    return (\r\n      <div>\r\n        Vital Sign: <RIEInput className='editable-text' value={state.vital_sign} propName={'vital_sign'} change={this.props.onChange('vital_sign')} />\r\n        <br/>\r\n        Unit: <RIEInput className='editable-text' value={state.unit} propName={'unit'} change={this.props.onChange('unit')} />\r\n        <br/>\r\n        {this.renderExactOrRange()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderExactOrRange() {\r\n    let state = ((this.props.state: any): VitalSignState);\r\n    if (state.exact) {\r\n      return (\r\n        <div className='section'>\r\n          Exact Quantity: <RIENumber className='editable-text' value={state.exact.quantity} propName='quantity' change={this.props.onChange('exact.quantity')} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.Range')}}); this.props.onChange('exact')({val: {id: null}})}}>Change to Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n    else {\r\n      return (\r\n        <div className='section'>\r\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\r\n          <br />\r\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.Exact')}}); this.props.onChange('range')({val: {id: null}})}}>Change to Exact</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass Observation extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): ObservationState);\r\n    let options = [\r\n      {id: 'social-history', text: 'social-history'},\r\n      {id: 'vital-signs', text: 'vital-signs'},\r\n      {id: 'imaging', text: 'imaging'},\r\n      {id: 'laboratory', text: 'laboratory'},\r\n      {id: 'procedure', text: 'procedure'},\r\n      {id: 'survey', text: 'survey'},\r\n      {id: 'exam', text: 'exam'},\r\n      {id: 'therapy', text: 'therapy'}\r\n    ];\r\n    return (\r\n      <div>\r\n        Category: <RIESelect className='editable-text' value={{id: state.category, text: state.category}} propName=\"category\" change={this.props.onChange('category')} options={options} />\r\n        <br/>\r\n        Unit: <RIEInput className='editable-text' value={state.unit} propName={'unit'} change={this.props.onChange('unit')} />\r\n        <br/>\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"LOINC\"} onChange={this.props.onChange('codes')} />\r\n          <br/>\r\n        </div>\r\n        {this.renderValueContainer()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderValueContainer() { // renders exact, range, attribute, or vital_sign\r\n    let state = ((this.props.state: any): ObservationState);\r\n    if (state.exact) {\r\n      let value = state.exact.quantity;\r\n      if(typeof value === 'boolean'){\r\n        value = String(value);\r\n      }\r\n      return (\r\n        <div className='section'>\r\n          Exact Value: <RIEInput className='editable-text' value={value} propName='quantity' change={this.props.onChange('exact.quantity')} />\r\n          <br />\r\n          { this.renderToggles('exact') }\r\n        </div>\r\n      );\r\n    } else if (state.range) {\r\n      return (\r\n        <div className='section'>\r\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\r\n          <br />\r\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\r\n          <br />\r\n          { this.renderToggles('range') }\r\n        </div>\r\n      );\r\n    } else if (state.attribute) {\r\n      return (\r\n        <div className='section'>\r\n          Attribute: <RIEInput className='editable-text' value={state.attribute} propName={'attribute'}  change={this.props.onChange('attribute')} />\r\n          <br/>\r\n          { this.renderToggles('attribute') }\r\n        </div>\r\n      );\r\n    } else if (state.value_code) {\r\n      return (\r\n        <div className='section'>\r\n          <Code code={state.value_code} system={\"SNOMED-CT\"} onChange={this.props.onChange('value_code')} />\r\n          { this.renderToggles('value_code') }\r\n        </div>\r\n      );\r\n    } else { // vital_sign\r\n      return (\r\n        <div className='section'>\r\n          Vital Sign: <RIEInput className='editable-text' value={state.vital_sign} propName={'vital_sign'}  change={this.props.onChange('vital_sign')} />\r\n          { this.renderToggles('vital_sign') }\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderToggles(currentItem) {\r\n    console.log(currentItem);\r\n\r\n    let toggles = [];\r\n\r\n    if (currentItem !== 'exact') {\r\n      toggles.push(\r\n                <div key='exact'>\r\n                  <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.Exact')}}); this.props.onChange('range')({val: {id: null}}); this.props.onChange('attribute')({val: {id: null}}); this.props.onChange('vital_sign')({val: {id: null}}); this.props.onChange('value_code')({val: {id: null}})}}>Change to Exact</a>\r\n                  <br />\r\n                </div>\r\n        );\r\n    }\r\n\r\n    if (currentItem !== 'range') {\r\n      toggles.push(\r\n                <div key='range'>\r\n                  <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.Range')}}); this.props.onChange('exact')({val: {id: null}}); this.props.onChange('attribute')({val: {id: null}}); this.props.onChange('vital_sign')({val: {id: null}}); this.props.onChange('value_code')({val: {id: null}})}}>Change to Range</a>\r\n                  <br />\r\n                </div>\r\n        );\r\n    }\r\n\r\n    if (currentItem !== 'attribute') {\r\n      toggles.push(\r\n                <div key='attribute'>\r\n                  <a className='editable-text' onClick={() => {this.props.onChange('attribute')({val: {id: \"text\"}}); this.props.onChange('exact')({val: {id: null}}); this.props.onChange('range')({val: {id: null}}); this.props.onChange('vital_sign')({val: {id: null}}); this.props.onChange('value_code')({val: {id: null}})}}>Change to Attribute</a>\r\n                  <br />\r\n                </div>\r\n        );\r\n    }\r\n\r\n    if (currentItem !== 'vital_sign') {\r\n      toggles.push(\r\n                <div key='vital_sign'>\r\n                  <a className='editable-text' onClick={() => {this.props.onChange('vital_sign')({val: {id: \"text\"}}); this.props.onChange('exact')({val: {id: null}}); this.props.onChange('range')({val: {id: null}}); this.props.onChange('attribute')({val: {id: null}}); this.props.onChange('value_code')({val: {id: null}})}}>Change to Vital Sign</a>\r\n                  <br />\r\n                </div>\r\n        );\r\n    }\r\n\r\n    if (currentItem !== 'value_code') {\r\n      toggles.push(\r\n                <div key='value_code'>\r\n                  <a className='editable-text' onClick={() => {this.props.onChange('value_code')({val: {id:  getTemplate('Type.Code.Snomed')}}); this.props.onChange('exact')({val: {id: null}}); this.props.onChange('range')({val: {id: null}}); this.props.onChange('attribute')({val: {id: null}}); this.props.onChange('vital_sign')({val: {id: null}})}}>Change to Value Code</a>\r\n                  <br />\r\n                </div>\r\n        );\r\n    }\r\n\r\n    return toggles;\r\n  }\r\n\r\n}\r\n\r\nclass MultiObservation extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): MultiObservationState);\r\n    let observationCount = (state.observations && state.observations.length) || 0;\r\n    let options = [\r\n      {id: 'social-history', text: 'social-history'},\r\n      {id: 'vital-signs', text: 'vital-signs'},\r\n      {id: 'imaging', text: 'imaging'},\r\n      {id: 'laboratory', text: 'laboratory'},\r\n      {id: 'procedure', text: 'procedure'},\r\n      {id: 'survey', text: 'survey'},\r\n      {id: 'exam', text: 'exam'},\r\n      {id: 'therapy', text: 'therapy'}\r\n    ];\r\n    return (\r\n      <div>\r\n        Category: <RIESelect className='editable-text' value={{id: state.category, text: state.category}} propName=\"category\" change={this.props.onChange('category')} options={options} />\r\n        <br />\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"LOINC\"} onChange={this.props.onChange('codes')} />\r\n          <br />\r\n        </div>\r\n        <div className='section'>\r\n          <b>Observations</b>\r\n          <br />\r\n          {state.observations && state.observations.map((observation, i) => {\r\n            return (\r\n              <div className='section' key={i}>\r\n                Observation #{i+1} (<a className='editable-text delete-button' onClick={() => this.props.onChange(`observations.[${i}]`)({val: {id: null}})}>remove</a>)\r\n                <Observation state={observation} onChange={this.props.onChange(`observations.[${i}]`)} />\r\n              </div>\r\n            )\r\n          })}\r\n          <a className='editable-text' onClick={() => this.props.onChange(`observations.[${observationCount}]`)({val: {id: _.cloneDeep(getTemplate('Contained.Observation'))}})}>+</a>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass DiagnosticReport extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): DiagnosticReportState);\r\n    let observationCount = (state.observations && state.observations.length) || 0;\r\n    return (\r\n      <div>\r\n        <div className='section'>\r\n          <b>Codes</b>\r\n          <br />\r\n          <Codes codes={state.codes} system={\"LOINC\"} onChange={this.props.onChange('codes')} />\r\n        </div>\r\n        <div className='section'>\r\n          <b>Observations</b>\r\n          <br />\r\n          {state.observations && state.observations.map((observation, i) => {\r\n            return (\r\n              <div className='section' key={i}>\r\n                Observation #{i+1} (<a className='editable-text delete-button' onClick={() => this.props.onChange(`observations.[${i}]`)({val: {id: null}})}>remove</a>)\r\n                <Observation state={observation} onChange={this.props.onChange(`observations.[${i}]`)} />\r\n              </div>\r\n            )\r\n          })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`observations.[${observationCount}]`)({val: {id: _.cloneDeep(getTemplate('Contained.Observation'))}})}>+</a>\r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass ImagingStudy extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): ImagingStudyState);\r\n    return (\r\n      <div>\r\n        <div className='section'>\r\n          <b>Procedure Code:</b>\r\n          <Code code={state.procedure_code} system={\"SNOMED-CT\"} onChange={this.props.onChange('procedure_code')} />\r\n          <br />\r\n        </div>\r\n        <div className='section'>\r\n          <b>Series:</b>\r\n          <br />\r\n          <SeriesList series={state.series} onChange={this.props.onChange('series')} />\r\n          <br />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Symptom extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): SymptomState);\r\n    return (\r\n      <div>\r\n        Symptom: <RIEInput className='editable-text' value={state.symptom} propName={'symptom'} change={this.props.onChange('symptom')} />\r\n        <br/>\r\n        {this.renderProbability()}\r\n        {this.renderCause()}\r\n        {this.renderExactOrRange()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderProbability() {\r\n    let state = ((this.props.state: any): SymptomState);\r\n    if (!state.probability) {\r\n      return (\r\n        <div>\r\n          Probability: <RIENumber className='editable-text' value={1} propName={'probability'} editProps={{step: .01, min: 0, max: 1}} change={this.props.onChange('probability')} format={this.formatAsPercentage} validate={this.checkInRange} classInvalid=\"invalid\" />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Probability: <RIENumber className='editable-text' value={state.probability} propName={'probability'} editProps={{step: .01, min: 0, max: 1}} change={this.props.onChange('probability')} format={this.formatAsPercentage} validate={this.checkInRange} classInvalid=\"invalid\"/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  checkInRange(num: number) {\r\n    return ((num >= 0) && (num <= 1));\r\n  }\r\n\r\n  formatAsPercentage(num: number) {\r\n    return (num * 100) + \"%\";\r\n  }\r\n\r\n  renderCause() {\r\n    let state = ((this.props.state: any): SymptomState);\r\n    if (!state.cause) {\r\n      return (\r\n        <div>\r\n          Cause: <RIEInput className='editable-text' value={this.props.moduleName} propName={'cause'} change={this.props.onChange('cause')} />\r\n          <br/>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Cause: <RIEInput className='editable-text' value={state.cause} propName={'cause'} change={this.props.onChange('cause')} />\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderExactOrRange() {\r\n    let state = ((this.props.state: any): SymptomState);\r\n    if (state.exact) {\r\n      return (\r\n        <div className='section'>\r\n          Exact Quantity: <RIENumber className='editable-text' value={state.exact.quantity} propName='quantity' change={this.props.onChange('exact.quantity')} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.Range')}}); this.props.onChange('exact')({val: {id: null}})}}>Change to Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n    else {\r\n      return (\r\n        <div className='section'>\r\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\r\n          <br />\r\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.Exact')}}); this.props.onChange('range')({val: {id: null}})}}>Change to Exact</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass Death extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): DeathState);\r\n    return (\r\n      <div>\r\n        {this.renderExactOrRange()}\r\n        {this.renderCodes()}\r\n        {this.renderConditionOnset()}\r\n        {this.renderReferencedByAttribute()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderExactOrRange() {\r\n    let state = ((this.props.state: any): DeathState);\r\n    if (state.exact) {\r\n      return (\r\n        <div className='section'>\r\n          Exact Quantity: <RIENumber className='editable-text' value={state.exact.quantity} propName='quantity' change={this.props.onChange('exact.quantity')} />\r\n          <br />\r\n          Exact Unit: <RIESelect className='editable-text' value={{id: state.exact.unit, text: state.exact.unit}} propName=\"unit\" change={this.props.onChange('exact.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.RangeWithUnit')}}); this.props.onChange('exact')({val: {id: null}})}}>Change to Range</a>\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: null}}); this.props.onChange('exact')({val: {id: null}})}}>Remove Exact/Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n    else if (state.range) {\r\n      return (\r\n        <div className='section'>\r\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\r\n          <br />\r\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\r\n          <br />\r\n          Range Unit: <RIESelect className='editable-text' value={{id: state.range.unit, text: state.range.unit}} propName=\"unit\" change={this.props.onChange('range.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.ExactWithUnit')}}); this.props.onChange('range')({val: {id: null}})}}>Change to Exact</a>\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: null}}); this.props.onChange('exact')({val: {id: null}})}}>Remove Exact/Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.ExactWithUnit')}}); this.props.onChange('range')({val: {id: null}})}}>Add Exact/Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCodes() {\r\n    let state = ((this.props.state: any): DeathState);\r\n    if (!state.codes) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderConditionOnset() {\r\n    let state = ((this.props.state: any): DeathState);\r\n    let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n    let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n    if (!state.condition_onset) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('condition_onset')({val: {id: \"text\"}})}>Add Condition Onset</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Condition Onset: <RIESelect className='editable-text' value={{id: state.condition_onset, text: state.condition_onset}} propName={'condition_onset'}  change={this.props.onChange('condition_onset')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('condition_onset')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReferencedByAttribute() {\r\n    let state = ((this.props.state: any): DeathState);\r\n    if (!state.referenced_by_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Referenced by Attribute: <RIEInput className='editable-text' value={state.referenced_by_attribute} propName={'referenced_by_attribute'}  change={this.props.onChange('referenced_by_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default StateEditor;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIEInput, RIETextArea } from 'riek';\r\n\r\nimport './ModuleProperties.css';\r\n\r\nimport type { Module } from './types/Module';\r\n\r\ntype Props = {\r\n  module: Module,\r\n  onRemarksChange: (selectedModuleIndex: number, newName: string) => mixed\r\n}\r\n\r\nclass ModulePropertiesEditor extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.onRemarksChange = this.onRemarksChange.bind(this);\r\n  }\r\n\r\n  onRemarksChange(remarks) {\r\n    this.props.onRemarksChange(remarks)\r\n  }\r\n\r\n  render() {\r\n    let remarks = \"No remarks.\" \r\n    if(Array.isArray(this.props.module.remarks)){ \r\n      remarks = this.props.module.remarks.join(\"\\n\");\r\n    }\r\n\r\n    // NOTE: WHAT IF REMARKS SET TO BLANK?\r\n\r\n    return (\r\n      <div className='ModuleProperties'>\r\n        <div className='Editor-panel-title'> \r\n           Module Remarks\r\n        </div>\r\n        <div className='ModuleProperties-remarks'>\r\n          <RIETextArea value={remarks} propName=\"remarks\" change={(newval) => this.onRemarksChange(newval.remarks)} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ModulePropertiesEditor;\r\n","// @flow\r\nimport type { Module } from './types/Module';\r\nimport type { State } from './types/State';\r\n\r\nimport { cleanString } from '../utils/stringUtils';\r\n\r\nconst STANDARD_COLOR = 'Black';\r\n/*\r\nconst HIGHLIGHT_COLOR = '#007bff';\r\nconst MUTED_COLOR = '#CCCCCC'\r\n*/\r\n\r\nexport function generateDOT(module: Module, selectedState: State, selectedStateTransition: Number) {\r\n\r\n  let relatedStates = {};\r\n\r\n  if(selectedState) {\r\n    Object.keys(module.states).forEach( key => {\r\n      let state = module.states[key];\r\n\r\n      let allTransitions = findTransitions(module.states[key])\r\n\r\n      if(allTransitions[selectedState.name]){\r\n        relatedStates[state.name] = true;\r\n      }\r\n\r\n    });\r\n\r\n    relatedStates = Object.assign({}, relatedStates, findTransitions(module.states[selectedState.name]))\r\n\r\n  }\r\n\r\n  let output =  ['digraph G {',\r\n          nodesAsDOT(module, selectedState, relatedStates),\r\n          transitionsAsDOT(module, selectedState, selectedStateTransition),\r\n         '}'\r\n         ].join('\\n');\r\n\r\n  return output;\r\n\r\n}\r\n\r\nconst nodesAsDOT = (module: Module, selectedState: State, relatedStates: mixed) => {\r\n\r\n  return Object.keys(module.states).filter(name => typeof module.states[name] === 'object').map( name => {\r\n\r\n    let state = module.states[name]\r\n    state['name'] = name\r\n\r\n    let node = {\r\n      id: 'node_' + escapeId(name),\r\n      shape: 'record',\r\n      style: 'rounded,filled',\r\n      fillcolor: 'White',\r\n      fontcolor: STANDARD_COLOR\r\n    }\r\n\r\n    if(state['type'] === 'Initial' || state['type'] === 'Terminal'){\r\n        node['fillcolor'] = 'Grey'\r\n        node['style'] = 'rounded,filled'\r\n        node['fontcolor'] = 'White'\r\n    }\r\n\r\n    if(selectedState && state.name === selectedState.name){\r\n      node['fillcolor'] = 'White'\r\n      node['class'] = 'node-highlighted'\r\n    } else if (selectedState && !relatedStates[state.name]){\r\n      node['class'] = 'node-muted'\r\n    }\r\n\r\n    let details = stateDescription(state)\r\n    if(details.length === 0){\r\n      node['label'] = (name === state['type']) ? state['name'] : `{ ${name} | ${state['type']} }`\r\n    } else {\r\n      node['label'] = `{ ${name} | { ${state['type']} | ${details} } }`\r\n    }\r\n\r\n    node['label'] = escapeLabel(node['label']);\r\n\r\n    let params = Object.keys(node).map((key) => `${key} = \"${node[key]}\"`).join(\", \");\r\n\r\n    return `\"${escapeName(name)}\" [${params};]`\r\n\r\n  }).join(\"\\n\");\r\n\r\n}\r\n\r\nconst transitionsAsDOT = (module: Module, selectedState: State, selectedStateTransition: Number) => {\r\n\r\n  return Object.keys(module.states).map( name => {\r\n\r\n    let state = module.states[name]\r\n    let escapedName = escapeName(name);\r\n\r\n    let className='';\r\n\r\n    if(!!selectedState){\r\n      className = 'transition-muted'\r\n    }\r\n\r\n    if(selectedState && selectedState.name === name){\r\n      className='transition-highlighted'\r\n    }\r\n\r\n    if(state.direct_transition !== undefined){\r\n      if(selectedState && state.direct_transition === selectedState.name && selectedState.name !== name){\r\n        className='';\r\n      }\r\n\r\n      if(selectedStateTransition === 0 ){\r\n        className += ' transition-selected';\r\n      }\r\n\r\n      if(module.states[state.direct_transition]){\r\n        return `  \"${escapedName}\" -> \"${escapeName(module.states[state.direct_transition].name)}\" [class = \"transition transition-index_0 ${className}\"];\\n`\r\n      } else {\r\n        console.log(`NO SUCH NODE TO TRANSITION TO: ${state.direct_transition} FROM ${name}`);\r\n      }\r\n    } else if(state.distributed_transition !== undefined){\r\n      let out_transitions = ''\r\n      state.distributed_transition.forEach( (t, i) => {\r\n        let transitionClassName = className\r\n        let distLabel = ''\r\n        if(typeof t.distribution === 'object'){\r\n          distLabel = `p(${t.distribution.attribute})`\r\n          if(t.distribution.default){\r\n            let pct = t.distribution.default * 100\r\n            distLabel += `, default ${pct}%`\r\n          }\r\n        } else {\r\n          let pct = t.distribution * 100\r\n          distLabel = `${pct}%`\r\n        }\r\n        if(module.states[t.transition]){\r\n          if(selectedState && t.transition === selectedState.name && selectedState.name !== name){\r\n            transitionClassName = '';\r\n          }\r\n\r\n          if(selectedStateTransition === i){\r\n            transitionClassName += ' transition-selected';\r\n          }\r\n          out_transitions += `  \"${escapedName}\" -> \"${escapeName(module.states[t.transition].name)}\" [label = \"${distLabel}\", class = \"transition transition-index_${i} ${transitionClassName}\"];\\n`\r\n        } else {\r\n          console.log(`NO SUCH NODE TO TRANSITION TO: ${t.transition} FROM ${name}`);\r\n        }\r\n      })\r\n      return out_transitions\r\n    } else if (state.conditional_transition !== undefined){\r\n      let out_transitions = ''\r\n      state.conditional_transition.forEach( (t, i ) => {\r\n        let transitionClassName = className\r\n        let cnd = t.condition !== undefined ? logicDetails(t.condition) : 'else';\r\n        if(module.states[t.transition]){\r\n          if(selectedState && t.transition === selectedState.name){\r\n            transitionClassName = ''\r\n          }\r\n          if(selectedStateTransition === i){\r\n            transitionClassName += ' transition-selected';\r\n          }\r\n          out_transitions += `  \"${escapedName}\" -> \"${escapeName(module.states[t.transition].name)}\" [label = \"${i+1}. ${cnd}\", class = \"transition transition-index_${i} ${transitionClassName}\"];\\n`\r\n        } else {\r\n          console.log(`NO SUCH NODE TO TRANSITION TO: ${t.transition} FROM ${name}\\n`);\r\n        }\r\n      })\r\n     return out_transitions\r\n\r\n    } else if (state.complex_transition !== undefined){\r\n      let transitions = {}\r\n      let nodeHighlighted = {}\r\n      state.complex_transition.forEach( (t, i) => {\r\n        let cnd = t.condition !== undefined ? logicDetails(t['condition']) : 'else'\r\n        if(t.transition !== undefined){\r\n          if(module.states[t.transition]){\r\n            let nodes = `  \"${escapedName}\" -> \"${t.transition}\"`\r\n            if(selectedState && t.transition === selectedState.name){\r\n              nodeHighlighted[nodes] = 'standard'\r\n            }\r\n            if(selectedState && name === selectedState.name){\r\n              nodeHighlighted[nodes] = 'highlighted'\r\n            }\r\n            if(transitions[nodes] === undefined){\r\n              transitions[nodes] = [];\r\n            }\r\n            transitions[nodes].push(cnd)\r\n          } else {\r\n            console.log(`NO SUCH NODE TO TRANSITION TO: ${t.transition} FROM ${name}`);\r\n          }\r\n        } else {\r\n          t.distributions.forEach( dist => {\r\n            if(module.states[dist.transition]){\r\n              let pct = dist.distribution * 100\r\n              let nodes = `  \"${escapedName}\" -> \"${dist.transition}\"`\r\n              if(selectedState && dist.transition === selectedState.name){\r\n                nodeHighlighted[nodes] = 'standard'\r\n              }\r\n              if(selectedState && name === selectedState.name){\r\n                nodeHighlighted[nodes] = 'highlighted'\r\n              }\r\n              if(transitions[nodes] === undefined){\r\n                transitions[nodes] = [];\r\n              }\r\n              transitions[nodes].push(`${cnd}: ${pct}%`)\r\n            } else {\r\n              console.log(`NO SUCH NODE TO TRANSITION TO: ${dist.transition} FROM ${name}`);\r\n            }\r\n          })\r\n        }\r\n      })\r\n\r\n      let out_transitions = ''\r\n      Object.keys(transitions).forEach( (trans, index) => {\r\n        let transitionClassName = className\r\n        if(nodeHighlighted[trans] === 'standard'){\r\n          transitionClassName = ''\r\n        } else if(nodeHighlighted[trans] === 'highlighted'){\r\n          transitionClassName='transition-highlighted'\r\n        }\r\n        if(selectedStateTransition === index){\r\n          transitionClassName += ' transition-selected';\r\n        }\r\n        out_transitions += `${trans} [label = \"${transitions[trans].join(',\\\\n')}\", class = \"transition transition-index_${index} ${transitionClassName}\"]\\n`\r\n      })\r\n\r\n      return out_transitions;\r\n\r\n    }\r\n\r\n    return ''\r\n\r\n  }).join('')\r\n\r\n}\r\n\r\nconst stateDescription = (state) =>{\r\n\r\n  let details = ''\r\n\r\n  switch(state['type']){\r\n    case 'Initial':\r\n    case 'Terminal':\r\n      details = ''\r\n      break;\r\n    case 'Guard':\r\n      details = \"Allow if \" + logicDetails(state['allow'])\r\n      break;\r\n\r\n    case 'Delay':\r\n    case 'Death':\r\n      if(state['range'] !== undefined){\r\n        let r = state['range']\r\n        details = `${r['low']} - ${r['high']} ${r['unit']}`\r\n      } else if (state['exact'] !== undefined) {\r\n        let e = state['exact']\r\n        details = `${e['quantity']} ${e['unit']}`\r\n      }\r\n      break;\r\n    case 'Encounter':\r\n      if(state['wellness']){\r\n        details = 'Wait for regularly scheduled wellness encounter\\\\n'\r\n      }\r\n      break;\r\n    case 'EncounterEnd':\r\n      details = 'End the current encounter'\r\n      if(state['discharge_disposition']){\r\n       let code = state['discharge_disposition']\r\n       details += `\\\\lDischarge Disposition: [${code['code']}] ${code['display']}`\r\n      }\r\n      break;\r\n    case 'SetAttribute':\r\n      let v = state['value']\r\n      details = `Set '${state[\"attribute\"]}' = ${(v === undefined || v === null || v === \"\") ? 'nil' : v}`\r\n      break;\r\n    case 'Symptom':\r\n     let s = state['symptom']\r\n     let p = state['probability']\r\n      if(state.range !== undefined){\r\n        let r = state['range']\r\n        details = `${s}: ${r['low']} - ${r['high']}`\r\n      } else if (state.exact !== undefined) {\r\n        let e = state['exact']\r\n        details = `${s}: ${e['quantity']}`\r\n      }\r\n      if (p && p < 1.0 && p > 0) {\r\n        let pct = p*100;\r\n        details += ` (${pct}%)`\r\n      }\r\n      break;\r\n    case 'Observation':\r\n      let unit = state['unit']\r\n      if(unit){\r\n        unit = \"in \" + unit.replace('{','(').replace('}',')')\r\n      }\r\n\r\n      if(state.vital_sign !== undefined) {\r\n        details = `Record value from Vital Sign '${state[\"vital_sign\"]}' ${unit}\\\\l`\r\n      } else if (state.attribute !== undefined) {\r\n        details = `Record value from Attribute '${state[\"attribute\"]}' ${unit}\\\\l`\r\n      } else if(state.range !== undefined){\r\n        let r = state['range']\r\n        details = `Record value between: ${r['low']} - ${r['high']} ${unit}\\\\l`\r\n      } else if (state.exact !== undefined) {\r\n        let e = state['exact']\r\n        details = `Record value ${e['quantity']} ${unit}\\\\l`\r\n      } else if (state.value_code !== undefined) {\r\n        let v = state['value_code']\r\n        details = `Record value ${v['system']}[${v['code']}]: ${v['display']}\\\\l`\r\n      }\r\n      break;\r\n\r\n    case 'ImagingStudy':\r\n      let series = state['series'];\r\n      if (series.length > 0) {\r\n        let primarySeries = series[0];\r\n        let primaryModality = primarySeries['modality'];\r\n        let primaryBodySite = primarySeries['body_site'];\r\n\r\n        details = `DICOM-DCM[${primaryModality['code']}]: ${primaryModality['display']}\\\\l`\r\n        details += `SNOMED-CT[${primaryBodySite['code']}]: Body Site: ${primaryBodySite['display']}\\\\l`\r\n      }\r\n      break;\r\n\r\n    case 'Counter':\r\n      details = `${state['action']} value of attribute '${state[\"attribute\"]}' by 1`\r\n      break;\r\n    case 'VitalSign':\r\n      let vs = state['vital_sign']\r\n      let unitv = state['unit']\r\n      if(state.range !== undefined){\r\n        let r = state['range']\r\n        details = `Set ${vs}: ${r['low']} - ${r['high']} ${unitv}`\r\n      } else if (state.exact !== undefined) {\r\n        let e = state['exact']\r\n        details = `Set ${vs}: ${e['quantity']} ${unitv}`\r\n      }\r\n      break;\r\n    case 'CallSubmodule':\r\n      details = `Call submodule '${state['submodule']}'`\r\n      break;\r\n    case 'MultiObservation':\r\n    case 'DiagnosticReport':\r\n      if(state.observations && state.observations.length > 0){\r\n        let diagType = ['Type']\r\n        let diagValue = ['Value']\r\n        let diagUnits = ['Unit'];\r\n        state.observations.forEach( (s,i) => {\r\n          let unit = s['unit']\r\n          if(unit){\r\n            unit = unit.replace('{','(').replace('}',')')\r\n          }\r\n          diagType.push(s.codes.map(c => c.display).join('\\\\l'))\r\n          diagUnits.push(unit)\r\n\r\n          if(s.vital_sign !== undefined) {\r\n            diagValue.push(`Vital Sign: '${s[\"vital_sign\"]}'`)\r\n          } else if (s.attribute !== undefined) {\r\n            diagValue.push(`Attribute: '${s[\"attribute\"]}'`)\r\n          } else if(s.range !== undefined){\r\n            let r = s['range']\r\n            diagValue.push(`${r['low']} - ${r['high']}`)\r\n          } else if (s.exact !== undefined) {\r\n            let e = s['exact']\r\n            diagValue.push(`${e['quantity']}`);\r\n          } else if (s.value_code !== undefined) {\r\n            let v = s['value_code']\r\n            diagValue.push(`${v['system']}[${v['code']}]: ${v['display']}`);\r\n          }\r\n        });\r\n        details += `{${diagType.map(t => t).join('|')}}|`;\r\n        details += `{${diagValue.map(t => t).join('|')}}|`;\r\n        details += `{${diagUnits.map(t => t).join('|')}}|`;\r\n      } else {\r\n        details = `No Observations\\\\l`;\r\n      }\r\n\r\n      break;\r\n    default:\r\n      break;\r\n\r\n  }\r\n\r\n  if(state.codes !== undefined){\r\n    state['codes'].forEach( code => {\r\n      details = details + code['system'] + \"[\" + code['code'] + \"]: \" + code['display'] + \"\\\\l\"\r\n    })\r\n  }\r\n\r\n  if(state.target_encounter !== undefined){\r\n   let verb = 'Perform'\r\n\r\n    switch(state['type']){\r\n      case 'ConditionOnset':\r\n      case 'AllergyOnset':\r\n        verb = 'Diagnose'\r\n        break;\r\n      case 'MedicationOrder':\r\n        verb = 'Prescribe'\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    details = details + verb + \" at \" + state['target_encounter'] + \"\\\\l\"\r\n  }\r\n\r\n  if(state.reason){\r\n    details = details + `Reason: ${state['reason']}\\\\l`\r\n  }\r\n  if(state.medication_order){\r\n    details = details + `Prescribed at: ${state['medication_order']}\\\\l`\r\n  }\r\n  if(state.condition_onset){\r\n    details = details + `Onset at: ${state['condition_onset']}\\\\l`\r\n  }\r\n  if(state.allergy_onset){\r\n    details = details + `Onset at: ${state['allergy_onset']}\\\\l`\r\n  }\r\n  if(state.careplan){\r\n    details = details + `Prescribed at: ${state['careplan']}\\\\l`\r\n  }\r\n  if(state.assign_to_attribute){\r\n    details = details + `Assign to Attribute: '${state['assign_to_attribute']}'\\\\l`\r\n  }\r\n  if(state.administration){\r\n    details = details + `Medication is administered\\\\l`\r\n  }\r\n  if(state.referenced_by_attribute){\r\n    details = details + `Referenced By Attribute: '${state['referenced_by_attribute']}'\\\\l`\r\n  }\r\n  if(state.activities){\r\n    details = details + \"\\\\lActivities:\\\\l\"\r\n    state['activities'].forEach( activity => {\r\n      details = details + activity['system'] + \"[\" + activity['code'] + \"]: \" + activity['display'] + \"\\\\l\"\r\n    })\r\n  }\r\n  if(state.goals){\r\n    details = details + \"\\\\lGoals:\\\\l\"\r\n    state['goals'].forEach( goal => {\r\n      if(goal['text']){\r\n        details = details + goal['text'] + \"\\\\l\"\r\n      } else if(goal['codes']) {\r\n        let code = goal['codes'][0]\r\n        details = details + code['system'] + \"[\" + code['code'] + \"]: \" + code['display'] + \"\\\\l\"\r\n      } else if(goal['observation']) {\r\n        let logic = goal['observation']\r\n        let obs = findReferencedType(logic)\r\n        details = details + `Observation ${obs} \\\\${logic['operator']}${leaveUndefinedBlank(logic['value'])}\\\\l`\r\n      }\r\n    })\r\n  }\r\n  if(state.duration){\r\n    let d = state['duration']\r\n    details = `${details}\\\\lDuration: ${d['low']} - ${d['high']} ${d['unit']}\\\\l`\r\n  }\r\n  if(state.category){\r\n    details = `${details}Category: ${state['category']}\\\\l`\r\n  }\r\n\r\n  return details;\r\n}\r\n\r\nconst logicDetails = logic => {\r\n\r\n  switch(logic['condition_type']){\r\n    case 'And':\r\n    case 'Or':\r\n      let subsWhen =logic['conditions'].map( c => {\r\n        if(c['condition_type'] === 'and' || c['condition_type'] === 'or'){\r\n          return \"(\\\\l\" + logicDetails(c) + \")\\\\l\"\r\n        } else {\r\n          return logicDetails(c)\r\n        }\r\n      })\r\n      return subsWhen.join(logic['condition_type'].toLowerCase() + ' ')\r\n    case 'At Least':\r\n    case 'At Most':\r\n      let threshold = logic['minimum'] || logic['maximum']\r\n      let subsOr = logic['conditions'].map( c => {\r\n        if(c['condition_type'] === 'and' || c['condition_type'] === 'or'){\r\n          return \"(\\\\l\" + logicDetails(c) + \")\\\\l\"\r\n        } else {\r\n          return logicDetails(c)\r\n        }\r\n      });\r\n      return `${logic['condition_type']} ${threshold} of:\\\\l- ${subsOr.join('- ')}`\r\n    case 'Not':\r\n      let condition = logicDetails(logic['condition'])\r\n      return `not ${condition}`\r\n    case 'Gender':\r\n      return `gender is '${logic['gender']}'\\\\l`\r\n    case 'Age':\r\n      return `age \\\\${logic['operator']} ${logic['quantity']} ${logic['unit']}\\\\l`\r\n    case 'Socioeconomic Status':\r\n      return `${logic['category']} Socioeconomic Status\\\\l`\r\n    case 'Race':\r\n      return `race is '${logic['race']}'\\\\l`\r\n    case 'Date':\r\n      if (logic.year !== undefined) {\r\n        return `Year is \\\\${logic['operator']} ${logic['year']}\\\\l`\r\n      } else if (logic.month !== undefined) {\r\n        return `Month is \\\\${logic['operator']} ${logic['month']}\\\\l`\r\n      } else if (logic.date !== undefined) {\r\n        let d = logic['date']\r\n        return `Date is \\\\${logic['operator']} ${d['year']}-${d['month']}-${d['day']} ${d['hour']}:${d['minute']}:${d['second']}.${d['millisecond']}\\\\l`\r\n      }\r\n    case 'Symptom':\r\n      return `Symptom: '${logic['symptom']}' \\\\${logic['operator']} ${logic['value']}\\\\l`\r\n    case 'PriorState':\r\n      let prior_description = `state '${logic['name']}' has been processed`\r\n      if(logic.since !== undefined){\r\n        prior_description = `${prior_description} since ${logic.since}`\r\n      }\r\n      if(logic.within !== undefined){\r\n        prior_description = `${prior_description} within ${logic.within['quantity']} ${logic.within['unit']}`\r\n      }\r\n      return `${prior_description} \\\\l`\r\n    case 'Attribute':\r\n      return `Attribute: '${logic['attribute']}' \\\\${logic['operator']}${leaveUndefinedBlank(logic['value'])}\\\\l`\r\n    case 'Observation':\r\n      let obs = findReferencedType(logic)\r\n      if (logic.operator !== 'is nil' && logic.operator !== 'is not nil' && logic.operator.id !== 'is nil' && logic.operator.id !== 'is not nil'){\r\n        if(logic.value !== undefined){\r\n          return `Observation ${obs} \\\\${logic['operator']}${leaveUndefinedBlank(logic['value'])}\\\\l`\r\n        } else if (logic.value_code !== undefined) {\r\n          return `Observation ${obs} \\\\${logic['operator']} ${logic.value_code['system']}[${logic.value_code['code']}]: ${logic.value_code['display']}\\\\l`\r\n        }\r\n      } else {\r\n        return `Observation ${obs} \\\\${logic['operator']}\\\\l`\r\n      }\r\n\r\n    case 'Vital Sign':\r\n      return `Vital Sign ${logic['vital_sign']} \\\\${logic['operator']} ${logic['value']}\\\\l`\r\n    case 'Active Condition':\r\n      let cond = findReferencedType(logic)\r\n      return `Condition ${cond} is active\\\\l`\r\n    case 'Active CarePlan':\r\n      let plan = findReferencedType(logic)\r\n      return `CarePlan ${plan} is active\\\\l`\r\n    case 'Active Medication':\r\n      let med = findReferencedType(logic)\r\n      return `Medication ${med} is active\\\\l`\r\n    case 'Active Allergy':\r\n      let alg = findReferencedType(logic)\r\n      return `Allergy ${alg} is active\\\\l`\r\n    case 'True':\r\n    case 'False':\r\n      return logic['condition_type']\r\n    default:\r\n      return `Unknown Condition: ${logic['condition_type']}`\r\n\r\n  }\r\n}\r\n\r\nconst findReferencedType = (logic) => {\r\n  if(logic['codes']){\r\n    let code = logic['codes'][0]\r\n    return `'${code['system']} [${code['code']}]: ${code['display']}'`\r\n  } else if (logic['referenced_by_attribute']) {\r\n    return `Referenced By Attribute: '${logic['referenced_by_attribute']}'`\r\n  }\r\n  return `Error with referenced types: ${logic['condition_type']} condition must be specified by code or attribute`\r\n}\r\n\r\nconst findTransitions = (obj, ret) => {\r\n\r\n  if(!ret) ret = {};\r\n  if (!obj) return ret;\r\n  if (obj instanceof Array) {\r\n    for (let i in obj) {\r\n        ret = Object.assign({}, ret, findTransitions(obj[i], {}))\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  if (obj['direct_transition']) ret[obj['direct_transition']] = true\r\n  if (obj['transition']) ret[obj['transition']] = true;\r\n\r\n  if ((typeof obj === \"object\") && (obj !== null) ){\r\n    let children = Object.keys(obj);\r\n    if (children.length > 0){\r\n      for (let i = 0; i < children.length; i++ ){\r\n        ret = Object.assign({}, ret,findTransitions(obj[children[i]], {}));\r\n      }\r\n    }\r\n  }\r\n  return ret;\r\n}\r\n\r\nconst leaveUndefinedBlank = (value) => {\r\n  if(value === undefined){\r\n    return '';\r\n  } else {\r\n    return ' ' + value;\r\n  }\r\n}\r\n\r\nconst escapeId = (name) => {\r\n  return cleanString(name, {'?': '', '\"': \"\"});\r\n};\r\n\r\nconst escapeName = (name) => {\r\n  return  cleanString(name, {'\"': '\\\\'});\r\n};\r\n\r\nconst escapeLabel = (label) => {\r\n\r\n  // note: order matters; in practice order is retained in browsers but we may want to make an array\r\n  const mapObj = {\r\n        \"&\" : \"&amp;\",\r\n        \"<\" : \"&lt;\",\r\n        \">\" : \"&gt;\",\r\n        '\"' : '\\\\\"',\r\n        };\r\n\r\n  return cleanString(label, mapObj);\r\n\r\n}\r\n\r\nexport const svgDefs = `<defs>\r\n\r\n  <filter id=\"outershadow\" height=\"200%\" width=\"200%\" x=\"-75%\" y=\"-75%\" color-interpolation-filters=\"sRGB\">\r\n    <feMorphology operator=\"dilate\" radius=\"3\" in=\"SourceAlpha\" result=\"thicken\" />\r\n    <feGaussianBlur in=\"thicken\" stdDeviation=\"4\" result=\"blurred\" />\r\n    <feFlood flood-color=\"#336699\" result=\"glowColor\" />\r\n    <feComposite in=\"glowColor\" in2=\"blurred\" operator=\"in\" result=\"glowComposite\" />\r\n    <feMerge>\r\n      <feMergeNode in=\"glowComposite\"/>\r\n      <feMergeNode in=\"SourceGraphic\"/>\r\n    </feMerge>\r\n  </filter>\r\n</defs>`;\r\n\r\n","// @flow\r\nimport React, { Component } from 'react';\r\n\r\nimport svgPanZoom from  'svg-pan-zoom';\r\n\r\nimport Viz from 'viz.js';\r\nimport {generateDOT,svgDefs} from '../../utils/graphviz';\r\n\r\nimport './ModuleGraph.css';\r\n\r\nimport type { Module } from './types/Module';\r\nimport type { State } from './types/State';\r\n\r\ntype Props = {\r\n  module: Module,\r\n  onClick: (id:string) => mixed,\r\n  selectedState: State\r\n}\r\n\r\nclass ModuleGraph extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.onPanZoom = this.onPanZoom.bind(this);\r\n    this.onMouseUp = this.onMouseUp.bind(this);\r\n    this.onMouseDown = this.onMouseDown.bind(this);\r\n    this.bold = false;\r\n    this.lastDOT = '';\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.writeSVG(this.props.module)\r\n    this.mount.addEventListener('mouseup', this.onMouseUp);\r\n    this.mount.addEventListener('mousedown', this.onMouseDown);\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps: Props){\r\n\r\n    if(nextProps.module.name !== this.props.module.name){\r\n      this.panZoomSettings = null\r\n    }\r\n\r\n    this.writeSVG(nextProps.module, nextProps.selectedState, nextProps.selectedStateTransition);\r\n\r\n    if(nextProps.fullscreen !== this.props.fullscreen){\r\n      if(nextProps.fullscreen){\r\n        this.svgPanZoom.panBy({x: 250, y: 0});\r\n        this.customPanBy({x: -100, y: 0})\r\n      }else{\r\n        this.svgPanZoom.panBy({x: -250, y: 0});\r\n        this.customPanBy({x: 100, y: 0})\r\n      }\r\n    }\r\n\r\n    if(this.panZoomSettings){\r\n      this.blockPanZoomEvent = true\r\n      this.svgPanZoom.zoom(this.panZoomSettings.zoom, true);\r\n      this.svgPanZoom.pan(this.panZoomSettings.pan, true);\r\n      this.blockPanZoomEvent = false\r\n    }\r\n\r\n  }\r\n\r\n  customPanBy(amount) { // {x: 1, y: 2}\r\n    var animationTime = 300 // ms\r\n      , animationStepTime = 15 // one frame per 30 ms\r\n      , animationSteps = animationTime / animationStepTime\r\n      , animationStep = 0\r\n      , intervalID = null\r\n      , stepX = amount.x / animationSteps\r\n      , stepY = amount.y / animationSteps\r\n\r\n    intervalID = setInterval(() => {\r\n      if (animationStep++ < animationSteps) {\r\n        if(this.svgPanZoom){\r\n        this.svgPanZoom.panBy({x: stepX, y: stepY})\r\n        }\r\n      } else {\r\n        // Cancel interval\r\n        clearInterval(intervalID)\r\n      }\r\n    }, animationStepTime)\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n        <div ref={mount => this.mount = mount } className={'Module ' + (this.props.fullscreen ? \"Module-fullscreen\" : 'Module-standard-screen')}>\r\n         <svg width=\"50000px\" height=\"50000px\" xmlns=\"http://www.w3.org/2000/svg\" style={{opacity: .3}}>\r\n           <defs>\r\n            <pattern id=\"smallGrid\" width=\"10\" height=\"10\" patternUnits=\"userSpaceOnUse\">\r\n              <path d=\"M 10 0 L 0 0 0 10\" fill=\"none\" stroke=\"#95b4cf\" strokeWidth=\"0.5\"/>\r\n            </pattern>\r\n            <pattern id=\"grid\" width=\"100\" height=\"100\" patternUnits=\"userSpaceOnUse\">\r\n              <rect width=\"100\" height=\"100\" fill=\"url(#smallGrid)\"/>\r\n              <path d=\"M 100 0 L 0 0 0 100\" fill=\"none\" stroke=\"#95b4cf\" strokeWidth=\"1\"/>\r\n            </pattern>\r\n          </defs>\r\n          <g>\r\n            <rect width=\"100%\" height=\"100%\" style={{\"transform\": \"translate(-50%, -50%)\"}} fill=\"url(#grid)\" />\r\n          </g>\r\n        </svg>\r\n        <div style={{\"position\":\"absolute\", \"top\": 0, \"left\": 0, \"width\": \"100%\", \"height\": '100%'}} className=\"Module-graph\">\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  onMouseUp(e) {\r\n    if(this.fireClickOnMouseUp){\r\n      this.props.onClick();\r\n    }\r\n  }\r\n  onMouseDown() {\r\n    this.fireClickOnMouseUp = true;\r\n  }\r\n\r\n  onPanZoom() {\r\n    if(this.blockPanZoomEvent) return;\r\n\r\n    this.fireClickOnMouseUp = false;\r\n    this.panZoomSettings = {pan: this.svgPanZoom.getPan(), zoom: this.svgPanZoom.getZoom()};\r\n\r\n    this.mount.children[0].children[1].setAttribute('transform', this.mount.children[1].children[0].children[1].attributes['transform'].value)\r\n\r\n    let linesShouldBold = Math.max(this.originalWidth, this.originalHeight) / this.svgPanZoom.getZoom() > 1500\r\n\r\n    if(linesShouldBold && !this.bold){\r\n      this.bold = true\r\n      this.mount.children[1].className = 'Module bold-lines'\r\n    } else if(!linesShouldBold && this.bold){\r\n      this.bold = false\r\n      this.mount.children[1].className = 'Module'\r\n    }\r\n\r\n  }\r\n\r\n  writeSVG(module: Module, selectedState: State, selectedStateTransition: Number){\r\n\r\n    const dot = generateDOT(module, selectedState, (selectedStateTransition: Number));\r\n    if(dot === this.lastDOT){\r\n      return;\r\n    }\r\n\r\n    this.lastDOT = dot;\r\n\r\n    /* write SVG */\r\n    try {\r\n      this.mount.children[1].innerHTML= Viz(dot).replace('</svg>', svgDefs + '</svg>');\r\n    } catch (ex) {\r\n      alert('Invalid module: ' + ex.message)\r\n      this.mount.children[1].innerHTML = `<svg width=\"10px\" height=\"10px\"/>`;\r\n    }\r\n\r\n    let svg = this.mount.children[1].children[0]\r\n\r\n    /* Add event handlers for states */\r\n    Object.keys(module.states).forEach( s => {\r\n      let el = document.getElementById(`node_${s.replace('?','')}`);     \r\n\r\n      if(el){\r\n        // force rerender because of a pan bug\r\n        el.addEventListener('mouseup', (e) => {this.lastDOT = null;e.stopPropagation(); this.props.onClick(s)});\r\n\r\n        if(selectedState && s === selectedState.name){\r\n          // assume path is at index 1 to speed things up.  bad assumption?\r\n          el.children[1].setAttribute('filter', 'url(#outershadow)')\r\n        } else {\r\n          el.children[1].removeAttribute('filter')\r\n        }\r\n      }\r\n\r\n    })\r\n\r\n    // Removes the title elmeent generated by graph viz that causes a \"G\" to always show on mouse hover\r\n    const unnecessaryGTitle = document.querySelector('svg > g > title');\r\n    if(unnecessaryGTitle){\r\n      unnecessaryGTitle.remove();\r\n    }\r\n\r\n    const unnecessaryFill = document.querySelector('svg > g > polygon');\r\n    if(unnecessaryFill){\r\n      unnecessaryFill.remove();\r\n    }\r\n\r\n    /* Add event handlers for transitions, and increase their 'hit box' size */\r\n    document.querySelectorAll('.edge.transition').forEach( group => {\r\n      let originator = group.querySelector('title').innerHTML.split('-&gt;')[0]\r\n      let hitLine = group.querySelector('path').cloneNode(true)\r\n      let transitionIndex = null;\r\n      let transitionIndexClass = group.className.baseVal.split(' ').find(t => t.startsWith('transition-index'));\r\n      if(transitionIndexClass){\r\n        try{\r\n          transitionIndex = parseInt(transitionIndexClass.split('_')[1])\r\n        } catch(e){\r\n          // just ignore if not a number\r\n        }\r\n\r\n      }\r\n      hitLine.setAttribute('class', 'transition-hitbox');\r\n      hitLine.setAttribute('stroke-width', 20)\r\n      hitLine.setAttribute('opacity', 0)\r\n      group.appendChild(hitLine)\r\n\r\n      group.querySelectorAll('path,text').forEach( path => {\r\n        // force rerender because of a pan bug\r\n        path.addEventListener('mouseup', (e) => {this.lastDOT = null;e.stopPropagation(); this.props.onClick(originator, transitionIndex)});\r\n      })\r\n    })\r\n\r\n    /* Bump the transition labels to the right because it is too crowded */\r\n    document.querySelectorAll('svg .edge text').forEach(t => t.setAttribute('x', parseFloat(t.getAttribute('x'))+5))\r\n\r\n    /* add pan/zoom if available */\r\n    if(typeof svgPanZoom === \"function\"){\r\n\r\n      this.originalWidth = svg.attributes.width.value.match(/\\d+/g).map(Number)[0];\r\n      this.originalHeight = svg.attributes.height.value.match(/\\d+/g).map(Number)[0];\r\n\r\n      let offsetLeft = this.mount.children[1].getBoundingClientRect().x\r\n      let offsetTop = this.mount.children[1].getBoundingClientRect().y\r\n      let visibleWidth = this.mount.children[1].getBoundingClientRect().width - offsetLeft;\r\n      let visibleHeight = this.mount.children[1].getBoundingClientRect().height - offsetTop;\r\n\r\n      this.mount.children[1].children[0].setAttribute('width', '100%')\r\n      this.mount.children[1].children[0].setAttribute('height', '100%')\r\n\r\n      let zoomFactor = 1\r\n\r\n      if(this.originalWidth / this.originalHeight > visibleWidth / visibleHeight){\r\n        //width constrained\r\n        zoomFactor = visibleWidth / this.originalWidth;\r\n      } else {\r\n        //height constrained\r\n        zoomFactor = visibleHeight / this.originalHeight;\r\n      }\r\n\r\n      this.svgPanZoom = svgPanZoom(this.mount.children[1].children[0],{\r\n          controlIconsEnabled: false, // BUGGY BECAUSE OF EVENT HANDLERS \r\n          minZoom: .1,\r\n          onPan: this.onPanZoom,\r\n          onZoom: this.onPanZoom,\r\n        });\r\n\r\n      let panZoomControlsElement = document.getElementById('svg-pan-zoom-controls');\r\n\r\n      if(panZoomControlsElement){\r\n        /* DISABLED BECAUSE BUGGY WITH OTHER EVENT HANDLERS */\r\n        panZoomControlsElement.setAttribute(\"transform\", `translate(${visibleWidth-100} ${visibleHeight-150}) scale(.75)`)\r\n        document.getElementById('svg-pan-zoom-zoom-in').addEventListener('mouseup', (e) => {this.svgPanZoom.zoomIn()});\r\n        document.getElementById('svg-pan-zoom-zoom-out').addEventListener('mouseup', (e) => {this.svgPanZoom.zoomOut()});\r\n        document.getElementById('svg-pan-zoom-reset-pan-zoom').addEventListener('mouseup', (e) => {\r\n          e.stopPropagation();\r\n          this.svgPanZoom.pan({x: this.svgPanZoom.getPan().x - offsetLeft/2 , y: 50}, true)\r\n          this.svgPanZoom.zoom(Math.pow(.8,zoomFactor), true);\r\n        });\r\n      }\r\n\r\n      if(!this.panZoomSettings){\r\n        /* first time load of module */\r\n        /* center and bump down a bit */\r\n        this.svgPanZoom.pan({x: this.svgPanZoom.getPan().x - offsetLeft/2 , y: 50}, true)\r\n        this.svgPanZoom.zoom(Math.pow(.8,zoomFactor), true);\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport default ModuleGraph;\r\n","import React, {useMemo} from 'react';\r\nimport {useDropzone} from 'react-dropzone';\r\n\r\nconst baseStyle = {\r\n  flex: 1,\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  alignItems: 'center',\r\n  padding: '25px',\r\n  borderWidth: 2,\r\n  borderRadius: '5px',\r\n  marginBottom: '15px',\r\n  borderColor: '#666666',\r\n  borderStyle: 'dashed',\r\n  backgroundColor: '#ffffff',\r\n  outline: 'none',\r\n  transition: 'border .15s ease-in-out'\r\n};\r\n\r\nconst activeStyle = {\r\n  borderColor: '#336699',\r\n  backgroundColor: '#dceaef',\r\n  color: '#336699'\r\n};\r\n\r\nconst acceptStyle = {\r\n  borderColor: '#339999',\r\n  cursor: 'hand'\r\n};\r\n\r\nconst rejectStyle = {\r\n  borderColor: '#ff1744',\r\n  backgroundColor: '#ffeeee',\r\n  cursor: 'no-drop'\r\n};\r\n\r\nfunction StyledDropzone(props) {\r\n  const {\r\n    getRootProps,\r\n    getInputProps,\r\n    isDragActive,\r\n    isDragAccept,\r\n    isDragReject\r\n  } = useDropzone({accept: 'application/json',onDrop:props.onDrop});\r\n\r\n  const style = useMemo(() => ({\r\n    ...baseStyle,\r\n    ...(isDragActive ? activeStyle : {}),\r\n    ...(isDragAccept ? acceptStyle : {}),\r\n    ...(isDragReject ? rejectStyle : {})\r\n  }), [\r\n    isDragActive,\r\n    isDragReject\r\n  ]);\r\n\r\n  return (\r\n    <div className=\"LoadModule-dropzone\">\r\n      <div {...getRootProps({style})}>\r\n        <input {...getInputProps()} />\r\n        <p>Drop files here or click to open saved modules.</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StyledDropzone;\r\n","import React, { Component } from 'react';\r\nimport './LoadModule.css';\r\nimport {generateDOT} from '../../utils/graphviz';\r\nimport StyledDropzone from './StyledDropZone';\r\n\r\nclass LoadModule extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {json: '', selectedOption: 'core'}\r\n  }\r\n\r\n  loadModule = (json) => {\r\n    try {\r\n      let module = JSON.parse(json)\r\n\r\n      if(module.name === undefined){\r\n        throw new Error('Module must have a name.')\r\n      }\r\n\r\n      if(module.states === undefined || Object.keys(module.states).length === 0){\r\n        throw new Error('Module must have at least one state.')\r\n      }\r\n\r\n      // this will throw an error if the module is incomprehensible\r\n      let dot = generateDOT(module);\r\n\r\n      this.props.newModule(module)\r\n      this.setState({...this.state, json: '', selectedOption: 'core'})\r\n\r\n    } catch (ex) {\r\n      alert('Error creating module: ' + ex.message);\r\n    }\r\n\r\n  }\r\n\r\n  onClick = (key) => {\r\n    return () => {\r\n      this.setState({...this.state, json: '', selectedOption: 'core'})\r\n      this.props.push('#' + key);   \r\n    }\r\n  }\r\n\r\n  onDrop = (files) => {\r\n    files.forEach(file => {\r\n      const reader = new FileReader();\r\n\r\n      reader.onload = () => {\r\n        this.loadModule(reader.result);\r\n      };\r\n      reader.readAsText(file);\r\n    });\r\n  }\r\n\r\n  onLoadJSON = () => {\r\n    this.loadModule(this.state.json);\r\n  };\r\n\r\n  onOptionClick = (key) =>{\r\n    return () => {\r\n      this.setState({...this.state, selectedOption: key});\r\n    }\r\n  }\r\n\r\n  updateJson = (event) => {\r\n    this.setState({...this.state, json: event.target.value})\r\n  }\r\n\r\n  renderFooter = () => {\r\n    let loadButton = <span/>\r\n    if(this.state.selectedOption === 'json'){\r\n        loadButton = <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={this.onLoadJSON}>Load</button>\r\n    }\r\n    let closeButton = <span/>\r\n    if(!this.props.welcome){\r\n      closeButton = <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={this.props.onHide}>Close</button>\r\n    }\r\n\r\n    return <div className=\"modal-footer\" style={{height: 69}}>\r\n      {loadButton}\r\n      {closeButton}\r\n    </div>\r\n\r\n  }\r\n\r\n  renderDetails = () => {\r\n\r\n    switch(this.state.selectedOption){\r\n      case 'core':\r\n        return (\r\n          <ul className='LoadModule-list'>\r\n            { Object.keys(this.props.library).filter(n => (n.indexOf('/') === -1)).map( (key, index) => {\r\n              let module = this.props.library[key]\r\n              return (\r\n                <li key={key}><button className='btn btn-link' onClick={this.onClick(key)}>{module.name}</button></li>\r\n              )\r\n            })}\r\n          </ul>\r\n        )\r\n\r\n      case 'submodules':\r\n        return (\r\n          <ul className='LoadModule-list'>\r\n            { Object.keys(this.props.library).filter(n => (n.indexOf('/') > -1)).map( (key, index) => {\r\n              let module = this.props.library[key]\r\n              return (\r\n                <li key={key}><button className='btn btn-link' onClick={this.onClick(key)}>{key.split('/')[0] + ': ' + module.name}</button></li>\r\n              )\r\n            })}\r\n          </ul>\r\n        )\r\n\r\n      case 'my':\r\n        return (\r\n          <ul className='LoadModule-list'>\r\n            { Object.keys(this.props.modules).map( (key, index) => {\r\n              let module = this.props.modules[key]\r\n              return (\r\n                <li key={key}><button className='btn btn-link' onClick={this.onClick(key)}>{module.name} ({key})</button></li>\r\n              )\r\n            })}\r\n          </ul>\r\n        )\r\n\r\n\r\n      case 'json':\r\n        return (\r\n          <textarea id='loadJSON' value={this.state.json} onChange={this.updateJson}></textarea>\r\n        )\r\n\r\n      case 'git':\r\n        let moduleList = null;\r\n        let submoduleList = null;\r\n        if (this.state.Modules) {\r\n          moduleList = (\r\n          <div className='col-4 nopadding'>\r\n            <ul className='LoadModule-list'>\r\n              {this.state.Folders}\r\n              {this.state.Modules}\r\n            </ul>\r\n          </div>\r\n          )\r\n          if (this.state.Submodules) {\r\n            submoduleList = (\r\n              <div className='col-4 nopadding'>\r\n                <ul className='LoadModule-list'>\r\n                  {this.state.Submodules}\r\n                </ul>\r\n              </div>\r\n            )\r\n          }\r\n        }\r\n        return(\r\n        <div className='row'>  \r\n          <ul className='LoadModule-list'>\r\n            {this.state.Branches}  \r\n          </ul>\r\n          {moduleList}\r\n          {submoduleList}\r\n        </div>  \r\n        )\r\n\r\n    default:\r\n      return;\r\n\r\n    }\r\n  }\r\n\r\n  changeColor(ID, type) {\r\n    document.getElementById(ID).style.backgroundColor = \"#ddd\";\r\n    let list = null\r\n    switch(type) {\r\n      case 'branch':\r\n        list = this.state.Branches\r\n        break;\r\n      case 'module':\r\n        list = this.state.Modules\r\n        break;\r\n      case 'folder':\r\n        list = this.state.Folders\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    list.forEach((i) => {\r\n      if (i.props.id !== ID) {\r\n        document.getElementById(i.props.id).style.backgroundColor = \"#eee\";\r\n      }\r\n    }) \r\n  }\r\n  \r\n  fetchBranchList() {\r\n    fetch(`https://api.github.com/repos/synthetichealth/synthea/branches`)\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      this.setState({\r\n        Branches: data.map((branch, i) => (\r\n          <li key={i} id={branch.name}><button className='btn btn-link' onClick={() => {this.changeColor(branch.name, 'branch');this.fetchModuleList(branch.name)}}>{branch.name}</button></li>\r\n        ))\r\n      })\r\n    })  \r\n    .catch(error => console.log('error: ', error)); \r\n  }\r\n\r\n  fetchModuleList(branch) {\r\n    this.setState({\r\n      currentBranch: branch\r\n    })\r\n    fetch(`https://api.github.com/repos/synthetichealth/synthea/contents/src/main/resources/modules?ref=` + branch)\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        let folders = data.filter(name => !name.name.includes(\".json\"))\r\n        let modules = data.filter(name => name.name.includes(\".json\"))\r\n        this.setState({\r\n        Folders: folders.map((name, i) => (\r\n          <li key={i} id={name.name}><button className='btn btn-link' onClick={() => {this.changeColor(name.name, 'folder');this.fetchModule(name.name)}}>{name.name}/</button></li>\r\n        )),\r\n        Modules: modules.map((name, i) => (\r\n          <li key={i} id={name.name}><button className='btn btn-link' onClick={() => {this.changeColor(name.name, 'module');this.fetchModule(name.name)}}>{name.name}</button></li>\r\n        ))\r\n        })\r\n      })  \r\n      .catch(error => console.log('error: ', error));\r\n  }\r\n\r\n  fetchModule(name) {\r\n    this.setState({\r\n      currentModule: name\r\n    })\r\n    if (name.includes(\".json\")) {\r\n      fetch(`https://raw.githubusercontent.com/synthetichealth/synthea/` + this.state.currentBranch + `/src/main/resources/modules/` + name)  \r\n        .then(response => response.text())\r\n        .then(data => this.loadModule(data))\r\n        .then(this.setState ({\r\n          Modules: null\r\n        }))\r\n        .catch(error => console.log('error: ', error));\r\n    } else {\r\n      fetch(`https://api.github.com/repos/synthetichealth/synthea/contents/src/main/resources/modules/` + name + `?ref=` + this.state.currentBranch)  \r\n      .then(response => response.json())\r\n      .then(data => this.setState({\r\n        Submodules: data.map((name, i) => (\r\n          <li key={i} id={name.name}><button className='btn btn-link' onClick={() => {this.fetchSubmodule(name.name)}}>{name.name}</button></li>\r\n        ))\r\n      }))\r\n      .catch(error => console.log('error: ', error));\r\n    }\r\n  }\r\n\r\n  fetchSubmodule(name) {\r\n    fetch(`https://raw.githubusercontent.com/synthetichealth/synthea/` + this.state.currentBranch + `/src/main/resources/modules/` + this.state.currentModule + `/` + name)  \r\n      .then(response => response.text())\r\n      .then(data => this.loadModule(data))\r\n      .then(this.setState ({\r\n        Submodules: null,\r\n        Modules: null\r\n      }))\r\n      .catch(error => console.log('error: ', error));\r\n  }    \r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.selectedOption === 'git' && prevState.selectedOption !== 'git') {\r\n      this.fetchBranchList()\r\n    }\r\n  }\r\n\r\n  renderWelcomeMessage = () => {\r\n    if(this.props.welcome){\r\n      return (<div>\r\n        Welcome to Synthea Module Builder.  Please visit the documentation first.\r\n        </div>)\r\n    }\r\n\r\n    return <div />\r\n  }\r\n\r\n  render() {\r\n\r\n    let classDetails = \" hide\", style = {display: 'none'}\r\n\r\n    if(this.props.visible){\r\n      classDetails = \" show\";\r\n      style = {display: 'block'}\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <div className={'modal ' +  classDetails} style={style}>\r\n            <div className=\"modal-content\" style={{width:\"900px\", marginLeft: '15%', marginRight: '15%', marginTop: 50}}>\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">{(!this.props.welcome ? 'Load Module' : 'Synthea Module Builder')}</h5>\r\n                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={this.props.onHide} style={{display: (this.props.welcome ? 'none' : '')}}>\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n              <div className=\"modal-body LoadModule-body\">\r\n                <StyledDropzone onDrop={this.onDrop.bind(this)}/>\r\n                <div className='container'>\r\n                  <div className='row'>\r\n                    <div className='col-3 nopadding'>\r\n                      <ul className='LoadModule-options'>\r\n                         <li className={(this.state.selectedOption === 'core') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('core')}>Core Modules</button></li>\r\n                         <li className={(this.state.selectedOption === 'submodules') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('submodules')}>Submodules</button></li>\r\n                         {Object.keys(this.props.modules).length > 0 ? <li className={(this.state.selectedOption === 'my') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('my')}>My Modules</button></li> : ''}\r\n                         <li className={(this.state.selectedOption === 'json') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('json')}>Paste JSON</button></li>\r\n                         <li className={(this.state.selectedOption === 'git') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('git')}>GitHub Modules</button></li>\r\n                      </ul>\r\n                    </div>\r\n                    <div className='col-9 nopadding'>\r\n                      {this.renderDetails()}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              {this.renderFooter()}\r\n          </div>\r\n        </div>\r\n        <div className={`modal-backdrop ${classDetails}`} style={style}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default LoadModule;\r\n","import React, { Component } from 'react';\r\nimport FileSaver from 'file-saver';\r\nimport _ from 'lodash'\r\n\r\nimport './Download.css';\r\n\r\nclass Download extends Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n    this.onDownload = this.onDownload.bind(this)\r\n  }\r\n\r\n  onDownload(){\r\n    let blob = new Blob([this.refs.codeInput.value], {\r\n       type: \"text/plain;charset=utf-8\"\r\n    });\r\n\r\n    let filename = this.props.module.name.replace(/[^a-z0-9]/gi, '_').toLowerCase();\r\n\r\n    FileSaver.saveAs(blob, `${filename}.json`, true); // true = no BOM, see https://github.com/eligrey/FileSaver.js/issues/160\r\n  }\r\n\r\n  prepareJSON(){\r\n    let module = _.cloneDeep(this.props.module);\r\n\r\n    // We currently save name in the state for convenience\r\n    // In lieu of a better solution, we will just remove it here\r\n    Object.keys(module.states).map(k => module.states[k]).forEach( s => {\r\n      if(s['name'] !== undefined){\r\n        delete s.name;\r\n      }\r\n    })\r\n\r\n    return JSON.stringify(module, null, 2)\r\n\r\n  }\r\n\r\n  render() {\r\n\r\n    let classDetails = \"hide\", style = {display: 'none'}\r\n\r\n    if(this.props.visible){\r\n      classDetails = \"show\";\r\n      style = {display: 'block'}\r\n    }\r\n\r\n    return (\r\n      <div className='Download'>\r\n        <div className={`modal ${classDetails}`} style={style}>\r\n          <div className=\"modal-dialog modal-lg\" role=\"document\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Download Module</h5>\r\n                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={this.props.onHide}>\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n              <div className=\"modal-body Download-body\">\r\n              <textarea ref=\"codeInput\" disabled value={this.prepareJSON()} />\r\n              </div>\r\n              <div className=\"modal-footer\">\r\n                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={this.onDownload}>Download</button>\r\n                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={this.props.onHide}>Close</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={`modal-backdrop ${classDetails}`} style={style}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Download;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\n\r\nimport './NavTabs.css';\r\n\r\nimport type { Module } from './types/Module';\r\n\r\nimport CancelButton from './cancel-button.png';\r\n\r\ntype Props = {\r\n  modules: Module[],\r\n  selectedModuleKey: string,\r\n  onChange: any\r\n}\r\n\r\n\r\nclass NavTabs extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  onClick = (selectedModuleKey) => {\r\n    if(selectedModuleKey === this.props.selectedModuleKey){\r\n      return () => {}\r\n    }\r\n\r\n    return () => this.props.onChangeModule(selectedModuleKey);\r\n  }\r\n\r\n  onClose = (selectedModuleKey) => {\r\n    return () => this.props.onCloseModule(selectedModuleKey);\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className='NavTabs'>\r\n        <ul>\r\n         {\r\n           Object.keys(this.props.modules).map( m => {\r\n             return (<li key={m} className={(m === this.props.selectedModuleKey ? 'NavTabs-active' : '')} ><button onClick={this.onClick(m)}>\r\n                 {/*this.props.modules[m].name*/}\r\n                 {m}.json\r\n               </button>\r\n              <img className=\"NavTabs-close\" src={CancelButton} onClick={this.onClose(m)} alt=\"Close\"/>\r\n             </li>\r\n             )})\r\n           }\r\n         </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NavTabs;\r\n","// @flow\r\nimport uuid from 'uuid-js';\r\n\r\nimport type { Module } from '../types/Module';\r\nimport type { State } from '../types/State';\r\nimport type { DirectTransition, DistributedTransition, ConditionalTransition, ComplexTransition, Transition } from '../types/Transition';\r\n\r\nexport function extractModule(data: any): Module {\r\n  let name = extractName(data);\r\n  let states = extractStates(data);\r\n  let remarks = extractRemarks(data);\r\n  return {name, states, remarks};\r\n}\r\n\r\nexport function extractStates(data: any): State[] {\r\n  if(!data){\r\n      return []\r\n  }\r\n  let stateNames = Object.keys(data.states);\r\n  return stateNames.map((name) => {\r\n    return extractState(name, data.states[name]);\r\n  })\r\n}\r\n\r\nexport function extractState(name: string, state: any): State {\r\n  let transition = extractTransition(state);\r\n  let id = uuid.create().toString();\r\n  let type = state.type;\r\n  return {name, transition, id, type, ...state};\r\n}\r\n\r\nexport function extractTransition(state: any): ?Transition {\r\n  if(state.direct_transition) {\r\n    return extractDirectTransition(state.direct_transition);\r\n  }\r\n  if(state.distributed_transition) {\r\n    return extractDistributedTransition(state.distributed_transition);\r\n  }\r\n  if(state.conditional_transition) {\r\n    return extractConditionalTransition(state.conditional_transition);\r\n  }\r\n  if(state.complex_transition) {\r\n    return extractComplexTransition(state.complex_transition);\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function extractDirectTransition(data: any): DirectTransition {\r\n  return {to: data, type: 'Direct'}\r\n}\r\n\r\nexport function extractDistributedTransition(data: any): DistributedTransition {\r\n  let transition = data.map((d) => {\r\n    return {distribution: d.distribution, to: d.transition};\r\n  });\r\n  return {type: 'Distributed', transition};\r\n}\r\n\r\nexport function extractConditionalTransition(data: any): ConditionalTransition {\r\n  let transition = data.map((d) => {\r\n    return {condition: d.condition, to: d.transition};\r\n  });\r\n  return {type: 'Conditional', transition};\r\n}\r\n\r\nexport function extractComplexTransition(data: any): ComplexTransition {\r\n  let transition = data.map((c) => {\r\n    return {\r\n      condition: c.condition,\r\n      distributions: extractDistributedTransition(c.distributions||[]).transition,\r\n      transition: extractDirectTransition(c.transition)\r\n    }\r\n  })\r\n  return {type: 'Complex', transition};\r\n}\r\n\r\n\r\nexport function extractRemarks(data: any):string[] {\r\n  return (data.remarks :string[]);\r\n}\r\n\r\nexport function extractName(data: any): string {\r\n  return (data.name: string);\r\n}\r\n\r\nexport function extractAttributes(module: Module): string[] {\r\n  let attributes = Object.keys(module.states).filter((key) => {\r\n    return module.states[key].type === 'SetAttribute' || module.states[key].type === 'Counter';\r\n  }).map(key => (module.states[key].attribute))\r\n\r\n  attributes = attributes.concat(Object.keys(module.states).filter((key) => {\r\n    return !!module.states[key].assign_to_attribute\r\n  }).map(key => (module.states[key].assign_to_attribute)))\r\n\r\n\r\n  return [...new Set(attributes)]\r\n\r\n}\r\n","\r\nexport function findAvailableKey(root, keys){\r\n  // eslint-disable-next-line no-sequences\r\n  let keys_index = keys.reduce((r, i) => (r[i] = true, r), {})\r\n\r\n  let next = root;\r\n  let index = 1;\r\n\r\n  // check if this pattern already exists, so we don't chain key_2_2_2 etc\r\n  let endsInNumber = /_(\\d+)$/g;\r\n  let matches = endsInNumber.exec(root);\r\n  if(matches && matches.length > 1){\r\n    index = parseInt(matches[1]);\r\n    root = next = next.replace(matches[0], \"\");\r\n  }\r\n\r\n  while(keys_index[next]){\r\n    index++;\r\n    next = root + \"_\" + index;\r\n  }\r\n\r\n  return next;\r\n}\r\n\r\nexport function createSafeKeyFromName(name){\r\n  return name.replace(/[^A-Z0-9]/ig, \"_\");\r\n}\r\n","export default { \"example_module\": \r\n    {\r\n      \"name\": \"Examplitis\",\r\n      \"remarks\": [\r\n        \"Examplitis is a painful condition that affects only males. Most patients \",\r\n        \"can be cured with Examplitol or an Examplotomy but some never recover.\"\r\n      ],\r\n      \"states\": {\r\n\r\n        \"Initial\": {\r\n          \"type\": \"Initial\",\r\n          \"conditional_transition\": [\r\n            {\r\n              \"condition\": {\r\n                \"condition_type\": \"Gender\",\r\n                \"gender\": \"M\"\r\n              },\r\n              \"transition\": \"Age_Guard\"\r\n            },\r\n            {\r\n              \"transition\": \"Terminal\"\r\n            }\r\n          ]\r\n        },\r\n\r\n        \"Age_Guard\": {\r\n          \"type\": \"Guard\",\r\n          \"allow\": {\r\n            \"condition_type\": \"Age\",\r\n            \"operator\": \">\",\r\n            \"quantity\": 40,\r\n            \"unit\": \"years\"\r\n          },\r\n          \"distributed_transition\": [\r\n            {\r\n              \"distribution\": 0.10,\r\n              \"transition\": \"Pre_Examplitis\"\r\n            },\r\n            {\r\n              \"distribution\": 0.90,\r\n              \"transition\": \"Terminal\"\r\n            }\r\n          ]\r\n        },\r\n\r\n        \"Pre_Examplitis\": {\r\n          \"type\": \"Delay\",\r\n          \"range\": {\r\n            \"low\": 0,\r\n            \"high\": 10,\r\n            \"unit\": \"years\"\r\n          },\r\n          \"direct_transition\": \"Examplitis\"\r\n        },\r\n\r\n        \"Examplitis\": {\r\n          \"type\": \"ConditionOnset\",\r\n          \"target_encounter\": \"Wellness_Encounter\",\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"SNOMED-CT\",\r\n              \"code\": \"123\",\r\n              \"display\": \"Examplitis\"\r\n            }\r\n          ],\r\n          \"direct_transition\": \"Wellness_Encounter\"\r\n        },\r\n\r\n        \"Wellness_Encounter\": {\r\n          \"type\": \"Encounter\",\r\n          \"wellness\": true,\r\n          \"direct_transition\": \"Examplitol\"\r\n        },\r\n\r\n        \"Examplitol\": {\r\n          \"type\": \"MedicationOrder\",\r\n          \"reason\": \"Examplitis\",\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"RxNorm\",\r\n              \"code\": \"456\",\r\n              \"display\": \"Examplitol\"\r\n            }\r\n          ],\r\n          \"distributed_transition\": [\r\n            {\r\n              \"distribution\": 0.2,\r\n              \"transition\": \"Pre_Examplotomy\"\r\n            },\r\n            {\r\n              \"distribution\": 0.1,\r\n              \"transition\": \"Last_Days\"\r\n            },\r\n            {\r\n              \"distribution\": 0.7,\r\n              \"transition\": \"Terminal\"\r\n            }\r\n          ]\r\n        },\r\n\r\n        \"Pre_Examplotomy\": {\r\n          \"type\": \"Delay\",\r\n          \"range\": {\r\n            \"low\": 18,\r\n            \"high\": 36,\r\n            \"unit\": \"months\"\r\n          },\r\n          \"direct_transition\": \"Examplotomy_Encounter\"\r\n        },\r\n\r\n        \"Examplotomy_Encounter\": {\r\n          \"type\": \"Encounter\",\r\n          \"encounter_class\": \"ambulatory\",\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"SNOMED-CT\",\r\n              \"code\": \"ABC\",\r\n              \"display\": \"Examplotomy Encounter\"\r\n            }\r\n          ],\r\n          \"direct_transition\": \"Examplotomy\"\r\n        },\r\n\r\n        \"Examplotomy\": {\r\n          \"type\": \"Procedure\",\r\n          \"duration\": {\r\n            \"low\": 2,\r\n            \"high\": 3,\r\n            \"unit\": \"hours\"\r\n          },\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"SNOMED-CT\",\r\n              \"code\": \"789\",\r\n              \"display\": \"Examplotomy\"\r\n            }\r\n          ],\r\n          \"reason\": \"Examplitis\",\r\n          \"direct_transition\": \"End_Examplotomy_Encounter\"\r\n        },\r\n\r\n        \"End_Examplotomy_Encounter\": {\r\n            \"type\": \"EncounterEnd\",\r\n            \"distributed_transition\": [\r\n            {\r\n              \"distribution\": 0.1,\r\n              \"transition\": \"Death\"\r\n            },\r\n            {\r\n              \"distribution\": 0.9,\r\n              \"transition\": \"Terminal\"\r\n            }\r\n          ]\r\n        },\r\n\r\n        \"Last_Days\": {\r\n          \"type\": \"Delay\",\r\n          \"range\": {\r\n              \"low\": 8,\r\n              \"high\": 20,\r\n              \"unit\": \"years\"\r\n          },\r\n          \"direct_transition\": \"Death\"\r\n        },\r\n\r\n        \"Death\": {\r\n          \"type\": \"Death\",\r\n          \"direct_transition\": \"Terminal\"\r\n        },\r\n\r\n        \"Terminal\": {\r\n          \"type\": \"Terminal\"\r\n        }\r\n      }\r\n    }\r\n}\r\n","// @flow\r\nimport React, { Component } from 'react';\r\n\r\nimport './JsonEditor.css';\r\nimport { JsonEditor as Editor } from 'jsoneditor-react';\r\nimport 'jsoneditor-react/es/editor.min.css';\r\nimport ace from 'brace';\r\nimport 'brace/mode/json';\r\nimport {generateDOT} from '../../utils/graphviz';\r\n\r\nimport type { Module } from './types/Module';\r\n\r\ntype Props = {\r\n  module: Module,\r\n  onChange: mixed\r\n}\r\n\r\nclass JsonEditor extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n\r\n  onChange(module) {\r\n    \r\n    if(this.clearTimeout){\r\n      clearTimeout(this.clearTimeout);\r\n    }\r\n\r\n    this.clearTimeout = setTimeout(()=>{\r\n\r\n      try {\r\n        let dot = generateDOT(module);\r\n\r\n        this.props.onChange(module)\r\n\r\n      } catch (ex) {\r\n        // currently silently fails on this\r\n        // alert('Error creating module: ' + ex.message);\r\n      }\r\n\r\n    }, 1000) // wait a second for user to complete changes\r\n  }\r\n\r\n\r\n  render() {\r\n    if(this.props.refreshCodeFlag){\r\n      return <div/>\r\n    }\r\n    return (\r\n      <div className='JsonEditor'>\r\n        <Editor\r\n          value={this.props.module}\r\n          mode='code'\r\n          ace={ace}\r\n          onChange={this.onChange}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JsonEditor;;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport _ from 'lodash';\r\n\r\nimport './StateList.css';\r\nimport CancelButton from './cancel-button.png';\r\n\r\ntype Props = {\r\n  states: State[],\r\n  selectedState: State,\r\n  onChange: any,\r\n}\r\n\r\nclass StateList extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {search: ''};\r\n  }\r\n\r\n  onClick(state) {\r\n    return () => { this.props.onClick(state.name)}\r\n  }\r\n\r\n  onChange(event){\r\n    this.setState({search: event.target.value});\r\n  }\r\n\r\n  clearSearch(){\r\n    this.setState({search: ''})\r\n  }\r\n\r\n  stateFilter(state){\r\n    return state.name.toLowerCase().includes(this.state.search.toLowerCase()) || \r\n           state.type.toLowerCase().includes(this.state.search.toLowerCase());\r\n  }\r\n\r\n  render() {\r\n    return (<div className='StateList'>\r\n          <div className='Editor-panel-title'> \r\n             State List\r\n          </div>\r\n          <div className=\"btn-group\">\r\n            <input type=\"text\" className=\"form-control\" placeholder=\"Find\" value={this.state.search} onChange={this.onChange.bind(this)}/>\r\n            <img className=\"search-clear\" src={CancelButton} onClick={this.clearSearch.bind(this)}/>\r\n          </div>\r\n          <table className=\"table table-sm table-hover\">\r\n              <thead className=\"thead-light\">\r\n                <tr>\r\n                  <th scope=\"col\">State</th>\r\n                  <th scope=\"col\">Type</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n              {this.props.states.filter(this.stateFilter.bind(this)).map((state,i) => {\r\n                return (\r\n                  <tr key={i} onClick={this.onClick(state)} className={this.props.selectedState && (state.name === this.props.selectedState.name) ? \"table-info\" : \"\"}>\r\n                    <th scope=\"row\">{state.name}</th>\r\n                    <td>{state.type}</td>\r\n                  </tr>\r\n                )\r\n              })}\r\n              </tbody>\r\n            </table>\r\n          </div>)\r\n  }\r\n}\r\n\r\nexport default StateList;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport _ from 'lodash';\r\n\r\nimport './AttributeList.css';\r\nimport CancelButton from './cancel-button.png';\r\n\r\ntype Props = {\r\n  states: State[],\r\n  modules: Module[],\r\n  selectedState: State,\r\n  onChange: any,\r\n}\r\n\r\nclass AttributeList extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {search: ''};\r\n  }\r\n\r\n  onClick(attribute) {\r\n    return () => { this.props.onClick(attribute.stateName)}\r\n  }\r\n\r\n  onChange(event){\r\n    this.setState({search: event.target.value});\r\n  }\r\n\r\n  clearSearch(){\r\n    this.setState({search: ''})\r\n  }\r\n\r\n  attributeFilter(attribute){\r\n    return attribute.attribute.toLowerCase().includes(this.state.search.toLowerCase()) || \r\n           attribute.stateName.toLowerCase().includes(this.state.search.toLowerCase());\r\n  }\r\n\r\n  render() {\r\n    return (<div className='AttributeList'>\r\n          <div className='Editor-panel-title'> \r\n             Attribute List\r\n          </div>\r\n\r\n          <div className=\"btn-group\">\r\n            <input type=\"text\" className=\"form-control\" placeholder=\"Find\" value={this.state.search} onChange={this.onChange.bind(this)}/>\r\n            <img className=\"search-clear\" src={CancelButton} onClick={this.clearSearch.bind(this)}/>\r\n          </div>\r\n          <div>\r\n            Note: This currently only displays attributes being written in this module.  It does not include referenced attributes\r\n            or attributes written in other modules.\r\n          </div>\r\n          <table className=\"table table-sm table-hover\">\r\n              <thead className=\"thead-light\">\r\n                <tr>\r\n                  <th scope=\"col\">Attribute</th>\r\n                  <th scope=\"col\">State</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n              {this.props.attributes.filter(this.attributeFilter.bind(this)).map((attribute, i) => {\r\n                return (\r\n                  <tr key={i} onClick={this.onClick(attribute)} className={this.props.selectedState && (attribute.stateName === this.props.selectedState.name) ? \"table-info\" : \"\"}>\r\n                    <th scope=\"row\">{attribute.attribute}</th>\r\n                    <td>{attribute.stateName}</td>\r\n                  </tr>\r\n                )\r\n              })}\r\n              </tbody>\r\n            </table>\r\n          </div>)\r\n  }\r\n}\r\n\r\nexport default AttributeList;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport _ from 'lodash';\r\n\r\nimport './WarningList.css';\r\n\r\ntype Props = {\r\n  warnings: mixed,\r\n  selectedState: State\r\n}\r\n\r\nclass WarningList extends Component<Props> {\r\n\r\n  onClick(warning) {\r\n    return () => { this.props.onClick(warning.stateName)}\r\n  }\r\n\r\n  render() {\r\n    return (<div className='WarningList'>\r\n          <div className='Editor-panel-title'> \r\n            Warnings\r\n          </div>\r\n\r\n          <table className=\"table table-sm table-hover\">\r\n              <thead className=\"thead-light\">\r\n                <tr>\r\n                  <th scope=\"col\">Warning</th>\r\n                  <th scope=\"col\">State</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n       \r\n              {this.props.warnings.map( (warning, i) => {\r\n                return (\r\n                  <tr key={i} onClick={this.onClick(warning)} className={this.props.selectedState && (warning.stateName === this.props.selectedState.name) ? \"table-info\" : \"\"}>\r\n                    <th scope=\"row\">{warning.message}</th>\r\n                    <td>{warning.stateName}</td>\r\n                  </tr>\r\n                )\r\n              })}\r\n              </tbody>\r\n            </table>\r\n          </div>)\r\n  }\r\n}\r\n\r\nexport default WarningList;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport _ from 'lodash';\r\n\r\nimport './RelatedList.css';\r\n\r\ntype Props = {\r\n  related: mixed,\r\n  selectedState: State\r\n}\r\n\r\nclass RelatedList extends Component<Props> {\r\n\r\n  onClick(related) {\r\n    return () => { this.props.onClick(related.stateName)}\r\n  }\r\n\r\n  render() {\r\n    return (<div className='RelatedList'>\r\n          <div className='Editor-panel-title'> \r\n            Related Modules\r\n          </div>\r\n\r\n          <div>\r\n            This currently only displays relationships based on submodules.  Additional relationships are in progress.\r\n          </div>\r\n\r\n          <table className=\"table table-sm table-hover\">\r\n              <thead className=\"thead-light\">\r\n                <tr>\r\n                  <th scope=\"col\">Type</th>\r\n                  <th scope=\"col\">Module</th>\r\n                  <th scope=\"col\">State</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n       \r\n              {this.props.related.map( (related, i) => {\r\n                return (\r\n                  <tr key={i} onClick={this.onClick(related)} className={this.props.selectedState && (related.stateName === this.props.selectedState.name) ? \"table-info\" : \"\"}>\r\n                    <th scope=\"row\">{related.type}</th>\r\n                    <td>{related.moduleKey}</td>\r\n                    <td>{related.stateName}</td>\r\n                  </tr>\r\n                )\r\n              })}\r\n              </tbody>\r\n            </table>\r\n          </div>)\r\n  }\r\n}\r\n\r\nexport default RelatedList;\r\n","export const analyze = (moduleKey, module) => {\r\n  return ({\r\n    type: 'ANALYZE',\r\n    data: {moduleKey, module}\r\n  })\r\n}\r\n","import {analyze} from  './analysis';\r\nimport { push } from 'connected-react-router'\r\n\r\nconst dispatchThenAnalyze = (action) => {\r\n  return (dispatch, getState) => {\r\n    dispatch(action);\r\n    let moduleKey = getState().editor.selectedModuleKey;\r\n    let module = getState().editor.modules[moduleKey];\r\n    if(module){\r\n      dispatch(analyze(moduleKey, module));\r\n    }\r\n\r\n    // refresh the editor if the change didn't originate from the editor\r\n    if(action.type !== 'JSON_EDIT'){\r\n      dispatch(refreshCode())\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport const selectNode = (key, transitionIndex) => {\r\n  return ({\r\n    type: 'SELECT_NODE',\r\n    data: {key, transitionIndex}\r\n  })\r\n}\r\n\r\nexport const addNode = (currentModuleKey, stateKey, state, selectedState, selectedStateTransition) => {\r\n   return dispatchThenAnalyze({\r\n    type: 'ADD_NODE',\r\n    data: {currentModuleKey, stateKey, state, selectedState, selectedStateTransition}\r\n  })\r\n}\r\n\r\nexport const addStructure = (currentModuleKey, structureName) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'ADD_STRUCTURE',\r\n    data: {currentModuleKey, structureName}\r\n  });\r\n}\r\n\r\nexport const addTransition = (currentModuleKey, nodeName, transitionType) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'ADD_TRANSITION',\r\n    data: {currentModuleKey, nodeName, transitionType}\r\n  });\r\n}\r\n\r\nexport const editNode = (update, path) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'EDIT_NODE',\r\n    data: {\r\n      update,\r\n      path\r\n    }\r\n  })\r\n}\r\n\r\nexport const renameNode = (targetModuleKey, targetNode, newName) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'RENAME_NODE',\r\n    data:{\r\n      targetModuleKey,\r\n      targetNode,\r\n      newName\r\n    }\r\n  })\r\n}\r\n\r\nexport const copyNode = (targetModuleKey, targetNode, newName) => {\r\n  return {\r\n    type: 'COPY_NODE',\r\n    data:{\r\n      targetModuleKey,\r\n      targetNode\r\n    }\r\n  }\r\n}\r\n\r\nexport const jsonEdit = (module) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'JSON_EDIT',\r\n    data: {module}\r\n  })\r\n}\r\n\r\nexport const closeModule = (selectedModuleKey) => {\r\n\r\n  return (dispatch, getState) => {\r\n\r\n    if(Object.keys(getState().editor.modules).length > 1){\r\n      if(Object.keys(getState().editor.modules)[0] === selectedModuleKey){\r\n        dispatch(push('#' + Object.keys(getState().editor.modules)[1])); // handling case where first is the one we already have open\r\n      }else {\r\n        dispatch(push('#' + Object.keys(getState().editor.modules)[0]));\r\n      }\r\n    } else {\r\n      dispatch({type: 'OPEN_MODULE', data: {}}); // open nothing to force welcome screen\r\n      dispatch(push('#'));\r\n    }\r\n\r\n\r\n    return dispatch({type: 'CLOSE_MODULE', data: {selectedModuleKey}});\r\n\r\n  }\r\n}\r\n\r\nexport const newModule = (key, module) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'NEW_MODULE',\r\n    data: {key, module}\r\n  })\r\n}\r\n\r\nexport const editModuleName = (targetModuleKey, newName) => {\r\n  return ({\r\n    type: 'EDIT_MODULE_NAME',\r\n    data: {\r\n      newName,\r\n      targetModuleKey\r\n    }\r\n  })\r\n}\r\n\r\nexport const editModuleRemarks = (targetModuleKey, newRemarks) => {\r\n  return ({\r\n    type: 'EDIT_MODULE_REMARKS',\r\n    data: {\r\n      newRemarks,\r\n      targetModuleKey\r\n    }\r\n  })\r\n}\r\n\r\nexport const changeStateType = (targetModuleKey, targetNode, newType) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'CHANGE_STATE_TYPE',\r\n    data:{\r\n      targetModuleKey,\r\n      targetNode,\r\n      newType\r\n    }\r\n  })\r\n}\r\n\r\nexport const undo = () => {\r\n  return dispatchThenAnalyze({\r\n    type: 'UNDO'\r\n  })\r\n}\r\n\r\nexport const redo = () => {\r\n  return dispatchThenAnalyze({\r\n    type: 'REDO'\r\n  })\r\n}\r\n\r\nexport const showLoadModule = () => {\r\n  return ({\r\n    type: 'SHOW_LOAD_MODULE'\r\n  })\r\n}\r\n\r\nexport const hideLoadModule = () => {\r\n  return ({\r\n    type: 'HIDE_LOAD_MODULE'\r\n  })\r\n}\r\n\r\nexport const showDownload = () => {\r\n  return ({\r\n    type: 'SHOW_DOWNLOAD'\r\n  })\r\n}\r\n\r\nexport const hideDownload = () => {\r\n  return ({\r\n    type: 'HIDE_DOWNLOAD',\r\n  })\r\n}\r\n\r\n\r\nexport const changeModulePanel = (targetPanel) => {\r\n  return ({\r\n    type: 'CHANGE_MODULE_PANEL',\r\n    data:{\r\n      targetPanel\r\n    }\r\n  })\r\n}\r\n\r\nexport const refreshCode = () => {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: 'REFRESH_CODE_FLAG',\r\n      data:{\r\n        flag: true\r\n      }\r\n    })\r\n\r\n    setTimeout(() => {dispatch({\r\n      type: 'REFRESH_CODE_FLAG',\r\n      data:{\r\n        flag: false\r\n      }\r\n    })}, 250)\r\n\r\n\r\n  }\r\n}\r\n\r\n","import {analyze} from  './analysis';\r\n\r\nexport const openModule = (key) => {\r\n\r\n  return (dispatch, getState) => {\r\n    let action = {type: 'OPEN_MODULE', data: {key}};\r\n\r\n    if(!getState().editor.modules[key] && getState().library.modules[key]){\r\n      action.data.libraryModule = getState().library.modules[key];\r\n    }\r\n\r\n    dispatch(action);\r\n    if(getState().editor.modules[key]){\r\n      dispatch(analyze(key, getState().editor.modules[key]));\r\n    }\r\n  }\r\n}\r\n","import { openModule } from './router'\r\n\r\nexport const loadLibrary = (modules) => {\r\n  return (dispatch, getState) => {\r\n\r\n    dispatch ({\r\n      type: 'LOAD_LIBRARY',\r\n      data: modules\r\n    })\r\n\r\n    if(getState().router.location.hash.charAt(0) === '#'){\r\n      dispatch(openModule(getState().router.location.hash.slice(1)));\r\n    }\r\n  }\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport { push } from 'connected-react-router'\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport Joyride from 'react-joyride'\r\nimport ReactTooltip from 'react-tooltip'\r\nimport Draggable from 'react-draggable'\r\n\r\nimport StateEditor from '../components/editor/State';\r\nimport ModulePropertiesEditor from '../components/editor/ModuleProperties';\r\nimport ModuleGraph from '../components/graph/ModuleGraph';\r\nimport LoadModule from '../components/menu/LoadModule';\r\nimport Download from '../components/menu/Download';\r\nimport NavTabs from '../components/editor/NavTabs';\r\nimport { extractStates } from '../transforms/Module';\r\nimport {cleanString } from '../utils/stringUtils';\r\n\r\nimport { findAvailableKey, createSafeKeyFromName } from '../utils/keys';\r\nimport { getTemplate } from '../templates/Templates';\r\nimport { BasicTutorial } from '../templates/Tutorial';\r\n\r\nimport { RIEInput } from 'riek';\r\n\r\nimport examplitis from '../data/example_module'\r\n\r\nimport './Editor.css';\r\n\r\nimport JsonEditor from '../components/editor/JsonEditor';\r\n\r\nimport StateList from '../components/analysis/StateList';\r\nimport AttributeList from '../components/analysis/AttributeList';\r\nimport WarningList from '../components/analysis/WarningList';\r\nimport RelatedList from '../components/analysis/RelatedList';\r\n\r\nimport LoadingLogo from './synthea-animated-logo.svg'\r\n// import SyntheaLogo from './synthea-logo-dark-glow.png'\r\nimport SyntheaLogo from './synthea-logo.png'\r\nimport MinimizePanel from './minimize-panel.png'\r\nimport FullscreenButton from './fullscreen.png'\r\nimport InfoButton from './Info.png'\r\nimport StateButton from './state-button.png'\r\nimport StateListButton from './statelist.png'\r\nimport CodeButton from './code-button.png'\r\nimport AttributeButton from './attribute-button.png'\r\nimport RelatedButton from './related-button.png'\r\nimport WarningButton from './warning-button.png'\r\n\r\nimport {selectNode,\r\n        addNode,\r\n        addStructure,\r\n        addTransition,\r\n        editNode,\r\n        renameNode,\r\n        copyNode,\r\n        newModule,\r\n        jsonEdit,\r\n        showLoadModule,\r\n        hideLoadModule,\r\n        showDownload,\r\n        hideDownload,\r\n        refreshCode,\r\n        changeStateType,\r\n        editModuleName,\r\n        editModuleRemarks,\r\n        closeModule,\r\n        undo,\r\n        redo,\r\n        changeModulePanel} from '../actions/editor';\r\n\r\nimport {loadLibrary} from '../actions/library';\r\n\r\nclass Editor extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.originalPanelWidth = 500;\r\n    this.state = {\r\n      joyride: {\r\n        run: false,\r\n        steps: BasicTutorial,\r\n        stepIndex: 0\r\n      },\r\n      panelWidth: this.originalPanelWidth,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    import(\"../data/modules\").then(modules => {\r\n      this.props.loadLibrary({...examplitis, ...modules.default});\r\n\r\n      // see https://github.com/wwayne/react-tooltip/issues/40\r\n      setTimeout(() => {\r\n       ReactTooltip.rebuild();\r\n      }, 1000)\r\n    });\r\n\r\n  }\r\n\r\n  /*\r\n    This is a recursive function to track the path that an edit action took through the Inspector\r\n    It was written this way because there's multiple ways that one could get to, say, a Conditional Editor\r\n    By keeping track of where it's been it means that the action can just look into the modules along the path\r\n  */\r\n  onChange  = (update, path=[]) => {\r\n    if(typeof update !== 'object') {\r\n      return (val) => this.onChange(val, [].concat(path, [update]))\r\n    }\r\n    this.props.editNode(update, path)\r\n  }\r\n\r\n  renameNode = (targetModuleKey, targetNode) => {\r\n    return (newName) => {\r\n      newName.name = cleanString(newName.name, {'.': '', '\\\\': '', '|': ''});\r\n      this.props.renameNode(targetModuleKey, targetNode, newName);\r\n    }\r\n  }\r\n\r\n  copyNode = (targetModuleKey, targetNode) => {\r\n    return () => {\r\n      this.props.copyNode(targetModuleKey, targetNode);\r\n    }\r\n  }\r\n\r\n  pasteNode = (selectedModuleKey, takenKeys, selectedState, selectedStateTransition) => {\r\n    return () => {\r\n      let key = findAvailableKey(createSafeKeyFromName(this.props.clipboard.name), takenKeys);\r\n      let newState = _.cloneDeep(this.props.clipboard);\r\n      this.props.addNode(selectedModuleKey, key, newState, selectedState, selectedStateTransition);\r\n    }\r\n  }\r\n  \r\n  changeStateType = (targetModuleKey, targetNode) => {\r\n    return (newType) => {\r\n      this.props.changeStateType(targetModuleKey, targetNode, newType);\r\n    }\r\n  }\r\n\r\n  addTransition = (targetModuleKey, targetNode) => {\r\n    return (transitionType) => {\r\n      this.props.addTransition(targetModuleKey, targetNode, transitionType)\r\n    }\r\n  }\r\n\r\n  newModule = (takenKeys) => {\r\n    return (module = getTemplate('Module.Blank')) => {\r\n      let key = findAvailableKey(createSafeKeyFromName(module.name), takenKeys);\r\n      this.props.newModule(key, module);\r\n      this.props.push('#' + key)\r\n    }\r\n  }\r\n\r\n  addNode = (selectedModuleKey, takenKeys, selectedState, selectedStateTransition) => {\r\n    return () => {\r\n      let key = findAvailableKey(createSafeKeyFromName('New State'), takenKeys);\r\n      let newState = {...getTemplate('State.Simple'), direct_transition: key };\r\n      this.props.addNode(selectedModuleKey, key, newState, selectedState, selectedStateTransition);\r\n    }\r\n  }\r\n\r\n  startTutorial = (steps) => {\r\n    return () => {\r\n      this.joyride.reset(true);\r\n      this.setState({joyride: {run: true, steps}})\r\n    }\r\n  }\r\n  renderAddStateButton = () => {\r\n    if(this.props.selectedModuleKey){\r\n      return <button className='button-clear' data-tip='Add a state to this graph.' onClick={this.addNode(this.props.selectedModuleKey, Object.keys(this.props.module.states), this.props.selectedStateKey, this.props.selectedStateTransition)}> + Add State </button>\r\n    }\r\n    return <div/>\r\n  }\r\n\r\n  renderUndoButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.undoEnabled){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Undo' onClick={() => this.props.undo()}> Undo</button>\r\n  }\r\n\r\n  renderRedoButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.redoEnabled){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Redo' onClick={() => this.props.redo()}> Redo</button>\r\n  }\r\n\r\n  renderDownloadButton = () => {\r\n  }\r\n\r\n  renderUndoButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.undoEnabled){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Undo' onClick={() => this.props.undo()}> Undo</button>\r\n  }\r\n  \r\n  renderDeleteButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.selectedStateKey){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Delete State' onClick={() => this.props.selectedStateKey && this.onChange(`${this.props.selectedModuleKey}.states.${this.props.selectedStateKey}`)({val: {id: null}})}> Delete State</button>\r\n  }\r\n\r\n  renderCopyButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.selectedStateKey){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Copy State' onClick={this.props.selectedStateKey && this.copyNode(this.props.selectedModuleKey, this.props.moduleState, Object.keys(this.props.module.states))}> Copy State</button>\r\n  }\r\n\r\n  renderPasteButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.clipboard){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Paste State Here' onClick={this.props.clipboard && this.pasteNode(this.props.selectedModuleKey, Object.keys(this.props.module.states), this.props.selectedStateKey, this.props.selectedStateTransition)}> Paste State</button>\r\n  }\r\n\r\n  renderStateEditor = () => {\r\n    if(this.props.module){\r\n      return <StateEditor\r\n        moduleName={this.props.module.name}\r\n        helpFunction={this.startTutorial}\r\n        renameNode={this.renameNode(this.props.selectedModuleKey, this.props.moduleState)}\r\n        changeType={this.changeStateType(this.props.selectedModuleKey, this.props.moduleState)}\r\n        copyNode={this.copyNode(this.props.selectedModuleKey, this.props.moduleState, Object.keys(this.props.module.states))}\r\n        addTransition={this.addTransition(this.props.selectedModuleKey, this.props.moduleState)}\r\n        state={this.props.moduleState}\r\n        otherStates={this.props.moduleStates}\r\n        onChange={this.onChange(this.props.selectedModuleKey)} />\r\n    }\r\n    return <div/>\r\n\r\n  }\r\n\r\n  renderDownload = () => {\r\n    if(this.props.module){\r\n      return <Download module={this.props.module}\r\n        visible={this.props.downloadVisible}\r\n        onHide={this.props.hideDownload}/>\r\n    }\r\n    return <div/>\r\n  }\r\n\r\n  renderLoadModule = () => {\r\n    return <LoadModule modules={this.props.modules}\r\n          library={this.props.library}\r\n          visible={this.props.loadModuleVisible}\r\n          onHide={this.props.hideLoadModule}\r\n          push={this.props.push}\r\n          welcome={!this.props.module}\r\n          newModule={this.newModule(Object.keys(this.props.modules))}\r\n          />\r\n  }\r\n\r\n  renderModulePropertiesEditor = () => {\r\n    if(this.props.module){\r\n      return <ModulePropertiesEditor\r\n              module={this.props.module}\r\n              onRemarksChange={(remarks) => this.props.editModuleRemarks(this.props.selectedModuleKey, remarks)}/>\r\n    }\r\n    return <div/>\r\n  }\r\n\r\n  renderModuleGraph = () => {\r\n    if(this.props.module){\r\n      return <ModuleGraph\r\n            module={this.props.module}\r\n            fullscreen={!this.props.modulePanelVisible}\r\n            onClick={this.props.selectNode}\r\n            selectedState={this.props.moduleState}\r\n            selectedStateTransition={this.props.selectedStateTransition}/>\r\n    }\r\n    return <div/>\r\n  }\r\n\r\n  onPanelResize = (event, data) => {\r\n    this.setState({...this.state, panelWidth: this.state.panelWidth + data.deltaX})\r\n  }\r\n\r\n  onPanelResizeDone = () => {\r\n    this.props.refreshCode();\r\n    if(this.state.panelWidth <= 250){\r\n      this.setState({...this.state, panelWidth: 250});\r\n      this.leftNavClick('hide')();\r\n    }\r\n  }\r\n\r\n  renderPanelContent = () => {\r\n    switch(this.props.selectedModulePanel){\r\n      case 'info':\r\n        return this.renderModulePropertiesEditor();\r\n      case 'state':\r\n        return this.renderStateEditor();\r\n      case 'statelist':\r\n        return <StateList selectedState={this.props.moduleState} states={this.props.moduleStates} onClick={this.props.selectNode} />\r\n      case 'code':\r\n        return <JsonEditor onChange={(value) => {this.props.jsonEdit(value)}} module={this.props.module} refreshCodeFlag={this.props.refreshCodeFlag}/>\r\n      case 'attribute':\r\n        return <AttributeList attributes={this.props.attributes} selectedState={this.props.moduleState} modules={this.props.modules} states={this.props.moduleStates} onClick={this.props.selectNode} />\r\n      case 'warning':\r\n        return <WarningList warnings={this.props.warnings} selectedState={this.props.moduleState} onClick={this.props.selectNode} />\r\n      case 'related':\r\n        return <RelatedList related={this.props.relatedModules} selectedState={this.props.moduleState} onClick={this.props.selectNode} />\r\n      default:\r\n        return <div/>\r\n    }\r\n  }\r\n\r\n  renderStateButton = () => {\r\n    let className = '';\r\n    let onClick = this.leftNavClick('state');\r\n    if(this.props.selectedModulePanel === 'state'){\r\n      className = 'Editor-left-selected';\r\n    } else if(!this.props.moduleState){\r\n      className = 'Editor-left-disabled';\r\n      onClick = () => {};\r\n    }\r\n    let dataTip = 'View currently selected state.'\r\n\r\n    if(this.props.moduleStates){\r\n      dataTip += ' Please selected a state in the graph, state list, or attribute list.'\r\n    }\r\n\r\n    return <li className={className}><button data-tip={dataTip} onClick={onClick}><img src={StateButton} alt=\"\"/></button></li>\r\n  }\r\n\r\n  renderStateListButton = () => {\r\n   let stateCount = <span className='Editor-button-count'>0</span>\r\n   if(this.props.moduleStates.length > 0){\r\n       stateCount = <span className='Editor-button-count'>{this.props.moduleStates.length}</span>\r\n   }\r\n   return <li className={this.props.selectedModulePanel === 'statelist' ? 'Editor-left-selected' : ''}><button data-tip='Searchable list of states.' onClick={this.leftNavClick('statelist')}><img src={StateListButton} alt=\"\"/>{stateCount}</button></li>\r\n\r\n  }\r\n\r\n  renderAttributesButton = () => {\r\n   let attributesCount = <span className='Editor-button-count'>0</span>\r\n   if(this.props.attributes.length > 0){\r\n     attributesCount = <span className='Editor-button-count'>{this.props.attributes.length}</span>\r\n   }\r\n   return <li className={this.props.selectedModulePanel === 'attribute' ? 'Editor-left-selected' : ''}><button data-tip='Attributes set in this module.' onClick={this.leftNavClick('attribute')}><img src={AttributeButton} alt=\"\"/>{attributesCount}</button></li>\r\n\r\n  }\r\n\r\n\r\n  renderWarningButton = () => {\r\n   let warningCount = <span className='Editor-button-count'>0</span>\r\n   if(this.props.warnings.length > 0){\r\n     warningCount = <span className='Editor-button-count Editor-button-count-warning'>{this.props.warnings.length}</span>\r\n   }\r\n   return <li className={this.props.selectedModulePanel === 'warning' ? 'Editor-left-selected' : ''}><button data-tip='Problems in module that need to be resolved.' onClick={this.leftNavClick('warning')}><img src={WarningButton} alt=\"\"/>{warningCount}</button></li>\r\n\r\n  }\r\n\r\n  renderRelatedModulesButton = () => {\r\n\r\n   let relatedCount = <span className='Editor-button-count'>0</span>\r\n   if(this.props.relatedModules.length > 0){\r\n     relatedCount = <span className='Editor-button-count'>{this.props.relatedModules.length}</span>\r\n   }\r\n   return <li className={this.props.selectedModulePanel === 'related' ? 'Editor-left-selected' : ''}><button data-tip='Related modules, such as those that share attributes. ' onClick={this.leftNavClick('related')}><img src={RelatedButton} alt=\"\"/>{relatedCount}</button></li>\r\n\r\n  }\r\n\r\n\r\n  leftNavClick = (nav) => {\r\n    return () => {\r\n      if(nav !== 'hide' || (nav === 'hide' && this.props.modulePanelVisible)){\r\n        this.props.changeModulePanel(nav);\r\n      } else if (nav === 'hide') {\r\n        if(this.props.selectedStateKey){\r\n          this.props.changeModulePanel('state');\r\n        } else {\r\n          this.props.changeModulePanel('info');\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  renderNav = () => {\r\n    return(\r\n      <div className='Editor-top'>\r\n        <img src={SyntheaLogo} className='Editor-top-logo' alt='Synthea Logo'/>\r\n        <div className='Editor-top-title'>Synthea Module Builder</div>\r\n        <div className='Editor-top-open'>\r\n          <button className='button-clear' onClick={this.newModule(Object.keys(this.props.modules)).bind(this, undefined)}>New Module</button>\r\n          <button className='button-clear' onClick={this.props.showLoadModule}>Open Module</button>\r\n          <button className='button-clear Editor-top-download' onClick={this.props.showDownload}>Download</button>\r\n        </div>\r\n        <button className='button-clear Editor-top-help' onClick={this.startTutorial(BasicTutorial)}> ? </button>\r\n        <NavTabs selectedModuleKey={this.props.selectedModuleKey}\r\n                 modules={this.props.modules}\r\n                 onChangeModule={(key) => this.props.push('#' + key)}\r\n                 onCloseModule={(key) => {this.props.closeModule(key)}}\r\n                 />\r\n              \r\n      </div>\r\n    )\r\n\r\n  }\r\n\r\n  renderMainEditor = () => {\r\n\r\n    if(!this.props.module){\r\n      return <img className='Editor-loading-logo' src={LoadingLogo} alt='Loading'/>\r\n    }\r\n\r\n    return (\r\n      <div className='Editor-main'>\r\n\r\n        <div className='Editor-action-bar'>\r\n              <RIEInput className='Editor-top-module' value={(this.props.module && this.props.module.name) || 'Untitled'} propName=\"name\" change={(name) => {this.props.editModuleName(this.props.selectedModuleKey, name.name)}} />\r\n             <div className='Editor-graph-buttons'>\r\n                {this.renderAddStateButton()}\r\n                {this.renderUndoButton()}\r\n                {this.renderRedoButton()}\r\n                {this.renderDeleteButton()}\r\n                {this.renderCopyButton()}\r\n                {this.renderPasteButton()}\r\n                {this.renderDownloadButton()}\r\n\r\n             </div>\r\n        </div>\r\n\r\n        <div className='Editor-left'>\r\n         <ul>\r\n        <li className={'Editor-left-fullscreen' + (!this.props.modulePanelVisible ? ' Editor-left-fullscreen-active' : '')}><button data-tip='Show/hide editor panel.' onClick={this.leftNavClick('hide')}><img src={FullscreenButton} alt=\"\"/></button></li>\r\n           <li className='Editor-left-spacer'></li>\r\n           <li className={this.props.selectedModulePanel === 'info' ? 'Editor-left-selected' : ''}><button data-tip='Module Properties.' onClick={this.leftNavClick('info')}><img src={InfoButton} alt=\"\"/></button></li>\r\n           {this.renderStateButton()}\r\n           <li className='Editor-left-spacer'></li>\r\n           <li className={this.props.selectedModulePanel === 'code' ? 'Editor-left-selected' : ''}><button data-tip='Directly edit module JSON.' onClick={this.leftNavClick('code')}><img src={CodeButton} alt=\"\"/></button></li>\r\n           <li className='Editor-left-spacer'></li>\r\n           {this.renderStateListButton()}\r\n           {this.renderAttributesButton()}\r\n           {this.renderWarningButton()}\r\n           {this.renderRelatedModulesButton()}\r\n\r\n\r\n         </ul>\r\n        </div>\r\n\r\n        <div className='Editor-panel' style={{left: this.props.modulePanelVisible ? 50 :  -this.state.panelWidth, width: this.state.panelWidth}}>\r\n          <div className='Editor-panel-content'>\r\n            <button className='Editor-panel-minimize button-clear' onClick={this.leftNavClick('hide')} ><img src={MinimizePanel} alt=\"\"/></button>\r\n            {this.renderPanelContent()}\r\n          </div>\r\n\r\n          <Draggable\r\n             axis='x'\r\n             onDrag={this.onPanelResize}\r\n             onStop={this.onPanelResizeDone}\r\n             bounds={{left: -250, top: 0, right: Infinity, bottom: 0}}\r\n            >\r\n            <div className='Editor-panel-resize' style={{left: this.originalPanelWidth - 8}}></div>\r\n          </Draggable>\r\n\r\n         </div>\r\n\r\n\r\n\r\n        {this.renderModuleGraph()}\r\n\r\n\r\n      </div>)\r\n\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      <div className='Editor'>\r\n\r\n        <ReactTooltip\r\n          className='react-tooltip-customized'\r\n          effect='solid'\r\n          delayShow={800}\r\n          />\r\n\r\n        { this.renderNav() }\r\n\r\n        { this.renderLoadModule() }\r\n        { this.renderDownload() }\r\n\r\n        { this.renderMainEditor() }\r\n\r\n\r\n        <Joyride\r\n          ref={c => (this.joyride = c)}\r\n          showOverlay={true}\r\n          showSkipButton={true}\r\n          showStepsProgress={false}\r\n          type={'continuous'}\r\n          steps={this.state.joyride.steps}\r\n          run={this.state.joyride.run}\r\n          autoStart={true}\r\n          debug={false}\r\n          allowClicksThruHole={false}\r\n          keyboardNavigation={true}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\r\n  let selectedModuleKey = state.editor.selectedModuleKey;\r\n\r\n  let loadModuleVisible = state.editor.loadModuleVisible;\r\n\r\n  if(!selectedModuleKey){\r\n    loadModuleVisible = true;\r\n  }\r\n\r\n  let module = state.editor.modules[selectedModuleKey];\r\n\r\n  let moduleStates = selectedModuleKey && extractStates(module);\r\n  let moduleState =  moduleStates && moduleStates.find(s => (s.name === state.editor.selectedStateKey))\r\n\r\n  let undoEnabled = state.editor.historyIndex < state.editor.history.length - 1;\r\n  let redoEnabled = state.editor.historyIndex > 0;\r\n\r\n  return {\r\n    module,\r\n    modules: state.editor.modules,\r\n    library: state.library.modules,\r\n    selectedModuleKey,\r\n    moduleState,\r\n    moduleStates,\r\n    selectedStateKey: state.editor.selectedStateKey,\r\n    selectedStateTransition: state.editor.selectedStateTransition,\r\n    loadModuleVisible: loadModuleVisible,\r\n    downloadVisible: state.editor.downloadVisible,\r\n    selectedModulePanel: state.editor.selectedModulePanel,\r\n    modulePanelVisible: state.editor.modulePanelVisible,\r\n    warnings: state.analysis.warnings,\r\n    relatedModules: state.analysis.relatedModules,\r\n    attributes: state.analysis.attributes,\r\n    undoEnabled,\r\n    redoEnabled,\r\n    refreshCodeFlag: state.editor.refreshCodeFlag,\r\n    clipboard: state.editor.clipboard\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => bindActionCreators({\r\n  selectNode,\r\n  addNode,\r\n  addStructure,\r\n  addTransition,\r\n  editNode,\r\n  renameNode,\r\n  copyNode,\r\n  changeStateType,\r\n  newModule,\r\n  loadLibrary,\r\n  showLoadModule,\r\n  hideLoadModule,\r\n  showDownload,\r\n  hideDownload,\r\n  refreshCode,\r\n  editModuleName,\r\n  editModuleRemarks,\r\n  changeModulePanel,\r\n  jsonEdit,\r\n  closeModule,\r\n  undo,\r\n  redo,\r\n  push\r\n}, dispatch)\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Editor);\r\n","// @flow\r\nimport React from 'react';\r\nimport { Provider } from 'react-redux'\r\nimport { Route, Switch } from 'react-router-dom'\r\nimport { ConnectedRouter} from 'connected-react-router'\r\n\r\nimport createAppStore, { history } from './store';\r\nimport Editor from './containers/Editor';\r\n\r\nimport { openModule } from './actions/router';\r\n\r\nconst store = createAppStore(history)\r\n\r\nconst App = () => {\r\n  return (\r\n    <Provider store={store}>\r\n      <ConnectedRouter history={history}>\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Editor} />\r\n        </Switch>\r\n      </ConnectedRouter>\r\n    </Provider>\r\n  );\r\n}\r\n\r\nconst dispatchLocationChange = location => {\r\n  if(location.hash.charAt(0) === '#'){\r\n    store.dispatch(openModule(location.hash.slice(1)));\r\n  }\r\n}\r\n\r\nhistory.listen(dispatchLocationChange);\r\n\r\ndispatchLocationChange(history.location);\r\n\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css'\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// Do not use service workers because they cause unexpected behavior and we\r\n// are not interested in offline modes currently. Unregister to clear out\r\n// previous registered service workers for people that have already visited\r\n// the app.\r\nserviceWorker.unregister();\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABTCAYAAADjsjsAAAADZ0lEQVR4nO2dTZKbMBBGnycXYJlljsANQm6RpY6inGS22c0RnJwAHyHL7PANyAJIYRsMgpbUyPqqvoVrPDT9Sn80wpyIr7L3F+ArUPSfl3QBrsBv4E//+eLlDBWrAAzwATRAK+imP67p4yQrQ5eoJLwlD2CTUAFY5FvglhZrOWhr1QLx8FAt+iDOQVWrEqiJD8rFNetWDkFliQ9mj600kC0qOF5rfNZKo42lJfrHRlc3ROj2hvRAjoEaKVBLMh4T0WQjg2teJnKCyQA1CpJLAmiKk81ai05KBa8Lcgx0cdn0tsyS85oDJa6CjsNTfVr4uwW+S5xNAvoMnIBfW/65JH730uhN42cql4nSrueAzXVzS+7ec3Lq7j5m7waoCN/a6z6uj3xWTcrWQ+BhnAlZZRpXgXysk+0SSOlWObXgDQF0qpwmDXSxdVrPIEMAfVaXlAZqZ+KAYKA1l2A+gK4p8EoCbeaCGMGkqoWEBkkCdamUV4K5mqkAkhsEXBKTABo63tgfUwGkDh46wZggB9/ENx4ChEhUA8iWu67ucw+Qr4S1gGy56+q+65XSiWsC2TKa1UNVh6QAaAM5uISw93b2gtAKsqUfN23AgHuAaAbZ0l8NnQMH3QLm3fH7MWqxZyIFdgW6VjH3PtVECuwDqIZNZFGDSwHVAFIFzL1AtYBUA3MrUE0gVcFs6WZtF70rOGeVMHPLjAhSI9DoJ5Bnc0UgB2kAmq+ApPJ5o3vMOLQuwLeVsV2uza/9cWM8Kn2FXDWSsoVcz5SygVxpl/L/TRf5HtA+3+zsyHcn9/nm7qTxFOQl75vnHR37/BA/7zXa5oe9RpB3wW21mQuS92e65zkrK5jYy+8cLoSDTQENse6bAioNspmI8SArnNgYaMgrkjFQaZCLrXKQdOscgFYBQY6BVp7yWV0+tIGTPprtWpCDYlettbp2BQn5qd45zy75nj1v/pfugcvqyXdeTT+An3sOkLt7503d+14+Zvej2Wn2XpKPddpRvObS2FlGQWIxbPajm5ZRkFwSIAeZyAkmA3KQId0xtCHCL2inOCl5mWzWSsNmKSn72Pu0SZb4MPbYSgPZq5LjtdIahb+GPZZF/1jaoLA1zqlAJ9QBooqx0VVaoB4a4pQM+a0r4ipI9H1Ap9ABJ1SSyJuq/gG9HAYxsPsSkQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABTCAYAAADjsjsAAAADZ0lEQVR4nO2dTZKbMBBGnycXYJlljsANQm6RpY6inGS22c0RnJwAHyHL7PANyAJIYRsMgpbUyPqqvoVrPDT9Sn80wpyIr7L3F+ArUPSfl3QBrsBv4E//+eLlDBWrAAzwATRAK+imP67p4yQrQ5eoJLwlD2CTUAFY5FvglhZrOWhr1QLx8FAt+iDOQVWrEqiJD8rFNetWDkFliQ9mj600kC0qOF5rfNZKo42lJfrHRlc3ROj2hvRAjoEaKVBLMh4T0WQjg2teJnKCyQA1CpJLAmiKk81ai05KBa8Lcgx0cdn0tsyS85oDJa6CjsNTfVr4uwW+S5xNAvoMnIBfW/65JH730uhN42cql4nSrueAzXVzS+7ec3Lq7j5m7waoCN/a6z6uj3xWTcrWQ+BhnAlZZRpXgXysk+0SSOlWObXgDQF0qpwmDXSxdVrPIEMAfVaXlAZqZ+KAYKA1l2A+gK4p8EoCbeaCGMGkqoWEBkkCdamUV4K5mqkAkhsEXBKTABo63tgfUwGkDh46wZggB9/ENx4ChEhUA8iWu67ucw+Qr4S1gGy56+q+65XSiWsC2TKa1UNVh6QAaAM5uISw93b2gtAKsqUfN23AgHuAaAbZ0l8NnQMH3QLm3fH7MWqxZyIFdgW6VjH3PtVECuwDqIZNZFGDSwHVAFIFzL1AtYBUA3MrUE0gVcFs6WZtF70rOGeVMHPLjAhSI9DoJ5Bnc0UgB2kAmq+ApPJ5o3vMOLQuwLeVsV2uza/9cWM8Kn2FXDWSsoVcz5SygVxpl/L/TRf5HtA+3+zsyHcn9/nm7qTxFOQl75vnHR37/BA/7zXa5oe9RpB3wW21mQuS92e65zkrK5jYy+8cLoSDTQENse6bAioNspmI8SArnNgYaMgrkjFQaZCLrXKQdOscgFYBQY6BVp7yWV0+tIGTPprtWpCDYlettbp2BQn5qd45zy75nj1v/pfugcvqyXdeTT+An3sOkLt7503d+14+Zvej2Wn2XpKPddpRvObS2FlGQWIxbPajm5ZRkFwSIAeZyAkmA3KQId0xtCHCL2inOCl5mWzWSsNmKSn72Pu0SZb4MPbYSgPZq5LjtdIahb+GPZZF/1jaoLA1zqlAJ9QBooqx0VVaoB4a4pQM+a0r4ipI9H1Ap9ABJ1SSyJuq/gG9HAYxsPsSkQAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/synthea-animated-logo.d15f277a.svg\";","module.exports = __webpack_public_path__ + \"static/media/synthea-logo.81979623.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABKUlEQVRIieWVzW3DMAxGn4Au4BW8QlbwClnBK2SFrpAV2hG8QlZQR/AKzKEMKsQ0TCoSeggBHgxIfvz7KPgnS+WHiPSBpHQGRuAb+NkcEJGmDsxABkR9erA+OmQ3KHDWLE1rBi6AF2A4Ov8yOKU0KuzsAZoW7N8IXPnrn8cnA+sD6+UlCBQN0q6IY0KjwIz2vPiPD8xWEh6/AfPO//bBWpJLBfAKTAeVM+0BXAOwFfgERueM2EkHPGsbBg+wBXg5KmdrcPaWs0fGK78zUB3AK6UuJ/jUClyzlRZ2NFuj4xPxPbzZUmFwcajmIVj1jjkHLrCxySKLRYAvnqQXAjdYpRmdgyrwUxA1j0f9e7wTgFcJ7cBFAB4ptgc7pdgPfCDF/mBDCYtW403tDn5nUb6eK9JxAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHEAAAAmCAYAAADz9XSfAAAC00lEQVR4nO2c4XnaMBRF7+NjAEagGzgbOBuQDcgGdAM6QbMBbJBskGwAGyQblA1uf8hNhbAtbPSeGtV3AB0ONu9JnyQApZBckHwlWWsxWphLkgcrXsAuy5dkRfIXXWoVyCVz9YdpwQvYFcl3Y99azZfkmuepk0MumVsfqM0L2Dl8Nyq+TTnZ8TJ1Mkg78zkEavFa+OX4sqnNLUJqUnQlrJWpwQvYi6J86dVmKym6EtbJTM0L2Dl8V33MWwffdA2sJUXyZwyYkhewc/huY8CxA7fWZk0p/p3CR5OC18LeFePLntqsJcXzKXx6qX52X7//er6M1GYNKV5O4dNK9bNz+Q5iDhk8WptTS/H6EjZO6t/zjfb7tsyvGHgB4BnA6A83NA3zFUBlxQzYOwArY+Zo31lk8ArAAbYPsAbwjjwPsIL7Mi0fYIUbfTsfIsk1nNBy7OBDQ3LTMBdWTI+9hvGvv2EeoOE7tjZ3pL6CN2QKH83/5jsPB4f927iE67m5+p91v18ise9nOWWC2jw0JFdw5SRX/8vR75P7zprB19CqzR0huYV7I3P1vwMK6fdzkjsA69QDd4UZpvABvzjf3iXGlK+RmYg8Ani0AorISUQeAPywYgb8XL7ftRizBrQHcAfgpAUKIyJbAA+WTI+9h/P9MGQ+AbiHgu9nORWRI4BvAI6pIV0RkRe4L9OM6bGPDfvNkPkGBd+zntj89O8APKWE9EVEPuDe0L0V02OfROQepfpyxJZIR+oBzGt2zqP5Qr6Dt9naEoMM2pzsyNVSDTN2huU2qbjvkA3gFL7+Gd1R6V1iZOwbpr3ZYx/hSt2LMfMm3+g60esbZksCrzfvrZgB23QJZDoX4XQ8w8pX53iGB5kOSpXgy+nIYjm+nA4PW/jqHB4OINMxfn1fvWP8HmS6UFOCL6erbeX4crpkWhswdS6ZBpDpurc+s1b3ZWl/RBBnZ/P9DWNXeLt4JWYKAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAgCAYAAADud3N8AAABr0lEQVRIib3WsWsUQRTH8c/OnTZRBIkWOUFLG0FjFUgrpLOz0NZ/QNDeXhQbQSxSCVrY2KSwUIgWIgqBNEoOxYhaGS8RxEIuFrsLlzV3mbm97A9esfB+7/tmZuftZuKU4SzmcRodtPEXX/Eer7CC7ciaQzWNm1gviu0V60X+9DiwFm5gKxJWja3C34oFHsfymLBqLBf1RuoEuhMCltEt6u6qQ1iNLHQfl3AvMn+1qP+fFiMLfKr4Pkb6FqvAuYTt+jnQ9RQ2Erxzg9ClBGN5Tg+xluhbKoEd9BPN40YfnYAF+cRpQhkWAmYTjZuFuYzNRP9skG9vk+oEHG4YOhXQaxj6I8gvd5P6HvC6YegbOILf4u9a9Th6Cd4+ZoL8lX+0b+vaqef4Vj6cwp/Ibuus9GK1i+sJ5t5AxHre2WXyZXiSUCR15u74wgzqIJ7uA/T2MGCpFm6Z3JfnJQ7sBS01j7c1gV0ciwWWynABj/ErEfgZJ1OBVbVxDldwTT7JhgE/GPEHWEd3hwBf4OgoY5hwI3fkx7ExKqk9IdgXXMWzmOS6K93GA5yJBdbVZZwfx/gPjrmEGhKRqqEAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAADF0lEQVRIiZ3WS4iVZRgH8N8cx+N4osuMkqPZFbEb4aIUwkVWEAUtohZR7oISiqJNi0gwsILatLCCcBPZbREFbaTMRYRdKRcVJdaohVE5MzmHUU9NZ74Wz/M535w5M874h5dzznt5/s/l/z7v6XFmNLABd2AT1mApjuN7fIS9+AH/zsNeV1yNl3AMBVoYwV9J1MYkfsIT6D8bkpvxdRI08Rm24i7chs14MSNpYwJv4dKFkFyPb5LkFzyKVah37GuIqJ/H37l/Fy6cD8lyvJuHfsQtWHyGM+emM8dFZE9iyVwHevAA/kkP7+xYX4SLsQ5rk6BEHU+ngwdxw1xEg9idm18xPVXnYwv2YQgH8DKurey5DF/l+a1zRXUjfsUYbq/MN/CMEEVRGRP4Atd1iWovVs5GdB9OCiVdXpnfJCRddBlt7BB3i1DkWEZ9ZWmgVjHWg/PSqzFxZwgh3Jpr3VATl3kgfw9jXKR6SXVTlaiWn+30ttyzqmNvJ1aYUmZ5tifHDKJJUYOJ9L705j8cMrfEj+JUfh8QahwX6p1BBIcxKuqzpuLhBzgyC0khOsKIkP/GdHQoHe+KlfgwD++oRFHDgxlZVQhNvC1SB5fgS5GdbWZ2ktNYlAab4sJWJV4X/e910Z724DFclOt9eEqk+mesn42kxCDeS4+/S7K+ynq/6A6D6M25hugoo6Iu2zvOzIqNopkW+A2P4IKMuIrFoqk+J2pU4BNT9T2N3s6JRFs0SFgtnoO78T6+FYpaIRruPbginWiKbAzNJ5rVeE0U9JAQx4iQfSFe0ZaoRVUYkzn24CYdQijluBx/iFw/jIfS4At4Fp+K/Pcm4Xj+3i+EcQofiza0IceweOpJ9e5Lr9fhXvyeHu40/QE7R4jgGtFE12b6lglZ9+N+cXmLtHmVqNdmmYYW3jH1dO9OgwtFHY+LVJ/Am2l3v0xBmfsCn4t0ni0G8Kqp/xF/4ljN9C49IR60UTOlPF9MiielJWral3MOm66cYbwh7sdCURdCOpK2SpvNXnFflmY0LdHXyrFQ1MQ71BAd4qTIzOj/E7fg3rTP7r4AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAaCAYAAAAwspV7AAAAs0lEQVRIie3UMQrCQBCF4S9h8SzxRKbQ0lYrxcYL6BXsbPSEQhotNBBCAmuzSbE/TLGzA/uYfbxiWVULXLFGgTsOaOp6BR6Pp5QEXLDr9HZ44dSbfacSVWIz0N+mEjBEOeXjY5S+HupzG+gVqSrg+Du033jHuaumNXwqAhrsfzULQuotxDBLoxfLqhq9nGqLAaOJ3g7lRJcTPZ6c6LHkRI9llkbPif6PqJzoMczS6DnRY/kAyfw0NPNHfbAAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAZCAYAAADNAiUZAAABn0lEQVRIic2WwXHCMBBFnzM0QAu04JSQlAAlQAlwk3SDElAJSQmhBFwCtOAS4CAJ1kISdkxm8mc8I9kr/d2V9nsr0pgDS+DDzy2wShkarW5jpc0MOInPG+DbaHWWa94S+6yBL0E4Blvg6J15SvpKTHGZu2ESGcy8UcAG2PXd3aexAlDa/HDPVi3t4khn0dz2JUzgkNs3lV6JdgSpXCuz95T0T1AiHRNlcX3pTEuke+ACXJQ2F6VNqrx6p1fesqZA2gdSEKbSMUm69M9LSH35SOJtEIkJLqWnaE3DgPosYAEc/bgGTkobW2VIq767Su1NQWmzxslhgM3d3mPm/SAobeqIEHBnGqRL/kVquuf7W+zFuAHejVYrGamlK3uj/jI+SlkNK6NVA48lI29srMNDIWuzDYQp0k5tFTZc0hWHlINZofl32luKNMYgnX4FaWu0SpHK9cUe6RzNc2VjuSvWIf6otHloUSTiduWMS1Xwcu+fuBuceodaQZ7qBgM6Op5Kbx/NneMi/JSlkEFL1PbkSBck0iZgvc0zwh1OhTrHdgUMPHWH6hjEpwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAYCAYAAAB0kZQKAAABmklEQVRIibWWy3HCMBCGv3HSgFtwC0kJaYEWSAlQgiiBXHNzSoBrbqQEuOZmX7mRA1q0XkvyiJh/RjO2tI9f2ocEY6yAC1BH1v4DsdsBLznBNy+4m5kAQAMcFZEmJXicEpiBSEdmo84vugcREEhYLlxPfoDOj7lzIQYJyzbGbhvT8HB+/aKGPTWn1nIJqJP0hh2J4zEOnJKVIY7sfC60DSYkMtElFGI4GEc6zjvCca8yNgYyS8rLUnSE/NTOY2hFpyIk4qnAwAfQ+2/R3wPrAhvir6kIPaGEBMCX+S8hAGET6JMoxT5ltBTVvYqMk255p53+XhKOcQ9YFNq45WIVmYxhSdhpSziFNSEMDfmStJBN9BC6XKpEdWPRQ7qrM/NCdkU+RFLaDYSaTzWrGInWyBwiMrm+IU+GI8AzIctrv2iz/gS8E0r5h3F5vhqHPbBJEIAQioGd6K32QIi/QXLrW+3RV/mCeEipmXjxzAjJn+g1r2/CklIrgfjIXnT6TVDafKYgVXawC0/m/xM4c62Ab+B3ZiJwrbSznvgDPlufbtfHeLcAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAbCAYAAAAULC3gAAABYElEQVRIie2XTU7DMBCFP1dZItFLVGHFujs2CAmxZMdFKBdo4TBhxx04AItyiqgpe7OwKyZR4njCgCrEk0aa+PfZHr+JIWABVMAO8Ea2i2MuALz3WQZQArUhka7VQKkhVP0gmYNVuYQcsAdO4tG9AS/Y4Bo4j37jvT/N7ShXsjIiA7CRY+fu0MyQgAn+PiF5W6bg6HYIdEE9KqBih7LK6QiohlCWgE4g1BJQzZGtgbmivRZzYF0oOlwJP0dAX4FlT/lT51sK6CWMHNnAVq+GbpMo7xXGHrTaFcAHX6njLlakVgRwATxG/15WOOcO7o0obvqYDCGZXL8RpK3kmph/02nLGYnbY0CojnNkEZoBW0LwPRMyvxX2ccxlnCMLRVzlO3CrmOxB+G6w1QRorn0LInhNcXS57J/QGDQxNCagU9EWUMXz5FdeJxpCSQE1sCCgmgcc4Z+oIuQmKyJNHLME+AQWCT3RvS5INwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAA5ElEQVRIib3WPQqDQBCG4dc0Qq6Rg6XzXjlDevEIghcQBGtbK9OsYUn8mU/HXRgIMpMHx12dDH3lwDP8fgHjgf8wrztQAlOIMlxLgl2KrmGXoHuYK2rFXNA1bACqEIMXunVndZRXr+RI6F4bLaAZtTyzJspvdnI3UesGaaOa1pC/iCq7UQX/0FzAJqCPwF6oK4NFIRTNx2JeS8diK4rbb29TLLWl8edoFOq+LQX9FTagtfP0TlXC5Sy6YFa0Ax4hurOYBa2ivMoDs6DvEG6YBXXHVDTpXJN0cks6m8pYdgA9Nep/AHdVY2hvGCEdAAAAAElFTkSuQmCC\""],"sourceRoot":""}